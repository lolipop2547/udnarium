(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9625],{9348:(Z,O,x)=>{x(9993),Opal.queue(function(o){var M,K,V,_,b,q,C,J,S,D=[],e=o.nil,j=o.$$$,E=o.module,H=o.klass,w=o.const_set,P=o.send2,F=o.find_super,m=o.def,R=o.eqeqeq,v=o.send,L=o.range,z=o.rb_minus,c=o.truthy,l=o.rb_plus,p=o.rb_ge,T=o.rb_gt,k=o.eqeq,W=o.not,A=o.to_ary,B=o.neqeq;return M=D,K=S=[E(D[0],"BCDice")].concat(M),C=[E(S[0],"GameSystem")].concat(K),J=o.$r(C),V=C,b=[_=H(C[0],J("Base"),"LostRoyal")].concat(V),q=o.$r(b),_.$$prototype.randomizer=e,w(b[0],"ID","LostRoyal"),w(b[0],"NAME","\u30ed\u30b9\u30c8\u30ed\u30a4\u30e4\u30eb"),w(b[0],"SORT_KEY","\u308d\u3059\u3068\u308d\u3044\u3084\u308b"),w(b[0],"HELP_MESSAGE","\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n\n\u884c\u70ba\u5224\u5b9a\n\u3000LR[x,x,x,x,x,x]\n\u3000\u3000x \u306e\u4e26\u3073\u306b\u306f\u3010\u5224\u5b9a\u8868\u3011\u306e\u6570\u5024\u3092\u9806\u756a\u306b\u5165\u529b\u3059\u308b\u3002\n\u3000\u3000\uff08\u4f8b\uff1a LR[1,3,0,1,2,3] \uff09\n\n\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\n\u3000FC\n\n\u98a8\u529b\u6c7a\u5b9a\u8868\n\u3000WPC\n\n\u611f\u60c5\u6c7a\u5b9a\u8868\n\u3000EC\n\n\u5e0c\u671b\u70b9\u306e\u6c7a\u5b9a\n\u3000HRx\n\u3000\u3000x \u306b\u306f\u30c0\u30a4\u30b9\u306e\u6570\uff08 1 - 2 \uff09\u3092\u6307\u5b9a\n"),_.$register_prefix("LR\\[[0-5],[0-5],[0-5],[0-5],[0-5],[0-5]\\]","FC","WPC","EC","HR[1-2]"),m(_,"$initialize",function f(s){var r=this;return delete f.$$p,P(r,F(r,"initialize",f,!1,!0),"initialize",[s],null),r.sort_add_dice=!0,r.d66_sort_type=j(q("D66SortType"),"NO_SORT")},1),m(_,"$eval_game_system_specific_command",function(s){var r,i=this;return R(/LR\[([0-5]),([0-5]),([0-5]),([0-5]),([0-5]),([0-5])\]/i,r=s)?i.$check_lostroyal([q("Regexp").$last_match(1).$to_i(),q("Regexp").$last_match(2).$to_i(),q("Regexp").$last_match(3).$to_i(),q("Regexp").$last_match(4).$to_i(),q("Regexp").$last_match(5).$to_i(),q("Regexp").$last_match(6).$to_i()]):R(/FC/,r)?i.$roll_fumble_chart():R(/WPC/,r)?i.$roll_wind_power_chart():R(/EC/,r)?i.$roll_emotion_chart():R(/HR([1-2])/,r)?i.$roll_hope(q("Regexp").$last_match(1).$to_i()):e},1),m(_,"$check_lostroyal",function(s){var n,i=this,r=e,$=e,t=e,u=e,a=e;return r=[],v(L(0,3,!0),"each",[],function d(y){var h,g=null==d.$$s?this:d.$$s;return null==g.randomizer&&(g.randomizer=e),null==y&&(y=e),h=g.randomizer.$roll_once(6),r["$<<"](h)},{$$arity:1,$$s:i}),n=($=v(r,"map",[],function(y){return null==y&&(y=e),s["$[]"](z(y,1))},1).$to_a()).$inject("+"),t=i.$find_sequence(r),u="3D6 => ["+r.$join(",")+"] => ("+$.$join("+")+") => "+n,c(t["$nil?"]())||c(t["$empty?"]())||(a=c(i["$fumble_?"](r,t))?3:t.$size(),u=l(u," | "+t.$size()+" chain! ("+t.$join(",")+") => "+l(n,a)),c(p(t.$size(),3))&&(u=l(u," [\u30b9\u30da\u30b7\u30e3\u30eb]")),c(i["$fumble_?"](r,t))&&(u=l(u," [\u30d5\u30a1\u30f3\u30d6\u30eb]"))),u},1),m(_,"$find_sequence",function(s){var r;return s=s.$sort(),r=v(L(1,6,!0),"map",[],function $(n){return null==n&&(n=e),(null==$.$$s?this:$.$$s).$find_sequence_from_start_key(s,n)},{$$arity:1,$$s:this}),v(v(r,"select",[],function(n){return null==n&&(n=e),T(n.$size(),1)},1),"max",[],function(n,t){return null==n&&(n=e),null==t&&(t=e),n.$size()["$<=>"](t.$size())},2)},1),m(_,"$find_sequence_from_start_key",function(s,i){var $=e,n=e;for($=[],n=i;c(s["$include?"](n));)$["$<<"](n),n=l(n,1);if(W($["$empty?"]())&&k($["$[]"](0),1))for(n=6;c(s["$include?"](n));)$.$unshift(n),n=z(n,1);return $},2),m(_,"$fumble_?",function(s,i){try{return v(i,"each",[],function($){if(null==$&&($=e),!c(p(s.$count($),2)))return e;o.ret(!0)},1),!1}catch(r){if(r===o.returner)return r.$v;throw r}},2),m(_,"$roll_fumble_chart",function(){var i;return"1D6 => ["+(i=this.randomizer.$roll_once(6))+"] "+["\u4f55\u304b\u306e\u554f\u984c\u3067\u8a00\u3044\u4e89\u3044\u3001\u4e3b\u541b\u306b\u7121\u793c\u3092\u50cd\u3044\u3066\u3057\u307e\u3046\u3002\u3042\u306a\u305f\u306f\u4e3b\u541b\u306e\u540d\u8a89\u70b9\u3092\uff11\u70b9\u5931\u3046\u304b\u3001\u3010\u6642\u9593\u3011\u3092\uff11\u70b9\u6d88\u8cbb\u3057\u3066\u548c\u89e3\u306e\u8a71\u3057\u5408\u3044\u3092\u6301\u3064\u304b\u9078\u3079\u308b\u3002","\u898b\u904e\u3054\u305b\u3070\u4eba\u3005\u3092\u4e0d\u5e78\u306b\u3059\u308b\u5371\u967a\u306b\u906d\u9047\u3059\u308b\u3002\u3042\u306a\u305f\u306f\u9003\u3052\u51fa\u3057\u3066\u5192\u967a\u306e\u540d\u8a89\u70b9\u3092\uff11\u70b9\u5931\u3046\u304b\u3001\u3053\u308c\u306b\u7acb\u3061\u5411\u304b\u3044\u3010\u547d\u6570\u3011\u3092\uff12\u70b9\u6e1b\u3089\u3059\u304b\u3092\u9078\u3079\u308b\u3002","\u3042\u306a\u305f\u304c\u60f9\u304b\u308c\u305f\u306e\u306f\u597d\u610f\u306b\u4ed8\u3051\u8fbc\u3080\u4eba\u3060\u3063\u305f\u3002\u3042\u306a\u305f\u306f\u305d\u306e\u5834\u3092\u53bb\u3063\u3066\u604b\u6155\u306e\u540d\u8a89\u70b9\u3092\uff11\u70b9\u5931\u3046\u304b\u3010\u6b63\u7fa9\u3011\u3092\uff11\u70b9\u6e1b\u3089\u3057\u3066\u793c\u3092\u5c3d\u304f\u3059\u304b\u3092\u9078\u3079\u308b\u3002","\u91d1\u92ad\u7684\u306a\u554f\u984c\u3067\u3001\u751f\u547d\u3068\u9b42\u306e\u82e6\u3057\u307f\u3092\u80cc\u8ca0\u3046\u4eba\u306b\u51fa\u4f1a\u3046\u3002\u3042\u306a\u305f\u306f\u5e87\u8b77\u306e\u540d\u8a89\u70b9\u3092\uff11\u70b9\u5931\u3046\u304b\u51fa\u8cbb\u3092\uff13\u70b9\u5897\u3084\u3059\u304b\u3092\u9078\u3079\u308b\u3002","\u8972\u6483\u3092\u53d7\u3051\u308b\u3002\u82e6\u3082\u306a\u304f\u53e9\u304d\u4f0f\u305b\u308b\u3068\u3001\u5351\u5c48\u306a\u614b\u5ea6\u3067\u547d\u4e5e\u3044\u3092\u3057\u3066\u304d\u305f\u3002\u5bb9\u8d66\u306a\u304f\u547d\u3092\u596a\u3044\u5bdb\u5bb9\u306e\u540d\u8a89\u70b9\u3092\uff11\u70b9\u5931\u3046\u304b\u3001\u5bc6\u544a\u306b\u3088\u3063\u3066\u3010\u8840\u8def\u3011\u304c\uff11\uff24\uff16\u70b9\u5897\u3048\u308b\u304b\u3092\u9078\u3076\u3053\u3068\u304c\u3067\u304d\u308b\u3002","\u98a8\u805e\u306b\u3088\u308a\u3001\u53cb\u304c\u60aa\u306b\u8eab\u3092\u8cb6\u3081\u305f\u3068\u77e5\u308b\u3002\u5171\u306b\u4e26\u3093\u3060\u6226\u5834\u304c\u8272\u892a\u305b\u308b\u60f3\u3044\u3060\u3002\u6226\u53cb\u306e\u540d\u8a89\u70b9\u3092\uff11\u70b9\u6e1b\u3089\u3059\u304b\u3001\u3010\u9152\u3068\u6b4c\u3011\u3059\u3079\u3066\u3092\u5931\u3046\u304b\u3092\u9078\u3079\u308b\u3002"]["$[]"](z(i,1))},0),m(_,"$roll_wind_power_chart",function(){try{var i=e,r=e,$=e;return i=0,r=0,$="",v(this,"loop",[],function n(){var t,u,d,y,a=null==n.$$s?this:n.$$s,h=e;if(null==a.randomizer&&(a.randomizer=e),d=a.randomizer.$roll_once(6),i=l(i,d),u=[[!0,0,"\u307b\u307c\u51ea\uff08\u632f\u308a\u8db3\u3057\uff09"],[!0,0,"\u5f31\u3044\u98a8\uff08\u632f\u308a\u8db3\u3057\uff09"],[!1,0,"\u3086\u308b\u3084\u304b\u306a\u98a8"],[!1,0,"\u3086\u308b\u3084\u304b\u306a\u98a8"],[!1,1,"\u3084\u3084\u5f37\u3044\u98a8\uff08\u5100\u5f0f\u70b9\u30d7\u30e9\u30b9\uff11\uff09"],[!1,2,"\u5f37\u3044\u98a8\uff08\u9f8d\u3092\u5e7b\u8996\u3001\u5100\u5f0f\u70b9\u30d7\u30e9\u30b9\uff12\uff09"],[!1,3,"\u4f53\u304c\u63fa\u3089\u3050\u307b\u3069\u306e\u98a8\uff08\u9f8d\u3092\u5e7b\u8996\u3001\u5100\u5f0f\u70b9\u30d7\u30e9\u30b9\uff13\uff09"]]["$[]"](z([i,7].$min(),1)),y=null==(t=A(u))[0]?e:t[0],h=null==t[2]?e:t[2],r=l(r,null==t[1]?e:t[1]),h=B(i,d)?"1D6["+d+"]+"+z(i,d)+" "+h:"1D6["+d+"] "+h,$=c($["$empty?"]())?h:$+" => "+h,c(y))return e;$=l($," [\u5408\u8a08\uff1a\u5100\u5f0f\u70b9 +"+r+" ]"),o.ret($)},{$$arity:0,$$s:this})}catch(n){if(n===o.returner)return n.$v;throw n}},0),m(_,"$roll_emotion_chart",function(){var i;return"1D6 => ["+(i=this.randomizer.$roll_once(6))+"] "+["\u611b\u60c5\uff0f\u6bba\u610f","\u53cb\u60c5\uff0f\u8ca0\u76ee","\u5d07\u62dd\uff0f\u5acc\u60aa","\u8208\u5473\uff0f\u4fae\u8511","\u4fe1\u983c\uff0f\u5ac9\u59ac","\u5b88\u8b77\uff0f\u6b32\u60c5"]["$[]"](z(i,1))},0),m(_,"$roll_hope",function(s){try{var r=e,$=e;return r=0,$="",v(this,"loop",[],function n(){var u,t=null==n.$$s?this:n.$$s,a=e;if(null==t.randomizer&&(t.randomizer=e),u=t.randomizer.$roll_once(6),a=0,c(p(s,2))&&(a=t.randomizer.$roll_once(6)),r=l(r,l(u,a)),$=k(s,2)?l($,"2D6["+u+","+a+"]"):l($,"1D6["+u+"]"),c(t.$is_1or2(u))||c(t.$is_1or2(a)))return $=l($," \uff08\u632f\u308a\u8db3\u3057\uff09 => ");$=l($," => \u5408\u8a08 "+r),o.ret($)},{$$arity:0,$$s:this})}catch(n){if(n===o.returner)return n.$v;throw n}},1),m(_,"$is_1or2",function(s){return[1,2]["$include?"](s)},1)})}}]);