(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1616],{2838:(Z,O,z)=>{z(9993),Opal.queue(function(e){var I,T,V,i,c,_,R,h,F,E,k=[],r=e.nil,A=e.$$$,v=e.module,D=e.klass,m=e.const_set,B=e.def,G=e.hash2,t=e.truthy,M=e.rb_le,w=e.rb_gt,f=e.send,P=e.rb_ge,x=e.rb_plus,d=e.to_a,U=e.rb_minus;return I=k,T=E=[v(k[0],"BCDice")].concat(I),h=[v(E[0],"GameSystem")].concat(T),F=e.$r(h),V=h,c=[i=D(h[0],F("Base"),"Karukami")].concat(V),_=e.$r(c),(R=i.$$prototype).round_type=R.randomizer=r,m(c[0],"ID","Karukami"),m(c[0],"NAME","\u30ab\u30eb\u30ab\u30df"),m(c[0],"SORT_KEY","\u304b\u308b\u304b\u307f"),m(c[0],"HELP_MESSAGE","\u25a0 \u884c\u70ba\u5224\u5b9a\u3001\u30c0\u30e1\u30fc\u30b8\u7b97\u51fa (xUB+y@c>=t)\n  6\u9762\u30c0\u30a4\u30b9\u3092x\u500b\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ee5\u4e0a\u306e\u51fa\u76ee\u304c\u51fa\u305f\u3089\u632f\u308a\u8db3\u3057\u3066\u5408\u8a08\u5024\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002\n  x: \u30c0\u30a4\u30b9\u6570\n  y: \u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\uff09\n  c: \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\uff08\u7701\u7565\u53ef\uff09\n  t: \u76ee\u6a19\u5024\u5024\uff08\u7701\u7565\u53ef\uff09\n  \u4f8b\uff092UB, 2UB>=7, 3UB+1@5, 3UB+1@5<10\n"),i.$register_prefix("\\d+UB"),B(i,"$eval_game_system_specific_command",function(p){return this.$roll_ub(p)},1),B(i,"$roll_ub",function(p){var g,j,n=r,a=r,o=r,l=r,y=r,b=r,s=r,$=r;if(n=A(_("Command"),"Parser").$new("UB",G(["round_type"],{round_type:this.round_type})).$has_prefix_number().$enable_critical().$parse(p),!t(n))return r;if(g=t(j=n.$critical())?j:6,t(M(g,1)))return"("+n+") \uff1e \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f2\u4ee5\u4e0a\u3068\u3057\u3066\u304f\u3060\u3055\u3044";for(a=[],o=0,l=n.$prefix_number();t(w(l,0));)y=this.randomizer.$roll_barabara(l,6),a.$push(y),l=f(y,"count",[],function(u){return null==u&&(u=r),P(u,g)},1),o=x(o,l);return b=x(a.$flatten().$sum(),n.$modify_number()),s=t(a.$first()["$all?"](1))?(b=0,_("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb")):t(n.$cmp_op()["$nil?"]())?_("Result").$new():t(b.$send(n.$cmp_op(),n.$target_number()))?_("Result").$success("\u6210\u529f"):_("Result").$failure("\u5931\u6557"),$=[w(o,0)],f(s,"critical=",d($)),U($.length,1),$=[["("+n+")"].concat(d(f(a,"map",[],function(u){return null==u&&(u=r),"["+u.$join(",")+"]"},1))).concat([b,t(s["$critical?"]())?o+"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb":r,s.$text()]).$compact().$join(" \uff1e ")],f(s,"text=",d($)),U($.length,1),s},1)})}}]);