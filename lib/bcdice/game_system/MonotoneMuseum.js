(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[735],{4351:(re,$e,te)=>{te(9993),Opal.modules["bcdice/dice_table/table"]=function(e){var _,M,T,i,k,C,R,W,G,f=[],r=e.nil,n=e.module,u=e.klass,g=e.hash2,y=e.defs,d=e.truthy,E=e.def,A=e.rb_minus;return _=f,M=G=[n(f[0],"BCDice")].concat(_),T=W=[n(G[0],"DiceTable")].concat(M),k=[i=u(W[0],null,"Table")].concat(T),C=e.$r(k),(R=i.$$prototype).times=R.sides=R.name=R.items=r,y(i,"$from_i18n",function(l,$){var s=r;return s=C("I18n").$t(l,g(["locale"],{locale:$})),this.$new(s["$[]"]("name"),s["$[]"]("type"),s["$[]"]("items"))},2),E(i,"$initialize",function(l,$,a){var s=this,c=r;return s.name=l,s.items=a.$freeze(),c=/(\d+)D(\d+)/i.$match($),d(c)||s.$raise(C("ArgumentError"),"Unexpected table type: "+$),s.times=c["$[]"](1).$to_i(),s.sides=c["$[]"](2).$to_i()},3),E(i,"$roll",function(l){var a,$=this;return a=l.$roll_sum($.times,$.sides),$.$choice(a)},1),E(i,"$choice",function(l){var a,$=this;return a=A(l,$.times),C("RollResult").$new($.name,l,$.items["$[]"](a))},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var b,x,m,T,i,k,C,B,D,f=[],r=e.nil,n=e.module,u=e.klass,g=e.def,y=e.rb_plus,d=e.rb_times,E=e.send;return b=f,x=D=[n(f[0],"BCDice")].concat(b),m=B=[n(D[0],"DiceTable")].concat(x),i=[T=u(B[0],null,"D66RangeTable")].concat(m),k=e.$r(i),(C=T.$$prototype).items=C.name=r,g(T,"$initialize",function(v,l){return this.name=v,this.items=l.$freeze()},2),g(T,"$roll",function(v){var $,a,s,c=r;return $=v.$roll_once(6),a=v.$roll_once(6),s=y(d($,10),a),c=E(this.items,"find",[],function(P){return null==P&&(P=r),P["$[]"](0)["$include?"](s)},1),k("RollResult").$new(this.name,s,c["$[]"](1))},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var D,B,i,k,C,R,v,q,x,f=[],r=e.nil,n=e.module,u=e.klass,g=e.hash2,y=e.defs,d=e.def,E=e.rb_plus,A=e.rb_times,b=e.rb_minus;return D=f,B=x=[n(f[0],"BCDice")].concat(D),i=q=[n(x[0],"DiceTable")].concat(B),C=[k=u(q[0],null,"D66GridTable")].concat(i),R=e.$r(C),(v=k.$$prototype).name=v.items=r,y(k,"$from_i18n",function($,a){var c=r;return c=R("I18n").$t($,g(["locale","raise"],{locale:a,raise:!0})),this.$new(c["$[]"]("name"),c["$[]"]("items"))},2),d(k,"$initialize",function($,a){return this.name=$,this.items=a.$freeze()},2),d(k,"$roll",function($){var s,c,K,P,V;return s=$.$roll_once(6),c=$.$roll_once(6),K=E(A(s,10),c),P=b(s,1),V=b(c,1),R("RollResult").$new(this.name,K,this.items["$[]"](P)["$[]"](V))},1)},Opal.modules["bcdice/format"]=function(e){var b,x,M,B,W,D,f=[],r=e.nil,n=e.module,u=e.eqeqeq,g=e.def,y=e.truthy,d=e.eqeq,E=e.rb_gt;return b=f,x=D=[n(f[0],"BCDice")].concat(b),B=[M=n(D[0],"Format")].concat(x),W=e.$r(B),M.$module_function(),g(M,"$comparison_operator",function(m){var T;return u("==",T=m)?"=":u("!=",T)?"<>":u(W("Symbol"),T)?m.$to_s():r},1),g(M,"$modifier",function(m){return y(m["$nil?"]())?r:d(m,0)?"":y(E(m,0))?"+"+m:m.$to_s()},1)},Opal.queue(function(e){var C,$,V,h,t,L,o,N,j,I,s,c,v,f=e.top,r=[],n=e.nil,u=e.$$$,g=e.module,y=e.klass,d=e.const_set,E=e.send2,A=e.find_super,b=e.def,_=e.truthy,D=e.send,G=e.rb_plus,x=e.rb_le,M=e.rb_ge,B=e.to_a,W=e.rb_minus,q=e.hash2,m=e.defs,T=e.neqeq,i=e.range;return f.$require("bcdice/dice_table/table"),f.$require("bcdice/dice_table/d66_range_table"),f.$require("bcdice/dice_table/d66_grid_table"),f.$require("bcdice/format"),C=r,$=v=[g(r[0],"BCDice")].concat(C),s=[g(v[0],"GameSystem")].concat($),c=e.$r(s),V=s,j=[N=y(s[0],c("Base"),"MonotoneMuseum")].concat(V),I=e.$r(j),N.$$prototype.randomizer=n,d(j[0],"ID","MonotoneMuseum"),d(j[0],"NAME","\u30e2\u30ce\u30c8\u30fc\u30f3\u30df\u30e5\u30fc\u30b8\u30a2\u30e0RPG"),d(j[0],"SORT_KEY","\u3082\u306e\u3068\u304a\u3093\u307f\u3086\u3046\u3057\u3042\u3080RPG"),d(j[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u3000\u30fb\u901a\u5e38\u5224\u5b9a\u3000\u3000\u3000\u3000\u3000\u30002D6+m>=t[c,f]\n\u3000\u3000\u4fee\u6b63\u5024m,\u76ee\u6a19\u5024t,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024c,\u30d5\u30a1\u30f3\u30d6\u30eb\u5024f\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002([]\u3054\u3068\u7701\u7565\u3067\u304d\u307e\u3059)\n\u3000\u3000\u81ea\u52d5\u6210\u529f\u3001\u81ea\u52d5\u5931\u6557\u3001\u6210\u529f\u3001\u5931\u6557\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u5404\u7a2e\u8868\n\u3000\u30fb\u611f\u60c5\u8868\u3000ET\uff0f\u611f\u60c5\u8868 2.0\u3000ET2\n\u3000\u30fb\u5146\u5019\u8868\u3000OT\uff0f\u5146\u5019\u8868ver2.0\u3000OT2\uff0f\u5146\u5019\u8868ver3.0\u3000OT3\n\u3000\u30fb\u6b6a\u307f\u8868\u3000DT\uff0f\u6b6a\u307f\u8868ver2.0\u3000DT2\uff0f\u6b6a\u307f\u8868(\u91ce\u5916)\u3000DTO\uff0f\u6b6a\u307f\u8868(\u6d77)\u3000DTS\uff0f\u6b6a\u307f\u8868(\u9928\u30fb\u57ce)\u3000DTM\n\u3000\u30fb\u4e16\u754c\u6b6a\u66f2\u8868\u3000WDT\uff0f\u4e16\u754c\u6b6a\u66f2\u88682.0\u3000WDT2\n\u3000\u30fb\u6c38\u52ab\u6d88\u5931\u8868\u3000EDT\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),b(N,"$initialize",function S(w){var t=this;return delete S.$$p,E(t,A(t,"initialize",S,!1,!0),"initialize",[w],null),t.d66_sort_type=u(I("D66SortType"),"NO_SORT"),t.sort_add_dice=!0},1),b(N,"$eval_game_system_specific_command",function(w){var t,h=this;return _(t=h.$check_roll(w))?t:h.$roll_tables(w,u(h.$class(),"TABLES"))},1),N.$private(),b(N,"$check_roll",function(w){var h,t,L=this,o=n,H=n,F=n,U=n,Y=n,z=n,J=n,p=n,Q=n,ee=n,O=n,X=n,Z=n;return o=/^(\d+)D6([+\-\d]*)>=(\d+)(\[(\d+)?(,(\d+))?\])?$/i.$match(w),_(o)?(H=o["$[]"](1).$to_i(),F=_(o["$[]"](2))?I("ArithmeticEvaluator").$eval(o["$[]"](2)):0,U=o["$[]"](3).$to_i(),Y=_(z=(h=o["$[]"](5))===n||null==h?n:D(h,"to_i",[]))?z:12,J=_(z=(t=o["$[]"](7))===n||null==t?n:D(t,"to_i",[]))?z:2,Q=(p=L.randomizer.$roll_barabara(H,6).$sort()).$sum(),ee=p.$join(","),O=G(Q,F),X=_(x(Q,J))?I("Result").$fumble(L.$translate("MonotoneMuseum.automatic_failure")):_(M(Q,Y))?I("Result").$critical(L.$translate("MonotoneMuseum.automatic_success")):_(M(O,U))?I("Result").$success(L.$translate("success")):I("Result").$failure(L.$translate("failure")),Z=[["("+w+")",Q+"["+ee+"]"+I("Format").$modifier(F),O.$to_s(),X.$text()].$join(" \uff1e ")],D(X,"text=",B(Z)),W(Z.length,1),X):n},1),h=j,L=[t=y(j[0],u(I("DiceTable"),"D66RangeTable"),"MMTable")].concat(h),o=e.$r(L),m(t,"$from_i18n",function(F,U){var z=n;return z=o("I18n").$translate(F,q(["locale","raise"],{locale:U,raise:!0})),this.$new(z["$[]"]("name"),z["$[]"]("items"))},2),b(t,"$initialize",function H(F,U){var J,z=this;return delete H.$$p,T(U.$size(),o("RANGE").$size())&&z.$raise(o("UnexpectedTableSize").$new(F,U.$size())),J=o("RANGE").$zip(U),E(z,A(z,"initialize",H,!1,!0),"initialize",[F,J],null)},2),d(L[0],"RANGE",[i(11,12,!1),i(13,14,!1),i(15,16,!1),i(21,22,!1),i(23,24,!1),i(25,26,!1),i(31,32,!1),i(33,34,!1),i(35,36,!1),i(41,42,!1),i(43,44,!1),i(45,46,!1),i(51,52,!1),i(53,54,!1),i(55,56,!1),i(61,62,!1),i(63,64,!1),i(65,66,!1)].$freeze()),function(S,w){var h=[S].concat(w),t=e.$r(h);S.$private(),b(S,"$translate_tables",function(o){return q(["ET","ET2","OT","DT","DT2","WDT","WDT2","OT2","DTO","DTS","EDT","DTM","OT3"],{ET:u(t("DiceTable"),"D66GridTable").$from_i18n("MonotoneMuseum.table.ET",o),ET2:u(t("DiceTable"),"D66GridTable").$from_i18n("MonotoneMuseum.table.ET2",o),OT:u(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.OT",o),DT:u(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.DT",o),DT2:t("MMTable").$from_i18n("MonotoneMuseum.table.DT2",o),WDT:u(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.WDT",o),WDT2:t("MMTable").$from_i18n("MonotoneMuseum.table.WDT2",o),OT2:t("MMTable").$from_i18n("MonotoneMuseum.table.OT2",o),DTO:t("MMTable").$from_i18n("MonotoneMuseum.table.DTO",o),DTS:t("MMTable").$from_i18n("MonotoneMuseum.table.DTS",o),EDT:u(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.EDT",o),DTM:t("MMTable").$from_i18n("MonotoneMuseum.table.DTM",o),OT3:u(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.OT3",o)})},1)}(e.get_singleton_class(N),j),d(j[0],"TABLES",N.$translate_tables("ja_jp").$freeze()),N.$register_prefix("\\d+D6",I("TABLES").$keys())})}}]);