(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5309],{6250:(J,Q,I)=>{I(9993),Opal.modules["bcdice/game_system/Kamigakari"]=function($){var B,K,Y,_,t,a,m,k,S,M,j,w,N=[],e=$.nil,b=$.$$$,E=$.module,z=$.klass,c=$.const_set,G=$.send2,A=$.find_super,f=$.def,x=$.eqeqeq,o=$.truthy,g=$.to_ary,y=$.hash2,h=$.rb_plus,q=$.rb_lt,P=$.rb_gt;return B=N,K=w=[E(N[0],"BCDice")].concat(B),M=[E(w[0],"GameSystem")].concat(K),j=$.$r(M),Y=M,k=[m=z(M[0],j("Base"),"Kamigakari")].concat(Y),S=$.$r(k),m.$$prototype.randomizer=e,c(k[0],"ID","Kamigakari"),c(k[0],"NAME","\u795e\u6211\u72e9"),c(k[0],"SORT_KEY","\u304b\u307f\u304b\u304b\u308a"),c(k[0],"HELP_MESSAGE","\u30fb\u5404\u7a2e\u8868\n \u30fb\u611f\u60c5\u8868(ET)\n \u30fb\u970a\u7d0b\u6d88\u8cbb\u306e\u4ee3\u511f\u8868(RT)\n \u30fb\u4f1d\u5947\u540d\u5b57\u30fb\u540d\u524d\u6c7a\u5b9a\u8868(NT)\n \u30fb\u9b54\u5883\u81e8\u754c\u8868(KT)\n \u30fb\u7372\u5f97\u7d20\u6750\u30c1\u30e3\u30fc\u30c8(MTx x\u306f\uff3b\u6cd5\u5247\u969c\u5bb3\uff3d\u306e\uff3b\u5f37\u5ea6\uff3d\u3002\u7701\u7565\u6642\u306f\uff11)\n\u3000\u3000\u4f8b\uff09 MT\u3000MT3\u3000MT9\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),f(m,"$initialize",function _(l){var a=this;return delete _.$$p,G(a,A(a,"initialize",_,!1,!0),"initialize",[l],null),a.sort_add_dice=!0,a.d66_sort_type=b(S("D66SortType"),"NO_SORT")},1),f(m,"$eval_game_system_specific_command",function(l){var t,a,r=this,n=e,i=e,u=e,T=e,D=e;return n="",i="",r.$debug("eval_game_system_specific_command command",l),x(/^MT(\d*)$/,l.$upcase())?(u=S("Regexp").$last_match(1),u=(u=o(T=u)?T:1).$to_i(),a=r.$getGetMaterialTableResult(u),n=null==(t=g(a))[0]?e:t[0],D=null==t[2]?e:t[2],o((i=null==t[1]?e:t[1])["$empty?"]())?"":n+"("+D+") \uff1e "+i):r.$roll_tables(l,b(r.$class(),"TABLES"))},1),f(m,"$getGetMaterialTableResult",function(l){var t,a,n,i,T,r=this,s=e,u=e,v=e;return n=r.$translate("Kamigakari.MT.name"),i=r.$translate("Kamigakari.MT.items"),a=r.$get_table_by_d66(i),s=null==(t=g(a))[0]?e:t[0],u=null==t[1]?e:t[1],a=r.$getMaterialEffect(l),u=u+","+(null==(t=g(a))[1]?e:t[1]),v=r.$getPrice(T=null==t[0]?e:t[0]),s=r.$translate("Kamigakari.MT.result_format",y(["material","effect"],{material:s,effect:T})),o(v["$nil?"]())||(s=h(s,"\uff1a"+v)),[n,s,u]},1),f(m,"$getMaterialEffect",function(l){var t,a,r=this,n=e,i=e,s=e,u=e;return n=r.randomizer.$roll_once(6),i="",s="",o(q(n,6))?(a=r.$getMaterialEffectNomal(l),i=null==(t=g(a))[0]?e:t[0],u=null==t[1]?e:t[1],s=r.$translate("Kamigakari.MT.common_material.name")):(a=r.$getMaterialEffectRare(),i=null==(t=g(a))[0]?e:t[0],u=null==t[1]?e:t[1],s=r.$translate("Kamigakari.MT.rare_material.name")),[i=s+"\uff1a"+i,n=n+","+u]},1),f(m,"$getMaterialEffectNomal",function(l){var t,a,n,r=this,i=e,s=e,T=e;return n=r.$translate("Kamigakari.MT.common_material.items"),i=r.randomizer.$roll_d66(b(S("D66SortType"),"NO_SORT")),s=r.$get_table_by_number(i,n),r.$debug("getMaterialEffectNomal result",s),o(s["$=~"](/\+n/))&&(a=r.$getMaterialEffectPower(l),T=null==(t=g(a))[1]?e:t[1],s=s.$sub(/\+n/,"+"+(null==t[0]?e:t[0])),i=i+","+T),[s,i]},1),f(m,"$getMaterialEffectPower",function(l){var t,a,n,i;return n=[[4,[1,1,1,2,2,3]],[8,[1,1,2,2,3,3]],[9,[1,2,3,3,4,5]]],o(P(l,9))&&(l=9),i=this.$get_table_by_number(l,n),a=this.$get_table_by_1d6(i),[null==(t=g(a))[0]?e:t[0],null==t[1]?e:t[1]]},1),f(m,"$getMaterialEffectRare",function(){var l,t,r,a=this,n=e,i=e,u=e;return r=[[3,h("**",a.$translate("Kamigakari.MT.rare_material.give_attribute"))],[5,h("**",a.$translate("Kamigakari.MT.rare_material.halve_damage"))],[6,a.$translate("Kamigakari.MT.rare_material.optional_by_GM")]],n=a.randomizer.$roll_once(6),i=a.$get_table_by_number(n,r),a.$debug("getMaterialEffectRare result",i),o(i["$include?"]("**"))&&(t=a.$getAttribute(),u=null==(l=g(t))[1]?e:l[1],i=i.$sub("**",(null==l[0]?e:l[0]).$to_s()),n=n+","+u),[i,n]},0),f(m,"$getAttribute",function(){var t,a,l=this;return t=l.$translate("Kamigakari.MT.attribute"),a=l.randomizer.$roll_d66(b(S("D66SortType"),"NO_SORT")),[l.$get_table_by_number(a,t),a]},0),f(m,"$getPrice",function(l){var a,t=this,r=e;return a=o(r=l.$match(/\+(\d+)/))?r["$[]"](1).$to_i():o(l["$include?"](t.$translate("Kamigakari.MT.rare_material.give_attribute")))?3:o(l["$include?"](t.$translate("Kamigakari.MT.rare_material.halve_damage")))?4:0,[e,"500G("+t.$translate("Kamigakari.MT.effect_power")+":1)","1000G("+t.$translate("Kamigakari.MT.effect_power")+":2)","1500G("+t.$translate("Kamigakari.MT.effect_power")+":3)","2000G("+t.$translate("Kamigakari.MT.effect_power")+":4)","3000G("+t.$translate("Kamigakari.MT.effect_power")+":5)"]["$[]"](a)},1),t=[_=$.get_singleton_class(m)].concat(k),a=$.$r(t),_.$private(),f(_,"$translate_tables",function(n){return y(["RT","ET","KT","NT"],{RT:b(a("DiceTable"),"Table").$from_i18n("Kamigakari.table.RT",n),ET:b(a("DiceTable"),"D66Table").$from_i18n("Kamigakari.table.ET",n),KT:b(a("DiceTable"),"D66Table").$from_i18n("Kamigakari.table.KT",n),NT:b(a("DiceTable"),"D66Table").$from_i18n("Kamigakari.table.NT",n)})},1),c(k[0],"TABLES",m.$translate_tables("ja_jp")),m.$register_prefix("MT",S("TABLES").$keys())},Opal.queue(function($){var o,q,C,K,d,p,B,y,e=[],E=$.module,z=$.klass,c=$.const_set,G=$.send2,A=$.find_super,f=$.def;return $.top.$require("bcdice/game_system/Kamigakari"),o=e,q=y=[E(e[0],"BCDice")].concat(o),p=[E(y[0],"GameSystem")].concat(q),B=$.$r(p),C=p,c((d=[K=z(p[0],B("Kamigakari"),"Kamigakari_Korean")].concat(C))[0],"ID","Kamigakari:Korean"),c(d[0],"NAME","\uce74\ubbf8\uac00\uce74\ub9ac"),c(d[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\uce74\ubbf8\uac00\uce74\ub9ac"),c(d[0],"HELP_MESSAGE","\u30fb\uac01\uc885\ud45c\n \u30fb\uac10\uc815\ud45c(ET)\n \u30fb\uc601\ubb38\uc18c\ube44\uc758 \ub313\uac00\ud45c(RT)\n \u30fb\uc804\uae30 \uc131\uc528\u30fb\uc774\ub984 \uacb0\uc815\ud45c(NT)\n \u30fb\ub9c8\uacbd\uc784\uacc4\ud45c(KT)\n \u30fb\ud68d\ub4dd \uc18c\uc7ac \ucc28\ud2b8(MTx x\ub294\uff3b\ubc95\uce59\uc7a5\ud574\uff3d\uc758\uff3b\uac15\ub3c4\uff3d.\uc0dd\ub7b5\ud560 \ub54c\ub294\uff11)\n\u3000\u3000\uc608\uff09 MT\u3000MT3\u3000MT9\n\u30fbD66\uc8fc\uc0ac\uc704 \uac00\ub2a5\n"),K.$register_prefix_from_super_class(),f(K,"$initialize",function M(j){var R=this;return delete M.$$p,G(R,A(R,"initialize",M,!1,!0),"initialize",[j],null),R.locale="ko_kr"},1),c(d[0],"TABLES",K.$translate_tables("ko_kr").$freeze())})}}]);