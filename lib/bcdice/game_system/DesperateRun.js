(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[148],{8999:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var U,a,L,I,C,o,M=[],t=r.nil,m=r.$$$,e=r.module,p=r.class_variable_set,w=r.truthy,P=r.class_variable_get,s=r.def,N=r.send,W=r.to_a,E=r.rb_minus,z=r.send2,F=r.find_super,j=r.hash2,B=r.find_block_super,G=r.neqeq;return U=M,o=[C=e(M[0],"I18n")].concat(U),p(o[0],"@@fallbacks",t),a=r.get_singleton_class(C),L=[a].concat(o),I=r.$r(L),s(a,"$fallbacks",function(){var h=t;return p(L[1],"@@fallbacks",w(null!=L[1].$$cvars["@@fallbacks"]?"class variable":t)&&w(h=P(L[1],"@@fallbacks",!1))?h:m(m(I("I18n"),"Locale"),"Fallbacks").$new()),w(h=I("Thread").$current()["$[]"]("i18n_fallbacks"))?h:P(L[1],"@@fallbacks",!1)},0),s(a,"$fallbacks=",function(v){var h;return p(L[1],"@@fallbacks",w(v["$is_a?"](I("Array")))?m(m(I("I18n"),"Locale"),"Fallbacks").$new(v):v),h=["i18n_fallbacks",P(L[1],"@@fallbacks",!1)],N(I("Thread").$current(),"[]=",W(h)),h[E(h.length,1)]},1),function(a,T){var v,h,y,c,I=[e(a,"Backend")].concat(T);return v=I,y=[h=e(I[0],"Fallbacks")].concat(v),c=r.$r(y),s(h,"$translate",function f(_,i,u){try{var n=f.$$p||t,$=this,d=t,A=t;return delete f.$$p,null==u&&(u=c("EMPTY_HASH")),w(u.$fetch("fallback",!0))?w(u["$[]"]("fallback_in_progress"))?z($,F($,"translate",f,!1,!0),"translate",[_,i,u],n):(w(u["$[]"]("default"))&&(d=$["$extract_non_symbol_default!"](u)),A=u.$merge(j(["fallback_in_progress"],{fallback_in_progress:!0})),N(c("I18n").$fallbacks()["$[]"](_),"each",[],function g(S){var D=null==g.$$s?this:g.$$s;null==S&&(S=t);try{return N(D,"catch",["exception"],function H(){var l=null==H.$$s?this:H.$$s,V=t;if(V=z(l,B(l,"translate",H.$$def||g.$$def||f,!1,!1),"translate",[S,i,A],null),w(V["$nil?"]()))return t;G(_.$to_s(),S.$to_s())&&l.$on_fallback(_,S,i,u),r.ret(V)},{$$arity:0,$$s:D})}catch(H){if(!r.rescue(H,[m(c("I18n"),"InvalidLocale")]))throw H;try{return t}finally{r.pop_exception()}}},{$$arity:1,$$s:$}),w(u["$key?"]("default"))&&w(u["$[]"]("default")["$nil?"]())?t:w(d)?z($,F($,"translate",f,!1,!0),"translate",[_,t,u.$merge(j(["default"],{default:d}))],null):$.$throw("exception",m(c("I18n"),"MissingTranslation").$new(_,i,u))):z($,F($,"translate",f,!1,!0),"translate",[_,i,u],n)}catch(g){if(g===r.returner)return g.$v;throw g}},-3),s(h,"$extract_non_symbol_default!",function(_){var u,i=t,n=t;return i=[_["$[]"]("default")].$flatten(),u=N(i,"detect",[],function(d){return null==d&&(d=t),d["$is_a?"](c("Symbol"))["$!"]()},1),w(u)&&(n=["default",i["$[]"](0,i.$index(u))],N(_,"[]=",W(n)),E(n.length,1)),u},1),s(h,"$exists?",function f(_,i,u){try{var n=f.$$p||t,$=this;return delete f.$$p,null==u&&(u=c("EMPTY_HASH")),w(u.$fetch("fallback",!0))?(N(c("I18n").$fallbacks()["$[]"](_),"each",[],function d(A){var g=null==d.$$s?this:d.$$s;null==A&&(A=t);try{if(!w(z(g,B(g,"exists?",d.$$def||f,!1,!1),"exists?",[A,i],null)))return t;r.ret(!0)}catch(S){if(!r.rescue(S,[m(c("I18n"),"InvalidLocale")]))throw S;try{return t}finally{r.pop_exception()}}},{$$arity:1,$$s:$}),!1):z($,F($,"exists?",f,!1,!0),"exists?",[_,i,u],n)}catch(d){if(d===r.returner)return d.$v;throw d}},-3),h.$private(),s(h,"$on_fallback",function(_,i,u,n){return t},4)}(o[0],o)},Opal.modules["bcdice/randomizer"]=function(r){var C,b,v,h,y,c,a,T,M=[],t=r.nil,m=r.$$$,p=r.klass,w=r.const_set,P=r.def,s=r.truthy,N=r.rb_gt,W=r.rb_plus,E=r.rb_le,z=r.send,F=r.rb_minus,j=r.eqeq,B=r.rb_times,G=r.eqeqeq,K=r.rb_ge;return C=M,a=[(0,r.module)(M[0],"BCDice")].concat(C),T=r.$r(a),b=a,h=[v=p(a[0],null,"Randomizer")].concat(b),y=r.$r(h),(c=v.$$prototype).rand_results=c.detailed_rand_results=t,w(h[0],"UPPER_LIMIT_DICE_TIMES",200),w(h[0],"UPPER_LIMIT_DICE_SIDES",1e3),w(h[0],"UPPER_LIMIT_RANDS",1e4),P(v,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),v.$attr_reader("rand_results"),v.$attr_reader("detailed_rand_results"),w(h[0],"DetailedRandResult",y("Struct").$new("kind","sides","value")),P(v,"$roll_barabara",function(_,i){var u=this;return s(N(W(u.rand_results.$size(),_),y("UPPER_LIMIT_RANDS")))&&u.$raise(y("TooManyRandsError")),s(E(_,0))||s(N(_,y("UPPER_LIMIT_DICE_TIMES")))?[]:z(y("Array"),"new",[_],function n(){return(null==n.$$s?this:n.$$s).$roll_once(i)},{$$arity:0,$$s:u})},2),P(v,"$roll_sum",function(_,i){return this.$roll_barabara(_,i).$sum()},2),P(v,"$roll_once",function(_){var u=t;return s(E(_,0))||s(N(_,y("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(_),this.$push_to_detail("normal",_,u),u)},1),P(v,"$roll_index",function(_){return F(this.$roll_once(_),1)},1),P(v,"$roll_tens_d10",function(){var u,i=t;return i=this.$rand_inner(10),j(i,10)&&(i=0),u=B(i,10),this.$push_to_detail("tens_d10",10,u),u},0),P(v,"$roll_d9",function(){var i;return i=F(this.$rand_inner(10),1),this.$push_to_detail("d9",10,i),i},0),P(v,"$roll_d66",function(_){var n,u=t;return u=z(y("Array"),"new",[2],function $(){return(null==$.$$s?this:$.$$s).$roll_once(6)},{$$arity:0,$$s:this}),G(m(y("D66SortType"),"ASC"),n=_)?u["$sort!"]():G(m(y("D66SortType"),"DESC"),n)&&u["$sort!"]()["$reverse!"](),W(B(u["$[]"](0),10),u["$[]"](1))},1),v.$private(),P(v,"$rand_inner",function(_){var u,i=this;return s(K(i.rand_results.$size(),y("UPPER_LIMIT_RANDS")))&&i.$raise(y("TooManyRandsError")),u=i.$random(_),i.rand_results["$<<"]([u,_]),u},1),P(v,"$random",function(_){return W(y("Kernel").$rand(_),1)},1),P(v,"$push_to_detail",function(_,i,u){var $;return $=y("DetailedRandResult").$new(_,i,u),this.detailed_rand_results.$push($)},3),p(a[0],T("StandardError"),"TooManyRandsError"),t},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var s,z,K,U,C,o,a,j,W,M=[],t=r.nil,m=r.module,e=r.klass,p=r.def,w=r.truthy;return s=M,z=W=[m(M[0],"BCDice")].concat(s),K=j=[m(W[0],"DiceTable")].concat(z),C=[U=e(j[0],null,"RollResult")].concat(K),o=r.$r(C),(a=U.$$prototype).table_name=a.value=a.body=t,p(U,"$initialize",function(L,I,b){var v=this;return v.table_name=L,v.value=I,v.body=b},3),U.$attr_reader("table_name"),U.$attr_reader("value"),U.$attr_reader("body"),p(U,"$to_s",function(){var L=this;return L.table_name+"("+L.value+") \uff1e "+L.body},0),p(U,"$last_body",function(){var L=this;return w(L.body["$is_a?"](o("RollResult")))?L.body.$last_body():L.body},0),p(U,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var N,F,U,C,o,a,T,B,E,M=[],t=r.nil,m=r.module,e=r.klass,p=r.truthy,w=r.def,P=r.rb_minus;return N=M,F=E=[m(M[0],"BCDice")].concat(N),U=B=[m(E[0],"DiceTable")].concat(F),o=[C=e(B[0],null,"ChainTable")].concat(U),a=r.$r(o),(T=C.$$prototype).times=T.sides=T.items=T.name=t,w(C,"$initialize",function(I,b,v){var h=this,y=t;return h.name=I,h.items=v.$freeze(),y=/(\d+)D(\d+)/i.$match(b),p(y)||h.$raise(a("ArgumentError"),"Unexpected table type: "+b),h.times=y["$[]"](1).$to_i(),h.sides=y["$[]"](2).$to_i()},3),w(C,"$roll",function(I){var v,h,b=this,y=t;return v=I.$roll_sum(b.times,b.sides),h=P(v,b.times),y=b.items["$[]"](h),p(y["$respond_to?"]("roll"))&&(y=y.$roll(I)),a("RollResult").$new(b.name,v,y)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var z,G,a,T,L,I,b,U,j,M=[],t=r.nil,m=r.module,e=r.klass,p=r.hash2,w=r.defs,P=r.def,s=r.rb_plus,N=r.rb_times,W=r.rb_minus;return z=M,G=j=[m(M[0],"BCDice")].concat(z),a=U=[m(j[0],"DiceTable")].concat(G),L=[T=e(U[0],null,"D66GridTable")].concat(a),I=r.$r(L),(b=T.$$prototype).name=b.items=t,w(T,"$from_i18n",function(h,y){var f=t;return f=I("I18n").$t(h,p(["locale","raise"],{locale:y,raise:!0})),this.$new(f["$[]"]("name"),f["$[]"]("items"))},2),P(T,"$initialize",function(h,y){return this.name=h,this.items=y.$freeze()},2),P(T,"$roll",function(h){var c,f,_,i,u;return c=h.$roll_once(6),f=h.$roll_once(6),_=s(N(c,10),f),i=W(c,1),u=W(f,1),I("RollResult").$new(this.name,_,this.items["$[]"](i)["$[]"](u))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var W,j,o,a,T,L,G,K,z,t=[],m=r.nil,e=r.module,p=r.klass,w=r.hash2,P=r.defs,s=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),W=t,j=z=[e(t[0],"BCDice")].concat(W),G=[e(z[0],"DiceTable")].concat(j),K=r.$r(G),o=G,T=[a=p(G[0],K("D66GridTable"),"D66HalfGridTable")].concat(o),L=r.$r(T),P(a,"$from_i18n",function(b,v){var y=m;return y=L("I18n").$t(b,w(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2_3"),y["$[]"]("items_4_5_6"))},2),s(a,"$initialize",function(b,v,h){return this.name=b,this.items=[v,v,v,h,h,h].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var W,j,o,a,T,L,G,K,z,t=[],m=r.nil,e=r.module,p=r.klass,w=r.hash2,P=r.defs,s=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),W=t,j=z=[e(t[0],"BCDice")].concat(W),G=[e(z[0],"DiceTable")].concat(j),K=r.$r(G),o=G,T=[a=p(G[0],K("D66GridTable"),"D66OneThirdTable")].concat(o),L=r.$r(T),P(a,"$from_i18n",function(b,v){var y=m;return y=L("I18n").$t(b,w(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2"),y["$[]"]("items_3_4"),y["$[]"]("items_5_6"))},2),s(a,"$initialize",function(b,v,h,y){return this.name=b,this.items=[v,v,h,h,y,y].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var j,U,L,I,b,v,h,o,G,M=[],t=r.nil,m=r.$$$,e=r.module,p=r.klass,w=r.hash2,P=r.defs,s=r.def,N=r.eqeqeq,W=r.rb_plus,E=r.rb_times,z=r.truthy;return j=M,U=G=[e(M[0],"BCDice")].concat(j),L=o=[e(G[0],"DiceTable")].concat(U),b=[I=p(o[0],null,"D66Table")].concat(L),v=r.$r(b),(h=I.$$prototype).sort_type=h.items=h.name=t,P(I,"$from_i18n",function(c,f){var u,i=t;return i=v("I18n").$t(c,w(["locale"],{locale:f})),u=v("D66SortType").$const_get(i["$[]"]("d66_sort_type")),this.$new(i["$[]"]("name"),u,i["$[]"]("items"))},2),s(I,"$initialize",function(c,f,_){var i=this;return i.name=c,i.sort_type=f,i.items=_.$freeze()},3),s(I,"$roll",function(c){var f=this,_=t,i=t,u=t,n=t;return _=c.$roll_barabara(2,6),N(m(v("D66SortType"),"ASC"),i=f.sort_type)?_["$sort!"]():N(m(v("D66SortType"),"DESC"),i)&&_["$sort!"]()["$reverse!"](),u=W(E(_["$[]"](0),10),_["$[]"](1)),n=z(i=f.items["$[]"](u))?i:f.items["$[]"](u.$to_s()),z(n["$respond_to?"]("roll"))&&(n=n.$roll(c)),v("RollResult").$new(f.name,u,n)},1),s(I,"$choice",function(c){return v("RollResult").$new(this.name,c,this.items["$[]"](c))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var K,a,L,I,C,t=[],m=r.nil,e=r.module,p=r.klass,w=r.hash2,P=r.send,s=r.to_ary,N=r.rb_plus,W=r.rb_times,E=r.to_a,z=r.rb_minus,F=r.send2,j=r.find_super,B=r.def;return r.top.$require("bcdice/dice_table/d66_table"),K=t,a=C=[e(t[0],"BCDice")].concat(K),L=[e(C[0],"DiceTable")].concat(a),I=r.$r(L),B(p(L[0],I("D66Table"),"D66LeftRangeTable"),"$initialize",function y(c,f,_){var n;return delete y.$$p,n=w([],{}),P(_,"each",[],function(d){var A,D;return null==d&&(d=m),A=s(d),D=null==A[1]?m:A[1],P(null==A[0]?m:A[0],"each",[],function(l){return null==l&&(l=m),P(D,"each_with_index",[],function(k,J){var ie,te;return null==k&&(k=m),null==J&&(J=m),ie=N(W(l,10),N(J,1)),P(n,"[]=",E(te=[ie,k])),te[z(te.length,1)]},2)},1)},1),F(this,j(this,"initialize",y,!1,!0),"initialize",[c,f,n],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var E,B,o,a,T,L,I,K,F,M=[],t=r.nil,m=r.module,e=r.klass,p=r.def,w=r.truthy,P=r.rb_minus,s=r.rb_plus,N=r.rb_times;return E=M,B=F=[m(M[0],"BCDice")].concat(E),o=K=[m(F[0],"DiceTable")].concat(B),T=[a=e(K[0],null,"D66ParityTable")].concat(o),L=r.$r(T),(I=a.$$prototype).odd=I.even=I.name=t,p(a,"$initialize",function(v,h,y){var c=this;return c.name=v,c.odd=h.$freeze(),c.even=y.$freeze()},3),p(a,"$roll",function(v){var c,_,i,h=this,y=t;return y=v.$roll_once(6),c=v.$roll_once(6),_=(w(y["$odd?"]())?h.odd:h.even)["$[]"](P(c,1)),i=s(N(y,10),c),L("RollResult").$new(h.name,i,_)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var W,j,C,o,a,T,L,G,z,M=[],t=r.nil,m=r.module,e=r.klass,p=r.def,w=r.rb_plus,P=r.rb_times,s=r.send;return W=M,j=z=[m(M[0],"BCDice")].concat(W),C=G=[m(z[0],"DiceTable")].concat(j),a=[o=e(G[0],null,"D66RangeTable")].concat(C),T=r.$r(a),(L=o.$$prototype).items=L.name=t,p(o,"$initialize",function(b,v){return this.name=b,this.items=v.$freeze()},2),p(o,"$roll",function(b){var h,y,c,f=t;return h=b.$roll_once(6),y=b.$roll_once(6),c=w(P(h,10),y),f=s(this.items,"find",[],function(i){return null==i&&(i=t),i["$[]"](0)["$include?"](c)},1),T("RollResult").$new(this.name,c,f["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var B,C,I,b,v,h,y,a,K,M=[],t=r.nil,m=r.module,e=r.klass,p=r.const_set,w=r.send,P=r.truthy,s=r.def,N=r.to_a,W=r.rb_minus,E=r.eqeqeq,z=r.rb_times,F=r.rb_plus;return B=M,C=K=[m(M[0],"BCDice")].concat(B),I=a=[m(K[0],"DiceTable")].concat(C),v=[b=e(a[0],null,"RangeTable")].concat(I),h=r.$r(v),(y=b.$$prototype).name=y.items=y.num_of_dice=y.num_of_sides=y.formatter=t,p(v[0],"RollResult",w(h("Struct"),"new",["sum","values","content","formatted"],function c(){return(null==c.$$s?this:c.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:b})),p(v[0],"Item",h("Struct").$new("range","content")),p(v[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),p(v[0],"DEFAULT_FORMATTER",w(b,"lambda",[],function(f,_){return null==f&&(f=t),null==_&&(_=t),f.$name()+"("+_.$sum()+") \uff1e "+_.$content()},2)),b.$attr_reader("name"),b.$attr_reader("num_of_dice"),b.$attr_reader("num_of_sides"),s(b,"$initialize",function c(f,_,i){var $,u=c.$$p||t,n=this,d=t;return delete c.$$p,n.name=f.$freeze(),n.formatter=P($=u)?$:h("DEFAULT_FORMATTER"),d=h("DICE_ROLL_METHOD_RE").$match(_),P(d)||n.$raise(h("ArgumentError"),n.name+": invalid dice roll method: "+_),n.num_of_dice=d["$[]"](1).$to_i(),n.num_of_sides=d["$[]"](2).$to_i(),n.$store(i)},3),s(b,"$fetch",function(f){var i,_=this;return i=w(_.items,"find",[],function(n){return null==n&&(n=t),n.$range()["$include?"](f)},1),P(i)||_.$raise(h("RangeError"),_.name+": value is out of range: "+f),i},1),s(b,"$roll",function(f){var u,n,$,_=this,i=t;return u=(i=f.$roll_barabara(_.num_of_dice,_.num_of_sides)).$sum(),n=h("RollResult").$new(u,i,_.$fetch(u).$content()),$=[_.formatter["$[]"](_,n)],w(n,"formatted=",N($)),W($.length,1),n},1),b.$private(),s(b,"$store",function(f){var i,u,_=this;return i=w(f,"map",[],function n($,d){return null==$&&($=t),null==d&&(d=t),[(null==n.$$s?this:n.$$s).$coerce_to_int_range($),d]},{$$arity:2,$$s:_}),u=w(i,"sort_by",[],function($,d){return null==$&&($=t),null==d&&(d=t),$.$min()},2),_.$assert_min_sum_is_covered(u),_.$assert_max_sum_is_covered(u),_.$assert_no_gap_or_overlap_in_ranges(u),_.items=w(u,"map",[],function($,d){return null==$&&($=t),null==d&&(d=t),h("Item").$new($,d.$freeze()).$freeze()},2).$freeze(),_},1),s(b,"$coerce_to_int_range",function(f){var i;return E(h("Integer"),i=f)?h("Range").$new(f,f):E(h("Range"),i)&&P(f.$begin()["$is_a?"](h("Integer")))&&P(f.$end()["$is_a?"](h("Integer")))?f:this.$raise(h("TypeError"),this.name+": "+f+" ("+f.$class()+") must be an Integer or a Range with Integers ")},1),s(b,"$assert_min_sum_is_covered",function(f){var i,_=this,u=t;return i=_.num_of_dice,u=f.$first()["$[]"](0),P(u["$include?"](i))||_.$raise(h("RangeError"),_.name+": min value ("+i+") is not covered: "+u),_},1),s(b,"$assert_max_sum_is_covered",function(f){var i,_=this,u=t;return i=z(_.num_of_dice,_.num_of_sides),u=f.$last()["$[]"](0),P(u["$include?"](i))||_.$raise(h("RangeError"),_.name+": max value ("+i+") is not covered: "+u),_},1),s(b,"$assert_no_gap_or_overlap_in_ranges",function(f){return w(f,"each_cons",[2],function i(u,n){var g,S,$=null==i.$$s?this:i.$$s,d=t,A=t;return null==$.name&&($.name=t),null==u&&(u=t),null==n&&(n=t),d=u["$[]"](0),A=n["$[]"](0),g=d.$max(),S=F(g,1),P(A["$include?"](g))&&$.$raise(h("RangeError"),$.name+": Range overlap: "+d+" and "+A),P(A["$include?"](S))?t:$.$raise(h("RangeError"),$.name+": Range gap: "+d+" and "+A)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var W,j,C,I,b,v,h,a,G,z,M=[],t=r.nil,m=r.$$$,e=r.module,p=r.klass,w=r.send,P=r.def,s=r.rb_minus;return W=M,j=z=[e(M[0],"BCDice")].concat(W),C=G=[e(z[0],"DiceTable")].concat(j),I=a=[p(G[0],null,"SaiFicSkillTable")].concat(C),v=[b=p(a[0],null,"Category")].concat(I),h=r.$r(v),b.$$prototype.name=t,P(b,"$initialize",function(f,_,i,u){var n=this;return n.name=f,n.skills=w(_.$map(),"with_index",[2],function(d,A){return null==d&&(d=t),null==A&&(A=t),m(h("SaiFicSkillTable"),"Skill").$new(f,d,i,A,u)},2),n.dice=i},4),P(b,"$roll",function(f){return this.$skills()["$[]"](s(f.$roll_sum(2,6),2))},1),P(b,"$to_s",function(){return this.name},0),b.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var s,z,K,T,L,C,j,W,M=[],t=r.nil,m=r.module,e=r.klass,p=r.def,w=r.hash2;return s=M,z=W=[m(M[0],"BCDice")].concat(s),K=j=[m(W[0],"DiceTable")].concat(z),C=[e(j[0],null,"SaiFicSkillTable")].concat(K),(L=(T=e(C[0],null,"Skill")).$$prototype).s_format=L.category_dice=L.row_dice=L.category_name=L.name=t,p(T,"$initialize",function(b,v,h,y,c){var f=this;return f.category_name=b,f.name=v,f.category_dice=h,f.row_dice=y,f.s_format=c},5),p(T,"$to_s",function(){var b=this;return b.$format(b.s_format,w(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))},0),T.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var U,T,h,y,c,f,_,I,o,M=r.top,t=[],m=r.nil,e=r.$$$,p=r.module,w=r.klass,P=r.hash2,s=r.send,W=r.defs,E=r.const_set,z=r.to_ary,F=r.def,j=r.truthy,B=r.rb_minus,G=r.rb_plus;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),U=t,T=o=[p(t[0],"BCDice")].concat(U),h=I=[p(o[0],"DiceTable")].concat(T),c=[y=w(I[0],null,"SaiFicSkillTable")].concat(h),f=r.$r(c),(_=y.$$prototype).rtt=_.rtt_format=_.rct=_.rct_format=_.rttn=_.rttn_format=_.categories=m,W(y,"$from_i18n",function(u,n,$){var d,A,g,l,H=m;if(null==$)$=P([],{});else if(!$.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(d=$.$$smap.rtt)&&(d=m),null==(A=$.$$smap.rct)&&(A=m),null==(g=$.$$smap.rttn)&&(g=m),l=(H=f("I18n").$t("RTT",P(["locale","raise","default"],{locale:n,raise:!1,default:P([],{})})).$merge(f("I18n").$t(u,P(["locale","raise"],{locale:n,raise:!0}))))["$[]"]("items"),H=s(H,"select",[],function(k,J){return null==k&&(k=m),null==J&&(J=m),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](k)},2),this.$new(l,r.to_hash(H).$merge(P(["rtt","rct","rttn"],{rtt:d,rct:A,rttn:g})))},-3),E(c[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),E(c[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),E(c[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),E(c[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),F(y,"$initialize",function(u,n){var $,d,A,g,S,D,H,l=this;if(null==n)n=P([],{});else if(!n.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==($=n.$$smap.rtt)&&($=m),null==(d=n.$$smap.rct)&&(d=m),null==(A=n.$$smap.rttn)&&(A=m),null==(g=n.$$smap.rtt_format)&&(g=f("DEFAULT_RTT")),null==(S=n.$$smap.rct_format)&&(S=f("DEFAULT_RCT")),null==(D=n.$$smap.rttn_format)&&(D=f("DEFAULT_RTTN")),null==(H=n.$$smap.s_format)&&(H=f("DEFAULT_S")),l.categories=s(u.$map(),"with_index",[1],function(k,J){var ie,ce,ne;return null==k&&(k=m),null==J&&(J=m),ce=null==(ie=z(k))[0]?m:ie[0],ne=null==ie[1]?m:ie[1],e(f("SaiFicSkillTable"),"Category").$new(ce,ne,J,H)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),l.rtt=$,l.rct=d,l.rttn=A.$to_a(),l.rtt_format=g,l.rct_format=S,l.rttn_format=D},-2),E(c[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),y.$attr_reader("categories"),F(y,"$roll_command",function(u,n){var d,$=this,A=m,g=m;return j(["RTT",$.rtt]["$include?"](d=n))?$.$format_skill($.rtt_format,$.$roll_skill(u)):j(["RCT",$.rct]["$include?"](d))?(A=$.$roll_category(u),$.$format($.rct_format,P(["category_dice","category_name"],{category_dice:A.$dice(),category_name:A.$name()}))):j(g=f("RTTN").$index(d))||j(g=$.rttn.$index(d))?$.$format_skill($.rttn_format,$.categories["$[]"](g).$roll(u)):m},2),F(y,"$roll_category",function(u){return this.categories["$[]"](B(u.$roll_once(6),1))},1),F(y,"$roll_skill",function(u){return this.$roll_category(u).$roll(u)},1),F(y,"$prefixes",function(){var u=this;return G(["RTT[1-6]?","RCT",u.rtt,u.rct],u.rttn).$compact()},0),y.$private(),F(y,"$format_skill",function(u,n){return this.$format(u,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:n.$category_dice(),row_dice:n.$row_dice(),category_name:n.$category_name(),skill_name:n.$name(),text:n.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var E,B,o,a,T,L,I,K,F,M=[],t=r.nil,m=r.module,e=r.klass,p=r.hash2,w=r.defs,P=r.truthy,s=r.def,N=r.rb_minus;return E=M,B=F=[m(M[0],"BCDice")].concat(E),o=K=[m(F[0],"DiceTable")].concat(B),T=[a=e(K[0],null,"Table")].concat(o),L=r.$r(T),(I=a.$$prototype).times=I.sides=I.name=I.items=t,w(a,"$from_i18n",function(v,h){var c=t;return c=L("I18n").$t(v,p(["locale"],{locale:h})),this.$new(c["$[]"]("name"),c["$[]"]("type"),c["$[]"]("items"))},2),s(a,"$initialize",function(v,h,y){var c=this,f=t;return c.name=v,c.items=y.$freeze(),f=/(\d+)D(\d+)/i.$match(h),P(f)||c.$raise(L("ArgumentError"),"Unexpected table type: "+h),c.times=f["$[]"](1).$to_i(),c.sides=f["$[]"](2).$to_i()},3),s(a,"$roll",function(v){var y,h=this;return y=v.$roll_sum(h.times,h.sides),h.$choice(y)},1),s(a,"$choice",function(v){var y,h=this;return y=N(v,h.times),L("RollResult").$new(h.name,v,h.items["$[]"](y))},1)},Opal.modules["bcdice/dice_table"]=function(r){var M=r.top;return M.$require("bcdice/dice_table/roll_result"),M.$require("bcdice/dice_table/chain_table"),M.$require("bcdice/dice_table/d66_grid_table"),M.$require("bcdice/dice_table/d66_half_grid_table"),M.$require("bcdice/dice_table/d66_one_third_table"),M.$require("bcdice/dice_table/d66_left_range_table"),M.$require("bcdice/dice_table/d66_parity_table"),M.$require("bcdice/dice_table/d66_range_table"),M.$require("bcdice/dice_table/d66_table"),M.$require("bcdice/dice_table/range_table"),M.$require("bcdice/dice_table/sai_fic_skill_table"),M.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var w,W,z,s,M=[],m=r.module,e=r.const_set;return w=M,W=s=[m(M[0],"BCDice")].concat(w),z=[m(s[0],"D66SortType")].concat(W),e(z[0],"NO_SORT","no_sort"),e(z[0],"ASC","asc"),e(z[0],"DESC","desc"),function(N,W){var z=[m(N,"RoundType")].concat(W);return e(z[0],"CEIL","ceil"),e(z[0],"FLOOR","floor"),e(z[0],"ROUND","round")}(s[0],s)},Opal.modules["bcdice/translate"]=function(r){var s,z,F,j,B,W,M=[],t=r.nil,m=r.module,e=r.hash2,w=r.def;return s=M,z=W=[m(M[0],"BCDice")].concat(s),j=[F=m(W[0],"Translate")].concat(z),B=r.$r(j),w(F,"$translate",function(K,U){var C,o=this;if(null==o.locale&&(o.locale=t),null==U)U=e([],{});else if(!U.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return C=r.kwrestargs(U,{}),B("I18n").$translate(K,e(["locale","raise"],{locale:o.locale,raise:!0}).$merge(r.to_hash(C)))},-2)},Opal.modules["bcdice/result"]=function(r){var W,B,C,G,U,z,M=[],t=r.nil,e=r.klass,p=r.send,w=r.to_a,P=r.rb_minus,s=r.def;return W=M,B=z=[(0,r.module)(M[0],"BCDice")].concat(W),[G=e(z[0],null,"Result")].concat(B),(U=G.$$prototype).secret=U.success=U.failure=U.critical=U.fumble=t,s(C=r.get_singleton_class(G),"$success",function(T){return p(this.$new(),"tap",[],function(b){var v=t;return null==b&&(b=t),p(b,"text=",w(v=[T])),P(v.length,1),p(b,"success=",w(v=[!0])),v[P(v.length,1)]},1)},1),s(C,"$failure",function(T){return p(this.$new(),"tap",[],function(b){var v=t;return null==b&&(b=t),p(b,"text=",w(v=[T])),P(v.length,1),p(b,"failure=",w(v=[!0])),v[P(v.length,1)]},1)},1),s(C,"$critical",function(T){return p(this.$new(),"tap",[],function(b){var v=t;return null==b&&(b=t),p(b,"text=",w(v=[T])),P(v.length,1),p(b,"critical=",w(v=[!0])),P(v.length,1),p(b,"success=",w(v=[!0])),v[P(v.length,1)]},1)},1),s(C,"$fumble",function(T){return p(this.$new(),"tap",[],function(b){var v=t;return null==b&&(b=t),p(b,"text=",w(v=[T])),P(v.length,1),p(b,"fumble=",w(v=[!0])),P(v.length,1),p(b,"failure=",w(v=[!0])),v[P(v.length,1)]},1)},1),s(C,"$nothing",function(){return"nothing"},0),s(G,"$initialize",function(o){var a=this;return null==o&&(o=t),a.text=o,a.rands=t,a.detailed_rands=t,a.secret=!1,a.success=!1,a.failure=!1,a.critical=!1,a.fumble=!1},-1),G.$attr_accessor("text","rands","detailed_rands"),G.$attr_writer("secret","success","failure","critical","fumble"),s(G,"$secret?",function(){return this.secret},0),s(G,"$success?",function(){return this.success},0),s(G,"$failure?",function(){return this.failure},0),s(G,"$critical?",function(){return this.critical},0),s(G,"$fumble?",function(){return this.fumble},0),s(G,"$condition=",function(o){return this.success=o,this.failure=o["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var h,c,f,t=[],m=r.$r(t),e=r.nil,p=r.$$$,w=r.module,P=r.klass,s=r.truthy,N=r.const_set,W=r.defs,E=r.gvars,z=r.rb_lt,F=r.send,j=r.to_a,B=r.rb_minus,G=r.def,K=r.to_ary,U=r.neqeq,C=r.rb_plus,o=r.eqeq,a=r.rb_ge,T=r.rb_gt,L=r.eqeqeq,I=r.rb_le,b=r.rb_times;return h=t,c=[w(t[0],"Racc")].concat(h),f=r.$r(c),P(c[0],f("StandardError"),"ParseError"),s(p("::","ParseError","skip_raise")?"constant":e)||N(t[0],"ParseError",p(m("Racc"),"ParseError")),function(v,h){var n,$,d,A,g,f=[w(v,"Racc")].concat(h),_=r.$r(f);return s(_("Racc_No_Extensions","skip_raise")?"constant":e)||N(f[0],"Racc_No_Extensions",!1),n=f,d=[$=P(f[0],null,"Parser")].concat(n),A=r.$r(d),(g=$.$$prototype).yydebug=g.racc_debug_out=g.racc_error_status=g.racc_t=g.racc_vstack=g.racc_val=g.racc_state=g.racc_tstack=e,N(d[0],"Racc_Runtime_Version","1.4.6"),N(d[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),N(d[0],"Racc_Runtime_Core_Version_R","1.4.6"),N(d[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),N(d[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),N(d[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),N(d[0],"Racc_Runtime_Core_Version",A("Racc_Runtime_Core_Version_R")),N(d[0],"Racc_Runtime_Core_Revision",A("Racc_Runtime_Core_Revision_R")),N(d[0],"Racc_Runtime_Type","ruby"),W(A("Parser"),"$racc_runtime_type",function(){return A("Racc_Runtime_Type")},0),G($,"$_racc_setup",function(){var D,H,l=this,V=e,k=e,J=e;return null==E.stderr&&(E.stderr=e),s(p(l.$class(),"Racc_debug_parser"))||(l.yydebug=!1),s(null!=(D=l.yydebug)&&D!==e?"instance-variable":e)||(l.yydebug=!1),s(l.yydebug)&&(s(null!=(H=l.racc_debug_out)&&H!==e?"instance-variable":e)||(l.racc_debug_out=E.stderr),l.racc_debug_out=s(V=l.racc_debug_out)?V:E.stderr),k=p(l.$class(),"Racc_arg"),s(z(k.$size(),14))&&(F(k,"[]=",j(J=[13,!0])),B(J.length,1)),k},0),G($,"$_racc_init_sysvars",function(){var D=this;return D.racc_state=[0],D.racc_tstack=[],D.racc_vstack=[],D.racc_t=e,D.racc_val=e,D.racc_read_next=!0,D.racc_user_yyerror=!1,D.racc_error_status=0},0),G($,"$do_parse",function(){return this.$__send__(A("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),G($,"$next_token",function(){return this.$raise(A("NotImplementedError"),this.$class()+"#next_token is not defined")},0),G($,"$_racc_do_parse_rb",function(D,H){var l,k=this,J=e,ie=e,te=e,ce=e,Q=e,R=e,Z=e,x=e;return l=K(D),J=null==l[0]?e:l[0],ie=null==l[1]?e:l[1],te=null==l[2]?e:l[2],ce=null==l[3]?e:l[3],Q=null==l[10]?e:l[10],k.$_racc_init_sysvars(),R=Z=x=e,F(k,"catch",["racc_end_parse"],function q(){var re,X,Y=null==q.$$s?this:q.$$s,ae=e;for(null==Y.racc_state&&(Y.racc_state=e),null==Y.racc_read_next&&(Y.racc_read_next=e),null==Y.racc_t&&(Y.racc_t=e),null==Y.yydebug&&(Y.yydebug=e),null==Y.racc_val&&(Y.racc_val=e);s(!0);)for(s(x=ce["$[]"](Y.racc_state["$[]"](-1)))?(s(Y.racc_read_next)&&U(Y.racc_t,0)&&(X=Y.$next_token(),re=K(X),R=null==re[0]?e:re[0],Y.racc_val=null==re[1]?e:re[1],Y.racc_t=s(R)?s(ae=Q["$[]"](R))?ae:1:0,s(Y.yydebug)&&Y.$racc_read_token(Y.racc_t,R,Y.racc_val),Y.racc_read_next=!1),x=C(x,Y.racc_t),s(a(x,0))&&s(Z=J["$[]"](x))&&o(ie["$[]"](x),Y.racc_state["$[]"](-1))||(Z=te["$[]"](Y.racc_state["$[]"](-1)))):Z=te["$[]"](Y.racc_state["$[]"](-1));s(Z=Y.$_racc_evalact(Z,D)););},{$$arity:0,$$s:k})},2),G($,"$yyparse",function(D,H){return this.$__send__(A("Racc_YY_Parse_Method"),D,H,this.$_racc_setup(),!0)},2),G($,"$_racc_yyparse_rb",function(D,H,l,V){var k,te=e,ce=e,ne=e,Q=e,Z=e,x=e,q=e;return k=K(l),te=null==k[0]?e:k[0],ce=null==k[1]?e:k[1],ne=null==k[2]?e:k[2],Q=null==k[3]?e:k[3],Z=null==k[10]?e:k[10],this.$_racc_init_sysvars(),x=e,q=e,F(this,"catch",["racc_end_parse"],function ee(){var Y=null==ee.$$s?this:ee.$$s;for(null==Y.racc_state&&(Y.racc_state=e);!s(q=Q["$[]"](Y.racc_state["$[]"](-1)));)for(;s(x=Y.$_racc_evalact(ne["$[]"](Y.racc_state["$[]"](-1)),l)););return F(D,"__send__",[H],function ae(se,_e){var $e=null==ae.$$s?this:ae.$$s,O=e,oe=e;for(null==$e.racc_t&&($e.racc_t=e),null==$e.racc_state&&($e.racc_state=e),null==$e.racc_read_next&&($e.racc_read_next=e),null==se&&(se=e),null==_e&&(_e=e),$e.racc_t=s(se)?s(O=Z["$[]"](se))?O:1:0,$e.racc_val=_e,$e.racc_read_next=!1,q=C(q,$e.racc_t),s(a(q,0))&&s(x=te["$[]"](q))&&o(ce["$[]"](q),$e.racc_state["$[]"](-1))||(x=ne["$[]"]($e.racc_state["$[]"](-1)));s(x=$e.$_racc_evalact(x,l)););for(;s(s(O=s(oe=(q=Q["$[]"]($e.racc_state["$[]"](-1)))["$!"]())?oe:$e.racc_read_next["$!"]())?O:$e.racc_t["$=="](0));)for(s(q)&&s(q=C(q,$e.racc_t))&&s(a(q,0))&&s(x=te["$[]"](q))&&o(ce["$[]"](q),$e.racc_state["$[]"](-1))||(x=ne["$[]"]($e.racc_state["$[]"](-1)));s(x=$e.$_racc_evalact(x,l)););},{$$arity:2,$$s:Y})},{$$arity:0,$$s:this})},4),G($,"$_racc_evalact",function(D,H){var l,ne,k=this,J=e,ie=e,ce=e,Q=e,R=e,Z=e,x=e;if(J=null==(l=K(H))[0]?e:l[0],ie=null==l[1]?e:l[1],ce=null==l[3]?e:l[3],ne=null==l[11]?e:l[11],Q=null==l[12]?e:l[12],s(T(D,0))&&s(z(D,ne)))s(T(k.racc_error_status,0))&&(o(k.racc_t,1)||(k.racc_error_status=B(k.racc_error_status,1))),k.racc_vstack.$push(k.racc_val),k.racc_state.$push(D),k.racc_read_next=!0,s(k.yydebug)&&(k.racc_tstack.$push(k.racc_t),k.$racc_shift(k.racc_t,k.racc_tstack,k.racc_vstack));else if(s(z(D,0))&&s(T(D,Q["$-@"]()))){if(R=F(k,"catch",["racc_jump"],function q(){var ee=null==q.$$s?this:q.$$s;return null==ee.racc_state&&(ee.racc_state=e),ee.racc_state.$push(ee.$_racc_do_reduce(H,D)),!1},{$$arity:0,$$s:k}),s(R)){if(L(1,Z=R))return k.racc_user_yyerror=!0,Q["$-@"]();if(L(2,Z))return ne;k.$raise("[Racc Bug] unknown jump code")}}else if(o(D,ne))s(k.yydebug)&&k.$racc_accept(),k.$throw("racc_end_parse",k.racc_vstack["$[]"](0));else{if(o(D,Q["$-@"]())){for(L(0,Z=k.racc_error_status)?s(H["$[]"](21))||k.$on_error(k.racc_t,k.racc_val,k.racc_vstack):L(3,Z)&&(o(k.racc_t,0)&&k.$throw("racc_end_parse",e),k.racc_read_next=!0),k.racc_user_yyerror=!1,k.racc_error_status=3;s(!0)&&!(s(x=ce["$[]"](k.racc_state["$[]"](-1)))&&(x=C(x,1),s(a(x,0))&&s(D=J["$[]"](x))&&o(ie["$[]"](x),k.racc_state["$[]"](-1))));)s(I(k.racc_state.$size(),1))&&k.$throw("racc_end_parse",e),k.racc_state.$pop(),k.racc_vstack.$pop(),s(k.yydebug)&&(k.racc_tstack.$pop(),k.$racc_e_pop(k.racc_state,k.racc_tstack,k.racc_vstack));return D}k.$raise("[Racc Bug] unknown action "+D.$inspect())}return s(k.yydebug)&&k.$racc_next_state(k.racc_state["$[]"](-1),k.racc_state),e},2),G($,"$_racc_do_reduce",function(D,H){var l,Q,Z,Y,ae,se,$e,k=this,ie=e,te=e,ce=e,ne=e,R=e,x=e,q=e,ee=e,re=e,X=e,_e=e,le=e,ue=e,O=e;return ie=null==(l=K(D))[4]?e:l[4],te=null==l[5]?e:l[5],ce=null==l[6]?e:l[6],ne=null==l[7]?e:l[7],Q=null==l[8]?e:l[8],R=null==l[9]?e:l[9],Z=null==l[13]?e:l[13],x=k.racc_state,q=k.racc_vstack,ee=k.racc_tstack,re=b(H,-3),X=R["$[]"](re),Y=R["$[]"](C(re,1)),ae=R["$[]"](C(re,2)),se=[],s(k.yydebug)&&(_e=ee["$[]"](X["$-@"](),X)),le=q["$[]"](X["$-@"](),X),s(k.yydebug)&&(ue=[X["$-@"](),X,se],F(ee,"[]=",j(ue)),B(ue.length,1)),ue=[X["$-@"](),X,se],F(q,"[]=",j(ue)),B(ue.length,1),ue=[X["$-@"](),X,se],F(x,"[]=",j(ue)),B(ue.length,1),s(Z)?q.$push(k.$__send__(ae,le,q,le["$[]"](0))):q.$push(k.$__send__(ae,le,q)),ee.$push(Y),s(k.yydebug)&&k.$racc_reduce(_e,Y,ee,q),$e=B(Y,Q),s(re=ne["$[]"]($e))&&(re=C(re,x["$[]"](-1)),s(a(re,0))&&s(O=ie["$[]"](re))&&o(te["$[]"](re),$e))?O:ce["$[]"]($e)},2),G($,"$on_error",function(D,H,l){var k,V=this;return V.$raise(A("ParseError"),V.$sprintf("\nparse error on value %s (%s)",H.$inspect(),s(k=V.$token_to_str(D))?k:"?"))},3),G($,"$yyerror",function(){return this.$throw("racc_jump",1)},0),G($,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),G($,"$yyerrok",function(){return this.racc_error_status=0},0),G($,"$racc_read_token",function(D,H,l){var V=this;return V.racc_debug_out.$print("read    "),V.racc_debug_out.$print(H.$inspect(),"(",V.$racc_token2str(D),") "),V.racc_debug_out.$puts(l.$inspect()),V.racc_debug_out.$puts()},3),G($,"$racc_shift",function(D,H,l){var V=this;return V.racc_debug_out.$puts("shift   "+V.$racc_token2str(D)),V.$racc_print_stacks(H,l),V.racc_debug_out.$puts()},3),G($,"$racc_reduce",function(D,H,l,V){var k=this,J=e;return(J=k.racc_debug_out).$print("reduce "),s(D["$empty?"]())?J.$print(" <none>"):F(D,"each",[],function ie(te){return null==te&&(te=e),J.$print(" ",(null==ie.$$s?this:ie.$$s).$racc_token2str(te))},{$$arity:1,$$s:k}),J.$puts(" --\x3e "+k.$racc_token2str(H)),k.$racc_print_stacks(l,V),k.racc_debug_out.$puts()},4),G($,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),G($,"$racc_e_pop",function(D,H,l){var V=this;return V.racc_debug_out.$puts("error recovering mode: pop token"),V.$racc_print_states(D),V.$racc_print_stacks(H,l),V.racc_debug_out.$puts()},3),G($,"$racc_next_state",function(D,H){var l=this;return l.racc_debug_out.$puts("goto    "+D),l.$racc_print_states(H),l.racc_debug_out.$puts()},2),G($,"$racc_print_stacks",function(D,H){var V=e;return(V=this.racc_debug_out).$print("        ["),F(D,"each_index",[],function k(J){return null==J&&(J=e),V.$print(" (",(null==k.$$s?this:k.$$s).$racc_token2str(D["$[]"](J))," ",H["$[]"](J).$inspect(),")")},{$$arity:1,$$s:this}),V.$puts(" ]")},2),G($,"$racc_print_states",function(D){var l=e;return(l=this.racc_debug_out).$print("        ["),F(D,"each",[],function(k){return null==k&&(k=e),l.$print(" ",k)},1),l.$puts(" ]")},1),G($,"$racc_token2str",function(D){var l;return s(l=p(this.$class(),"Racc_token_to_s_table")["$[]"](D))?l:this.$raise("[Racc Bug] can't convert token "+D+" to string")},1),G($,"$token_to_str",function(D){return p(this.$class(),"Racc_token_to_s_table")["$[]"](D)},1)}(t[0],t)},Opal.modules["bcdice/arithmetic/node"]=function(r){var B,C,L,c,f,b,v,a,K,M=[],t=r.nil,m=r.$$$,e=r.module,p=r.klass,w=r.def,P=r.send2,s=r.find_super,N=r.eqeq,W=r.const_set,E=r.eqeqeq,z=r.rb_divide,F=r.alias;return B=M,C=K=[e(M[0],"BCDice")].concat(B),L=a=[e(K[0],"Arithmetic")].concat(C),b=[e(a[0],"Node")].concat(L),v=r.$r(b),(f=(c=p(b[0],null,"BinaryOp")).$$prototype).lhs=f.rhs=f.op=t,w(c,"$initialize",function(i,u,n){var $=this;return $.lhs=i,$.op=u,$.rhs=n},3),w(c,"$eval",function(i){var $,u=this,n=t;return n=u.lhs.$eval(i),$=u.rhs.$eval(i),n.$send(u.op,$)},1),w(c,"$output",function(){var i=this;return""+i.lhs.$output()+i.op+i.rhs.$output()},0),w(c,"$s_exp",function(){var i=this;return"("+i.$op_for_s_exp()+" "+i.lhs.$s_exp()+" "+i.rhs.$s_exp()+")"},0),w(c,"$op_for_s_exp",function(){return this.op},0),function(h,y,c){var f=p(h,y,"DivideBase"),_=[f].concat(c),i=r.$r(_),u=f.$$prototype;u.lhs=u.rhs=u.op=t,w(f,"$initialize",function n($,d){return delete n.$$p,P(this,s(this,"initialize",n,!1,!0),"initialize",[$,"/",d],null)},2),w(f,"$eval",function($){var A,g,d=this;return A=d.lhs.$eval($),g=d.rhs.$eval($),N(g,0)&&d.$raise(i("ZeroDivisionError")),d.$divide_and_round(A,g,$)},1),w(f,"$output",function n(){var $=n.$$p||t,d=this;return delete n.$$p,""+P(d,s(d,"output",n,!1,!0),"output",[],$)+d.$rounding_method()},0),f.$private(),w(f,"$rounding_method",function(){return m(this.$class(),"ROUNDING_METHOD")},0),w(f,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),w(f,"$divide_and_round",function($,d,A){return this.$raise(i("NotImplementedError"))},3)}(b[0],v("BinaryOp"),b),function(h,y,c){var f=p(h,y,"DivideWithGameSystemDefault"),_=[f].concat(c),i=r.$r(_);W(_[0],"ROUNDING_METHOD",""),f.$private(),w(f,"$divide_and_round",function(n,$,d){var A;return E(m(i("RoundType"),"CEIL"),A=d)?z(n.$to_f(),$).$ceil():E(m(i("RoundType"),"ROUND"),A)?z(n.$to_f(),$).$round():z(n,$).$floor()},3)}(b[0],v("DivideBase"),b),function(h,y,c){var f=p(h,y,"DivideWithCeil"),_=[f].concat(c);W(_[0],"ROUNDING_METHOD","C"),f.$private(),w(f,"$divide_and_round",function(u,n,$){return z(u.$to_f(),n).$ceil()},3)}(b[0],v("DivideBase"),b),function(h,y,c){var f=p(h,y,"DivideWithRound"),_=[f].concat(c);W(_[0],"ROUNDING_METHOD","R"),f.$private(),w(f,"$divide_and_round",function(u,n,$){return z(u.$to_f(),n).$round()},3)}(b[0],v("DivideBase"),b),function(h,y,c){var f=p(h,y,"DivideWithFloor"),_=[f].concat(c);W(_[0],"ROUNDING_METHOD","F"),f.$private(),w(f,"$divide_and_round",function(u,n,$){return z(u,n).$to_i()},3)}(b[0],v("DivideBase"),b),function(h,y){var c=p(h,null,"Negative");c.$$prototype.body=t,w(c,"$initialize",function(i){return this.body=i},1),w(c,"$eval",function(i){return this.body.$eval(i)["$-@"]()},1),w(c,"$output",function(){return"-"+this.body.$output()},0),w(c,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(b[0]),function(h,y){var c=p(h,null,"Parenthesis");c.$$prototype.expr=t,w(c,"$initialize",function(i){return this.expr=i},1),w(c,"$eval",function(i){return this.expr.$eval(i)},1),w(c,"$output",function(){return"("+this.expr.$output()+")"},0),w(c,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(b[0]),function(h,y){var c=p(h,null,"Number");return c.$$prototype.value=t,w(c,"$initialize",function(i){return this.value=i},1),w(c,"$eval",function(i){return this.value},1),w(c,"$output",function(){return this.value.$to_s()},0),F(c,"s_exp","output")}(b[0])},Opal.modules.strscan=function(r){var j,B,G,K,U,M=[],t=r.nil,e=r.def,p=r.truthy,w=r.eqeqeq,P=r.Opal,s=r.send,N=r.to_a,W=r.rb_minus,E=r.alias;return j=M,G=[B=(0,r.klass)(M[0],null,"StringScanner")].concat(j),K=r.$r(G),(U=B.$$prototype).pos=U.string=U.working=U.matched=U.prev_pos=U.match=t,B.$attr_reader("pos","matched"),e(B,"$initialize",function(o){var a=this;return a.string=o,a.pos=0,a.matched=t,a.working=o,a.match=[]},1),B.$attr_reader("string"),e(B,"$beginning_of_line?",function(){var o=this;return 0===o.pos||"\n"===o.string.charAt(o.pos-1)},0),e(B,"$scan",function(o){var a=this,T=(o=a.$anchor(o)).exec(a.working);return null==T?a.matched=t:"object"==typeof T?(a.prev_pos=a.pos,a.pos+=T[0].length,a.working=a.working.substring(T[0].length),a.matched=T[0],a.match=T,T[0]):"string"==typeof T?(a.pos+=T.length,a.working=a.working.substring(T.length),T):t},1),e(B,"$scan_until",function(o){var a=this;o=a.$anchor(o);for(var I,T=a.pos,L=a.working;;){if(I=o.exec(L),T+=1,L=L.substr(1),null!=I)return a.matched=a.string.substr(a.pos,T-a.pos-1+I[0].length),a.match=I,a.prev_pos=T-1,a.pos=T,a.working=L.substr(I[0].length),a.matched;if(0===L.length)return a.match=[],a.matched=t}},1),e(B,"$[]",function(o){var T;if(p(this.match["$empty?"]()))return t;w(K("Symbol"),T=o)?o=o.$to_s():w(K("String"),T)||(o=P["$coerce_to!"](o,K("Integer"),"to_int"));var L=this.match;return o<0&&(o+=L.length),o<0||o>=L.length||null==L[o]?t:L[o]},1),e(B,"$check",function(o){var a=this,T=(o=a.$anchor(o)).exec(a.working);return a.matched=null==T?t:T[0]},1),e(B,"$check_until",function(o){var a=this,T=a.prev_pos,L=a.pos,I=a.$scan_until(o);return I!==t&&(a.matched=I.substr(-1),a.working=a.string.substr(L)),a.prev_pos=T,a.pos=L,I},1),e(B,"$peek",function(o){return this.working.substring(0,o)},1),e(B,"$eos?",function(){return 0===this.working.length},0),e(B,"$exist?",function(o){var T=o.exec(this.working);return null==T?t:0==T.index?0:T.index+1},1),e(B,"$skip",function(o){var a=this,T=(o=a.$anchor(o)).exec(a.working);if(null==T)return a.match=[],a.matched=t;var L=T[0],I=L.length;return a.matched=L,a.match=T,a.prev_pos=a.pos,a.pos+=I,a.working=a.working.substring(I),I},1),e(B,"$skip_until",function(o){var T=this.$scan_until(o);return T===t?t:(this.matched=T.substr(-1),T.length)},1),e(B,"$get_byte",function(){var o=this,a=t;return o.pos<o.string.length?(o.prev_pos=o.pos,o.pos+=1,a=o.matched=o.working.substring(0,1),o.working=o.working.substring(1)):o.matched=t,a},0),e(B,"$match?",function(o){var a=this,T=(o=a.$anchor(o)).exec(a.working);return null==T?t:(a.prev_pos=a.pos,T[0].length)},1),e(B,"$pos=",function(o){var a=this;return o<0&&(o+=a.string.$length()),a.pos=o,a.working=a.string.slice(o)},1),e(B,"$matched_size",function(){return this.matched===t?t:this.matched.length},0),e(B,"$post_match",function(){var o=this;return o.matched===t?t:o.string.substr(o.pos)},0),e(B,"$pre_match",function(){var o=this;return o.matched===t?t:o.string.substr(0,o.prev_pos)},0),e(B,"$reset",function(){var o=this;return o.working=o.string,o.matched=t,o.pos=0},0),e(B,"$rest",function(){return this.working},0),e(B,"$rest?",function(){return 0!==this.working.length},0),e(B,"$rest_size",function(){return this.$rest().$size()},0),e(B,"$terminate",function(){var a,o=this;return o.match=t,a=[o.string.$length()],s(o,"pos=",N(a)),a[W(a.length,1)]},0),e(B,"$unscan",function(){var o=this;return o.pos=o.prev_pos,o.prev_pos=t,o.match=t,o},0),E(B,"bol?","beginning_of_line?"),E(B,"getch","get_byte"),B.$private(),e(B,"$anchor",function(o){var a=o.toString().match(/\/([^\/]+)$/);return a=a?a[1]:void 0,new RegExp("^(?:"+o.source+")",a)},1)},Opal.modules["bcdice/normalize"]=function(r){var s,z,W,M=[],t=r.nil,m=r.module,e=r.eqeqeq,p=r.def,w=r.eqeq;return s=M,W=[m(M[0],"BCDice")].concat(s),(z=m(W[0],"Normalize")).$module_function(),p(z,"$comparison_operator",function(j){var B;return e(/<=|=</,B=j)?"<=":e(/>=|=>/,B)?">=":e(/<>|!=|=!/,B)?"!=":e(/</,B)?"<":e(/>/,B)?">":e(/=/,B)?"==":t},1),p(z,"$target_number",function(j){return w(j,"?")?j:j.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var z,G,a,T,L,I,b,U,j,M=r.top,t=[],m=r.nil,e=r.module,p=r.klass,w=r.const_set,P=r.hash2,s=r.truthy,N=r.send,W=r.def;return M.$require("strscan"),M.$require("bcdice/normalize"),z=t,G=j=[e(t[0],"BCDice")].concat(z),a=U=[e(j[0],"Command")].concat(G),L=[T=p(U[0],null,"Lexer")].concat(a),I=r.$r(L),(b=T.$$prototype).scanner=b.notations=m,w(L[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),W(T,"$initialize",function(h,y){var c,f,i;return h=s(i=(f=(c=h)===m||null==c?m:N(c,"split",[" ",2]))===m||null==f?m:N(f,"first",[]))?i:"",this.scanner=I("StringScanner").$new(h),this.notations=N(y,"map",[],function(n){return null==n&&(n=m),s(n["$is_a?"](I("String")))?I("Regexp").$new(n):n},1)},2),W(T,"$next_token",function(){try{var h=this,y=m,c=m,_=m,i=m;return s(h.scanner["$eos?"]())?[!1,"$"]:(N(h.notations,"each",[],function u(n){var d,$=null==u.$$s?this:u.$$s;if(null==$.scanner&&($.scanner=m),null==n&&(n=m),d=$.scanner.$scan(n),!s(d))return m;r.ret(["NOTATION",d])},{$$arity:1,$$s:h}),s(y=h.scanner.$scan(/\d+/))?["NUMBER",y.$to_i()]:s(c=h.scanner.$scan(/[<>!=]+/))?(c=I("Normalize").$comparison_operator(c),[s(c)?"CMP_OP":"ILLEGAL",c]):(_=h.scanner.$getch().$upcase(),[s(i=I("SYMBOLS")["$[]"](_))?i:_.$to_sym(),_]))}catch(u){if(u===r.returner)return u.$v;throw u}},0),W(T,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var N,F,U,C,o,a,T,B,E,M=[],t=r.nil,m=r.module,e=r.klass,p=r.def,w=r.truthy,P=r.eqeqeq;return N=M,F=E=[m(M[0],"BCDice")].concat(N),U=B=[m(E[0],"Command")].concat(F),o=[C=e(B[0],null,"Parsed")].concat(U),a=r.$r(o),(T=C.$$prototype).question_target=T.critical=T.fumble=T.dollar=T.modify_number=T.target_number=T.prefix_number=T.command=T.suffix_number=T.cmp_op=t,C.$attr_accessor("command"),C.$attr_accessor("prefix_number"),C.$attr_accessor("suffix_number"),C.$attr_accessor("critical"),C.$attr_accessor("fumble"),C.$attr_accessor("dollar"),C.$attr_accessor("modify_number"),C.$attr_accessor("cmp_op"),C.$attr_accessor("target_number"),C.$attr_writer("question_target"),p(C,"$initialize",function(){var I=this;return I.prefix_number=t,I.suffix_number=t,I.critical=t,I.fumble=t,I.dollar=t,I.cmp_op=t,I.target_number=t,I.question_target=!1},0),p(C,"$question_target?",function(){return this.question_target},0),p(C,"$to_s",function(I){var _,b=this,v=t,h=t,y=t,c=t,f=t;return null==I&&(I="after_command"),v=w(b.critical)?"@"+b.critical:t,h=w(b.fumble)?"#"+b.fumble:t,y=w(b.dollar)?"$"+b.dollar:t,c=a("Format").$modifier(b.modify_number),f=w(b.question_target)?"?":b.target_number,P("after_command",_=I)?[b.prefix_number,b.command,b.suffix_number,v,h,y,c,b.cmp_op,f].$join():P("after_modify_number",_)?[b.prefix_number,b.command,b.suffix_number,c,v,h,y,b.cmp_op,f].$join():P("after_target_number",_)?[b.prefix_number,b.command,b.suffix_number,c,b.cmp_op,f,v,h,y].$join():t},-1)},Opal.modules["bcdice/command/parser"]=function(r){var a,b,_,$,d,A,g,S,D,H,l,V,ie,i,u,n,ne,h,y,L,M=r.top,t=[],m=r.$r(t),e=r.nil,p=r.$$$,w=r.klass,P=r.module,s=r.hash2,N=r.send2,W=r.find_super,E=r.def,z=r.send,F=r.to_a,j=r.rb_minus,B=r.eqeq,G=r.hash,K=r.const_set,U=r.truthy,C=r.to_ary;return M.$require("racc/parser.rb"),M.$require("bcdice/arithmetic/node"),M.$require("bcdice/command/lexer"),M.$require("bcdice/command/parsed"),w(p(m("BCDice"),"Command"),p(m("Racc"),"Parser"),"Parser"),a=t,b=L=[P(t[0],"BCDice")].concat(a),h=[P(L[0],"Command")].concat(b),y=r.$r(h),_=h,u=[i=w(h[0],p(y("Racc"),"Parser"),"Parser")].concat(_),n=r.$r(u),(ne=i.$$prototype).notations=ne.lexer=ne.modifier=ne.suffix_number=ne.prefix_number=ne.need_suffix_number=ne.need_prefix_number=ne.critical=ne.fumble=ne.dollar=ne.allowed_cmp_op=ne.question_target=e,E(i,"$initialize",function Q(R,Z){var x,q,ee,re,Y=this;if(delete Q.$$p,x=r.slice.call(arguments),null==(q=r.extract_kwargs(x)))q=s([],{});else if(!q.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(ee=x,!r.hasOwnProperty.call(q.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return re=q.$$smap.round_type,N(Y,W(Y,"initialize",Q,!1,!0),"initialize",[],null),Y.notations=ee,Y.round_type=re,Y.prefix_number=!1,Y.suffix_number=!1,Y.need_prefix_number=!1,Y.need_suffix_number=!1,Y.modifier=!0,Y.critical=!1,Y.fumble=!1,Y.dollar=!1,Y.allowed_cmp_op=[e,">=",">","<=","<","==","!="],Y.question_target=!1},-2),E(i,"$disable_modifier",function(){return this.modifier=!1,this},0),E(i,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),E(i,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),E(i,"$has_prefix_number",function(){var R=this;return R.prefix_number=!0,R.need_prefix_number=!0,R},0),E(i,"$has_suffix_number",function(){var R=this;return R.suffix_number=!0,R.need_suffix_number=!0,R},0),E(i,"$enable_critical",function(){return this.critical=!0,this},0),E(i,"$enable_fumble",function(){return this.fumble=!0,this},0),E(i,"$enable_dollar",function(){return this.dollar=!0,this},0),E(i,"$restrict_cmp_op_to",function(R){var Z,q=this;return Z=r.slice.call(arguments),q.allowed_cmp_op=Z,q},-1),E(i,"$enable_question_target",function(){return this.question_target=!0,this},0),E(i,"$parse",function(R){var Z=this;try{return Z.lexer=n("Lexer").$new(R,Z.notations),Z.$do_parse()}catch(x){if(!r.rescue(x,[n("ParseError"),n("ZeroDivisionError")]))throw x;try{return e}finally{r.pop_exception()}}},1),i.$private(),E(i,"$parsed",function(R,Z,x,q){return z(n("Parsed").$new(),"tap",[],function re(X){var Y,ae,se,_e,le,ue,$e=null==re.$$s?this:re.$$s,O=e;return null==$e.round_type&&($e.round_type=e),null==X&&(X=e),O=[R["$[]"]("command")],z(X,"command=",F(O)),j(O.length,1),O=[(Y=R["$[]"]("prefix"),Y===e||null==Y?e:z(Y,"eval",[$e.round_type]))],z(X,"prefix_number=",F(O)),j(O.length,1),O=[(ae=R["$[]"]("suffix"),ae===e||null==ae?e:z(ae,"eval",[$e.round_type]))],z(X,"suffix_number=",F(O)),j(O.length,1),O=[(se=Z["$[]"]("critical"),se===e||null==se?e:z(se,"eval",[$e.round_type]))],z(X,"critical=",F(O)),j(O.length,1),O=[(_e=Z["$[]"]("fumble"),_e===e||null==_e?e:z(_e,"eval",[$e.round_type]))],z(X,"fumble=",F(O)),j(O.length,1),O=[(le=Z["$[]"]("dollar"),le===e||null==le?e:z(le,"eval",[$e.round_type]))],z(X,"dollar=",F(O)),j(O.length,1),O=[x.$eval($e.round_type)],z(X,"modify_number=",F(O)),j(O.length,1),O=[q["$[]"]("cmp_op")],z(X,"cmp_op=",F(O)),j(O.length,1),B(q["$[]"]("target"),"?")?(z(X,"question_target=",F(O=[!0])),j(O.length,1),z(X,"target_number=",F(O=[0])),O[j(O.length,1)]):(z(X,"question_target=",F(O=[!1])),j(O.length,1),O=[(ue=q["$[]"]("target"),ue===e||null==ue?e:z(ue,"eval",[$e.round_type]))],z(X,"target_number=",F(O)),O[j(O.length,1)])},{$$arity:1,$$s:this})},4),E(i,"$next_token",function(){return this.lexer.$next_token()},0),$=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],d=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],A=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],g=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],S=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],D=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],H=[e,6,13,3,9,-1,27,-15,-10,-1,-38],l=[e,e,e,e,e,e,19,16,15,e,e],V=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],ie=G(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),K(u[0],"Racc_arg",[$,d,g,A,S,D,l,H,19,V,ie,58,35,!0]),K(u[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),K(u[0],"Racc_debug_parser",!1),E(i,"$_reduce_1",function(R,Z,x){var q;return U(this.modifier)||this.$raise(n("ParseError")),q=C(R),this.$parsed(null==q[0]?e:q[0],null==q[1]?e:q[1],null==q[2]?e:q[2],null==q[3]?e:q[3])},3),E(i,"$_reduce_2",function(R,Z,x){var q;return U(this.modifier)||this.$raise(n("ParseError")),q=C(R),this.$parsed(null==q[0]?e:q[0],null==q[2]?e:q[2],null==q[1]?e:q[1],null==q[3]?e:q[3])},3),E(i,"$_reduce_3",function(R,Z,x){var q,ae;return ae=null==(q=C(R))[2]?e:q[2],this.$parsed(null==q[0]?e:q[0],null==q[1]?e:q[1],p(p(n("Arithmetic"),"Node"),"Number").$new(0),ae)},3),E(i,"$_reduce_4",function(R,Z,x){var q=this;return U(q.prefix_number)&&U(q.suffix_number)||q.$raise(n("ParseError")),s(["command","prefix","suffix"],{command:R["$[]"](1),prefix:R["$[]"](0),suffix:R["$[]"](2)})},3),E(i,"$_reduce_5",function(R,Z,x){var q=this;return U(q.prefix_number)||q.$raise(n("ParseError")),U(q.need_suffix_number)&&q.$raise(n("ParseError")),s(["command","prefix"],{command:R["$[]"](1),prefix:R["$[]"](0)})},3),E(i,"$_reduce_6",function(R,Z,x){var q=this;return U(q.suffix_number)||q.$raise(n("ParseError")),U(q.need_prefix_number)&&q.$raise(n("ParseError")),s(["command","suffix"],{command:R["$[]"](0),suffix:R["$[]"](1)})},3),E(i,"$_reduce_7",function(R,Z,x){var q=this;return(U(q.need_prefix_number)||U(q.need_suffix_number))&&q.$raise(n("ParseError")),s(["command"],{command:R["$[]"](0)})},3),E(i,"$_reduce_8",function(R,Z,x){return s([],{})},3),E(i,"$_reduce_9",function(R,Z,x){var q,ae,se,X=e;return X=null==(q=C(R))[0]?e:q[0],ae=null==q[2]?e:q[2],U(this.critical)&&U(X["$[]"]("critical")["$nil?"]())||this.$raise(n("ParseError")),z(X,"[]=",F(se=["critical",ae])),j(se.length,1),X},3),E(i,"$_reduce_10",function(R,Z,x){var q,ae,se,X=e;return X=null==(q=C(R))[0]?e:q[0],ae=null==q[2]?e:q[2],U(this.fumble)&&U(X["$[]"]("fumble")["$nil?"]())||this.$raise(n("ParseError")),z(X,"[]=",F(se=["fumble",ae])),j(se.length,1),X},3),E(i,"$_reduce_11",function(R,Z,x){var q,ae,se,X=e;return X=null==(q=C(R))[0]?e:q[0],ae=null==q[2]?e:q[2],U(this.dollar)&&U(X["$[]"]("dollar")["$nil?"]())||this.$raise(n("ParseError")),z(X,"[]=",F(se=["dollar",ae])),j(se.length,1),X},3),E(i,"$_reduce_12",function(R,Z,x){return R["$[]"](1)},3),E(i,"$_reduce_13",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"Negative").$new(R["$[]"](1))},3),E(i,"$_reduce_14",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"+",R["$[]"](2))},3),E(i,"$_reduce_15",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"-",R["$[]"](2))},3),E(i,"$_reduce_16",function(R,Z,x){return U(this.allowed_cmp_op["$include?"](e))||this.$raise(n("ParseError")),s([],{})},3),E(i,"$_reduce_17",function(R,Z,x){var q,X,Y;return Y=null==(q=C(R))[1]?e:q[1],U(this.allowed_cmp_op["$include?"](X=null==q[0]?e:q[0]))||this.$raise(n("ParseError")),s(["cmp_op","target"],{cmp_op:X,target:Y})},3),E(i,"$_reduce_18",function(R,Z,x){var ee,q=this;return ee=R["$[]"](0),U(q.question_target)||q.$raise(n("ParseError")),U(q.allowed_cmp_op["$include?"](ee))||q.$raise(n("ParseError")),s(["cmp_op","target"],{cmp_op:ee,target:"?"})},3),E(i,"$_reduce_19",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"+",R["$[]"](2))},3),E(i,"$_reduce_20",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"-",R["$[]"](2))},3),E(i,"$_reduce_22",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"*",R["$[]"](2))},3),E(i,"$_reduce_23",function(R,Z,x){return R["$[]"](3).$new(R["$[]"](0),R["$[]"](2))},3),E(i,"$_reduce_25",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),E(i,"$_reduce_26",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"DivideWithCeil")},3),E(i,"$_reduce_27",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"DivideWithCeil")},3),E(i,"$_reduce_28",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"DivideWithRound")},3),E(i,"$_reduce_29",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"DivideWithFloor")},3),E(i,"$_reduce_30",function(R,Z,x){return R["$[]"](1)},3),E(i,"$_reduce_31",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"Negative").$new(R["$[]"](1))},3),E(i,"$_reduce_33",function(R,Z,x){return R["$[]"](1)},3),E(i,"$_reduce_34",function(R,Z,x){return p(p(n("Arithmetic"),"Node"),"Number").$new(R["$[]"](0))},3),E(i,"$_reduce_none",function(R,Z,x){return R["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var N,F,K,U,C,o,B,E,M=[],t=r.nil,m=r.module,e=r.send,p=r.eqeqeq,w=r.truthy,P=r.def;return N=M,F=E=[m(M[0],"BCDice")].concat(N),K=B=[m(E[0],"Deprecated")].concat(F),C=[U=m(B[0],"Checker")].concat(K),o=r.$r(C),U.$private(),P(U,"$check_result_legacy",function(T,L,I,b){var c,v=this,h=t,y=t,f=t,_=t;return h=e(L,"map",[],"sides".$to_proc()),c=(y=e(L,"map",[],"value".$to_proc())).$sum(),f=p([100],_=h)?v.$check_1D100(T,c,I,b):p([20],_)?v.$check_1D20(T,c,I,b):p([6,6],_)?v.$check_2D6(T,c,y,I,b):t,(w(f["$nil?"]())||w(f["$empty?"]()))&&(f=p([10],_=h.$uniq())?v.$check_nD10(T,c,y,I,b):p([6],_)?v.$check_nD6(T,c,y,I,b):t,w(f["$nil?"]())||w(f["$empty?"]()))?t:o("Result").$new(f.$delete_prefix(" \uff1e "))},4),P(U,"$check_1D100",function(T,L,I,b){return t},4),P(U,"$check_1D20",function(T,L,I,b){return t},4),P(U,"$check_nD10",function(T,L,I,b,v){return t},5),P(U,"$check_2D6",function(T,L,I,b,v){return t},5),P(U,"$check_nD6",function(T,L,I,b,v){return t},5)},Opal.modules["bcdice/base"]=function(r){var L,y,u,$,d,c,f,_,i,b,M=r.top,t=[],m=r.$r(t),e=r.nil,p=r.$$$,w=r.module,P=r.klass,s=r.truthy,N=r.def,W=r.regexp,E=r.rb_plus,z=r.send,F=r.to_a,j=r.rb_minus,B=r.eqeqeq,G=r.eqeq,K=r.range,U=r.rb_divide,C=r.rb_times,o=r.rb_ge,a=e;return M.$require("i18n"),M.$require("i18n/backend/fallbacks"),M.$require("bcdice/randomizer"),M.$require("bcdice/dice_table"),M.$require("bcdice/enum"),M.$require("bcdice/translate"),M.$require("bcdice/result"),M.$require("bcdice/command/parser"),M.$require("bcdice/deprecated/checker"),L=t,y=b=[w(t[0],"BCDice")].concat(L),f=[c=P(b[0],null,"Base")].concat(y),_=r.$r(f),(i=c.$$prototype).sort_add_dice=i.sort_barabara_dice=i.enabled_d9=i.raw_input=i.randomizer=i.enabled_upcase_input=i.debug=e,$=[u=r.get_singleton_class(c)].concat(f),d=r.$r($),u.$attr_reader("prefixes"),N(u,"$register_prefix",function(g){var D,H=this,l=e;return null==H.prefixes&&(H.prefixes=e),D=r.slice.call(arguments),H.prefixes=s(l=H.prefixes)?l:[],H.prefixes.$concat(D.$flatten())},-1),N(u,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),N(u,"$prefixes_pattern",function(){var g=this,S=e;return null==g.prefixes_pattern&&(g.prefixes_pattern=e),null==g.prefixes&&(g.prefixes=e),g.prefixes_pattern=s(S=g.prefixes_pattern)?S:e,s(g.prefixes_pattern)?g.prefixes_pattern:(g.prefixes=s(S=g.prefixes)?S:[],g.prefixes.$freeze(),g.prefixes_pattern=(s(g.prefixes["$empty?"]())?/(?!)/:W(["^(S)?(",g.prefixes.$join("|"),")"],"i")).$freeze())},0),N(u,"$command_pattern",function(){var g=this,S=e,D=e;return null==g.command_pattern&&(g.command_pattern=e),null==g.prefixes&&(g.prefixes=e),g.command_pattern=s(S=g.command_pattern)?S:e,s(g.command_pattern)?g.command_pattern:(g.prefixes=s(S=g.prefixes)?S:[],g.prefixes.$freeze(),D=E(z(p(d("CommonCommand"),"COMMANDS"),"map",[],function(l){return null==l&&(l=e),p(l,"PREFIX_PATTERN").$source()},1),g.prefixes),g.command_pattern=W(["^S?(",D.$join("|"),")"],"i").$freeze())},0),N(u,"$eval",function(g){return this.$new(g).$eval()},1),c.$include(_("Translate")),c.$include(p(_("Deprecated"),"Checker")),N(c,"$initialize",function(n){var $=this;return $.raw_input=n,$.sort_add_dice=!1,$.sort_barabara_dice=!1,$.d66_sort_type=p(_("D66SortType"),"NO_SORT"),$.enabled_d9=!1,$.round_type=p(_("RoundType"),"FLOOR"),$.sides_implicit_d=6,$.upper_dice_reroll_threshold=e,$.reroll_dice_reroll_threshold=e,$.default_cmp_op=e,$.default_target_number=e,$.enabled_upcase_input=!0,$.locale="ja_jp",$.randomizer=p(_("BCDice"),"Randomizer").$new(),$.debug=!1},1),c.$attr_accessor("randomizer"),c.$attr_reader("d66_sort_type"),c.$attr_reader("round_type"),c.$attr_reader("sides_implicit_d"),c.$attr_reader("upper_dice_reroll_threshold"),c.$attr_reader("reroll_dice_reroll_threshold"),c.$attr_reader("default_cmp_op"),c.$attr_reader("default_target_number"),N(c,"$sort_add_dice?",function(){return this.sort_add_dice},0),N(c,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),N(c,"$enabled_d9?",function(){return this.enabled_d9},0),N(c,"$enable_debug",function(){return this.debug=!0},0),N(c,"$eval",function(){var $,d,A,n=this,g=e;return $=p(_("BCDice"),"Preprocessor").$process(n.raw_input,n),d=s(A=n.$dice_command($))?A:n.$eval_common_command(n.raw_input),s(d)?(g=[n.randomizer.$rand_results()],z(d,"rands=",F(g)),j(g.length,1),g=[n.randomizer.$detailed_rand_results()],z(d,"detailed_rands=",F(g)),j(g.length,1),d):e},0),N(c,"$change_text",function(n){return n},1),N(c,"$check_result",function(n,$,d,A){var g=this,S=e,D=e,H=e,l=e,V=e;return S=g.$check_result_legacy(n,$,d,A),s(S)?S:(D=z($,"map",[],"sides".$to_proc()),l=(H=z($,"map",[],"value".$to_proc())).$sum(),S=B([100],V=D)?g.$result_1d100(n,l,d,A):B([20],V)?g.$result_1d20(n,l,d,A):B([6,6],V)?g.$result_2d6(n,l,H,d,A):e,G(S,_("Result").$nothing())?e:s(S)?S:(S=B([10],V=D.$uniq())?g.$result_nd10(n,l,H,d,A):B([6],V)?g.$result_nd6(n,l,H,d,A):e,G(S,_("Result").$nothing())?e:s(S)?S:g.$result_ndx(n,d,A)))},4),N(c,"$grich_text",function(n,$,d){return e},3),c.$private(),N(c,"$eval_common_command",function(n){try{return n=this.$change_text(n),z(p(_("CommonCommand"),"COMMANDS"),"each",[],function d(A){var S,g=null==d.$$s?this:d.$$s;if(null==g.randomizer&&(g.randomizer=e),null==A&&(A=e),S=A.$eval(n,g,g.randomizer),!s(S))return e;r.ret(S)},{$$arity:1,$$s:this}),e}catch(d){if(d===r.returner)return d.$v;throw d}},1),N(c,"$dice_command",function(n){var $=this,d=e,A=e,g=e,S=e,D=e;return s($.enabled_upcase_input)&&(n=n.$upcase()),d=$.$class().$prefixes_pattern().$match(n),s(d)?(A=d["$[]"](1)["$nil?"]()["$!"](),s(A)&&(n=n["$[]"](K(1,-1,!1))),g=$.$eval_game_system_specific_command(n),s(g["$is_a?"](_("Result")))?(S=[s(D=g["$secret?"]())?D:A],z(g,"secret=",F(S)),j(S.length,1),g):s(g["$nil?"]())||s(g["$empty?"]())||G(g,"1")?e:z(_("Result").$new(),"tap",[],function(l){return null==l&&(l=e),S=[g.$to_s()],z(l,"text=",F(S)),j(S.length,1),z(l,"secret=",F(S=[A])),S[j(S.length,1)]},1)):e},1),N(c,"$eval_game_system_specific_command",function(n){return e},1),N(c,"$result_ndx",function(n,$,d){return s(d["$is_a?"](_("String")))?e:s(n.$send($,d))?_("Result").$success(this.$translate("success")):_("Result").$failure(this.$translate("failure"))},3),N(c,"$result_1d100",function(n,$,d,A){return e},4),N(c,"$result_1d20",function(n,$,d,A){return e},4),N(c,"$result_nd10",function(n,$,d,A,g){return e},5),N(c,"$result_2d6",function(n,$,d,A,g){return e},5),N(c,"$result_nd6",function(n,$,d,A,g){return e},5),N(c,"$get_table_by_2d6",function(n){return this.$get_table_by_nD6(n,2)},1),N(c,"$get_table_by_1d6",function(n){return this.$get_table_by_nD6(n,1)},1),N(c,"$get_table_by_nD6",function(n,$){return this.$get_table_by_nDx(n,$,6)},2),N(c,"$get_table_by_nDx",function(n,$,d){var g,S=e;return g=this.randomizer.$roll_sum($,d),S=this.$get_table_value(n["$[]"](j(g,$))),s(S["$nil?"]())?["1",0]:[S,g]},3),N(c,"$get_table_by_1d3",function(n){var A,g,$=this,S=e;return $.$debug("get_table_by_1d3"),A=$.randomizer.$roll_sum(1,6),$.$debug("num",A),g=U(j(A,1),2).$to_i(),$.$debug("index",g),S=n["$[]"](g),s(S["$nil?"]())?["1",0]:[S,A]},1),N(c,"$get_table_by_d66_swap",function(n){var d;return d=this.randomizer.$roll_d66(p(_("D66SortType"),"ASC")),[this.$get_table_by_number(d,n),d]},1),N(c,"$get_table_by_d66",function(n){var d,A,g,D,S=e;return d=this.randomizer.$roll_once(6),A=this.randomizer.$roll_once(6),g=E(C(j(d,1),6),j(A,1)),S=n["$[]"](g),D=""+d+A,s(S["$nil?"]())?["1",D]:[S,D]},1),N(c,"$get_table_by_number",function(n,$,d){try{return null==d&&(d="1"),z($,"each",[],function g(S){var H,D=null==g.$$s?this:g.$$s;if(null==S&&(S=e),H=S["$[]"](0),!s(o(H,n)))return e;r.ret(D.$get_table_value(S["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(d)}catch(g){if(g===r.returner)return g.$v;throw g}},-3),N(c,"$get_table_value",function(n){return s(n["$is_a?"](_("Proc")))?n.$call():n},1),N(c,"$roll_tables",function(n,$){var A=e;return A=$["$[]"](n),s(A)?A.$roll(this.randomizer).$to_s():e},2),N(c,"$debug",function(n,$){var A,g=this,S=e,D=e;return A=r.slice.call(arguments,1),s(g.debug)?(S=s(n["$is_a?"](_("String")))?n:n.$inspect(),s(A["$empty?"]())?g.$warn(S):(D=z(A,"map",[],function(l){return null==l&&(l=e),s(l["$is_a?"](_("String")))?'"'+l+'"':l.$inspect()},1),g.$warn(S+": "+D.$join(", ")))):e},-2),p(p(m("I18n"),"Backend"),"Simple").$include(p(p(m("I18n"),"Backend"),"Fallbacks")),m("I18n").$load_path()["$<<"](m("Dir")["$[]"](m("File").$join("bcdice","../../i18n/**/*.yml"))),a=["ja_jp"],z(m("I18n"),"default_locale=",F(a)),j(a.length,1),a=[["ja_jp"]],z(m("I18n").$fallbacks(),"defaults=",F(a)),a[j(a.length,1)]},Opal.queue(function(r){var L,h,u,n,$,d,c,f,b,t=[],m=r.nil,e=r.$$$,p=r.module,w=r.klass,P=r.const_set,s=r.hash2,N=r.send2,W=r.find_super,E=r.def,z=r.truthy,F=r.to_ary,j=r.rb_plus,B=r.range,G=r.neqeq,K=r.eqeq,U=r.rb_ge,C=r.send,o=r.to_a,a=r.rb_minus;return r.top.$require("bcdice/base"),L=t,h=b=[p(t[0],"BCDice")].concat(L),c=[p(b[0],"GameSystem")].concat(h),f=r.$r(c),u=c,$=[n=w(c[0],f("Base"),"DesperateRun")].concat(u),d=r.$r($),n.$$prototype.randomizer=m,P($[0],"ID","DesperateRun"),P($[0],"NAME","Desperate Run TRPG"),P($[0],"SORT_KEY","\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG"),P($[0],"HELP_MESSAGE","\u30fb\u96e3\u6613\u5ea6\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u3000DDC\n\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\u3000RCx\u3000or\u3000RCx+y\u3000or\u3000RCx-y\uff08x\uff1d\u96e3\u6613\u5ea6\u3001y=\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\u80fd\uff09\uff09\n\u30fb\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868\u3000ACT\n\u30fb\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868\u3000ITEMT\n\u30fb\u52d5\u6a5f\u8868\u3000DOUKIT\n\u30fb\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868\u3000FLAGT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868\u3000ENTRYT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3000ROADT\n"),P($[0],"TABLES",s(["ACT","ITEMT","DOUKIT","FLAGT","ENTRYT","ROADT"],{ACT:e(d("DiceTable"),"Table").$new("\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868","1D6",["PC\u5168\u54e1\u3001\u968a\u5217\u30921D6\u3067\u6c7a\u3081\u308b\uff0812\uff1a\u524d\u5217\u300134\uff1a\u4e2d\u5217\u300156\uff1a\u5f8c\u5217\uff09","1\u30bf\u30fc\u30f3\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u5074\u306e\u307f\u884c\u52d5\u3059\u308b\u3002","\u3053\u306e\u6226\u95d8\u306e\u884c\u52d5\u9806\u304c\u3001PC\u2192\u30e2\u30f3\u30b9\u30bf\u30fc\u3001\u304b\u3089\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u2192PC\u306b\u5909\u308f\u308b\u3002","PC\u5168\u54e1\u3001\u30a2\u30a4\u30c6\u30e01\u3064\u3092\u9078\u3093\u3067\u5931\u3046\u3002","PC\u5168\u54e11D6\u3092\u632f\u308b\u3002\u3053\u306e\u6226\u95d8\u4e2d\u3001\u305d\u306e\u51fa\u76ee\u306f\u30ce\u30fc\u30d7\u30e9\u30f3\u306b\u306a\u308b\u3002","PC\u5168\u54e1\u3001Flag\u304c1\u5897\u52a0\u3059\u308b\u3002"]),ITEMT:e(d("DiceTable"),"Table").$new("\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868","2D6",["\u30ed\u30b1\u30c3\u30c8\u30e9\u30f3\u30c1\u30e3\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30de\u30ab\u30d6\u30ebLv+3\u3000\u56de\u6570\uff1a\u653b\u64831\u56de","\u30ad\u30fc\u30d4\u30c3\u30af\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002\u5224\u5b9a\u306e\u51fa\u76ee\u306e\u5408\u8a08+1\u3000\u56de\u6570\uff1a2\u56de","\u30ec\u30fc\u30c0\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ce\u30fc\u30d7\u30e9\u30f3\u3000\u88c5\u5099\u6642\u3001\u300c\u5371\u967a\u300d\u30921\u6e1b\u3089\u3059\u3053\u3068\u304c\u51fa\u6765\u308b\u3000\u56de\u6570\uff1a\u5371\u967a\u6e1b\u5c112\u56de","\u98df\u6599\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002Life3\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u5fdc\u6025\u30ad\u30c3\u30c8\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30e1\u30c7\u30a3\u30ab\u30ebLv+1\u3000\u56de\u6570\uff1a\u56de\u5fa93\u56de","\u5203\u7269\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30a2\u30bf\u30c3\u30afLv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u9283\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30b7\u30e5\u30fc\u30c8Lv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u30c9\u30e9\u30c3\u30b0\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u3044\u3064\u3067\u3082\u4f7f\u7528\u53ef\u3002Brave1\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u91d1\u5238\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30a2\u30d5\u30bf\u30fc\u30d7\u30ec\u30a4\u3067\u4f7f\u7528\u53ef\u3002\u7d4c\u9a13\u70b9+2\u3000\u56de\u6570\uff1a1\u56de","\u30d7\u30ed\u30c6\u30af\u30bf\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ac\u30fc\u30c9Lv+1\u3000\u56de\u6570\uff1a\u9632\u5fa15\u56de","\u30c8\u30df\u30fc\u30ac\u30f3\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30c1\u30a7\u30fc\u30f3Lv+5\u3000\u56de\u6570\uff1a\u653b\u64831\u56de"]),DOUKIT:e(d("DiceTable"),"Table").$new("\u52d5\u6a5f\u8868","1D6",["\u96b7\u5c5e\u3002\u4f55\u304b\u5f31\u307f\u306b\u4ed8\u3051\u8fbc\u307e\u308c\u3001\u5acc\u3005\u306a\u304c\u3089\u3082\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u308b\u3002\u5f8c\u308d\u3081\u305f\u3044\u4e8b\u3001\u501f\u91d1\u3001\u306a\u3069\u3002","\u732e\u8eab\u3002\u3053\u306e\u756a\u7d44\u306f\u8ab0\u304b\u306e\u305f\u3081\u306b\u51fa\u3066\u3044\u308b\u3002\u75c5\u6c17\u306e\u5bb6\u65cf\u3092\u6551\u3046\u305f\u3081\u3001\u53c2\u52a0\u8005\u306e\u4e00\u4eba\u304c\u604b\u4eba\u3067\u3042\u308b\u3001\u306a\u3069\u3002","\u6210\u884c\u3002\u671b\u3093\u3067\u3044\u306a\u3044\u306e\u306b\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\u8ab0\u304b\u304c\u52dd\u624b\u306b\u7533\u3057\u8fbc\u3093\u3060\u3001\u7d1b\u308c\u8fbc\u3093\u3067\u3057\u307e\u3063\u305f\u3001\u306a\u3069\u3002","\u6e07\u671b\u3002\u3068\u306b\u304b\u304f\u4f55\u304b\u3092\u6b32\u3057\u3066\u53c2\u52a0\u3057\u3066\u3044\u308b\u3002\u91d1\u3001\u30b9\u30ea\u30eb\u3001\u91d1\u3067\u624b\u306b\u5165\u308b\u3082\u306e\u3001\u306a\u3069\u3002","\u5947\u4eba\u3002\u597d\u304d\u597d\u3093\u3067\u3053\u306e\u756a\u7d44\u306b\u51fa\u3066\u3044\u308b\u3002\u6bba\u4eba\u7656\u3001\u30ca\u30eb\u30b7\u30b9\u30c8\u3001\u81ea\u6bba\u9858\u671b\u3001\u5316\u3051\u7269\u30de\u30cb\u30a2\u3001\u306a\u3069\u3002","\u4ed5\u4e8b\u3002\u3053\u306e\u756a\u7d44\u306b\u51fa\u308b\u306e\u306f\u4ed5\u4e8b\u3060\u304b\u3089\u3060\u3002\u8cde\u91d1\u7a3c\u304e\u3001\u82b8\u80fd\u4eba\u3001\u8a18\u8005\u3001\u756a\u7d44\u30b9\u30bf\u30c3\u30d5\u3001\u306a\u3069\u3002"]),FLAGT:e(d("DiceTable"),"Table").$new("\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868","1D6",["\u5e0c\u671b\u3002\u300c\u3053\u308c\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u4e00\u7dd2\u306b\u9152\u3067\u3082\u98f2\u3082\u3046\u3084\u300d\u300c\u3082\u3046\u4f55\u3082\u6016\u304f\u306a\u3044\u300d\u306a\u3069\u3002","\u671b\u90f7\u3002\u300c\u304f\u305d\u3063\u3001\u3001\u3001\u4ffa\u306b\u306f\u3001\u5e30\u308a\u3092\u5f85\u3064\u4eba\u304c\u3001\u3001\u3001\u3063\uff01\u300d\u300c\u3042\u3042\u3001\u6545\u90f7\u306e\u30de\u30eb\u30b2\u30ea\u30fc\u30bf\u3092\u3082\u3046\u4e00\u5ea6\u98df\u3079\u305f\u304b\u3063\u305f\u3001\u3001\u3001\u300d\u306a\u3069\u3002","\u72c2\u4e71\u3002\u300c\u304a\u524d\u3092\u3001\u6bba\u305b\u3070\u3001\u4ffa\u306f\u3001\u5104\u4e07\u9577\u8005\u306a\u3093\u3060\u3088\u3049\u3049\u3049\u304a\uff01\uff01\u300d\u300c\u30d2\u30cf\u30c3\u3001\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u3047\u3047\u3047\u3047\u300d\u306a\u3069\u3002","\u7d76\u671b\u3002\u300c\u3082\u3046\u3060\u3081\u3060\u3041\u3001\u3001\u3001\u304a\u3057\u307e\u3044\u3060\u3041\u3001\u3001\u3001\u300d\u300c\u304f\u3001\u304f\u308b\u306a\u3063\u3001\u304f\u308b\u306a\u3041\u3041\u3041\u3041\uff01\uff01\u300d\u306a\u3069\u3002","\u6162\u5fc3\u3002\u300c\u306a\u3093\u3060\u3001\u3053\u3093\u306a\u3084\u3064\u3001\u4ffa\u3060\u3051\u3067\u5341\u5206\u3060\u300d\u300c\u5927\u4e08\u592b\u3060\u3001\u554f\u984c\u306a\u3044\u300d\u306a\u3069\u3002","\u72a0\u7272\u3002\u300c\u3075\u3075\u3001\u4ffa\u306a\u3089\u5927\u4e08\u592b\u3060\u3001\u3001\u3001\u6c17\u306b\u3059\u308b\u306a\u300d\u300c\u304a\u524d\u3089\u4e0b\u304c\u308c\u3063\uff01\u3053\u3053\u306f\u4ffa\u306b\u4efb\u305b\u308d\uff01\u300d\u306a\u3069\u3002"]),ENTRYT:e(d("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868","1D6",["\u9045\u523b\u3002\u3082\u3068\u3082\u3068\u53c2\u52a0\u3059\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3060\u304c\u9045\u308c\u3066\u3057\u307e\u3063\u305f\u3002\u4eca\u304b\u3089\u3067\u3082\u8d70\u308c\u3068\u7121\u7406\u77e2\u7406\u53c2\u52a0\u3002","\u73fe\u4f4f\u3002\u3082\u3068\u3082\u3068\u3053\u3053\u306b\u4f4f\u3093\u3067\u3044\u305f\u3002\u4f55\uff1f\u756a\u7d44\uff1f\u3048\uff1f\u3042\u3001\u304a\u91d1\u3082\u3089\u3048\u3093\u306e\uff1f\u30a4\u30a4\u30cd\uff01","\u7a81\u767a\u3002\u3082\u3068\u3082\u3068\u8996\u8074\u8005\u3068\u3057\u3066\u30b9\u30bf\u30b8\u30aa\u306b\u5c45\u305f\u3093\u3060\u3051\u3069\u3001\u53f8\u4f1a\u306b\u3046\u307e\u304f\u4e57\u305b\u3089\u308c\u3066\u30fb\u30fb\u30fb","\u4e71\u5165\u3002\u4f55\u304b\u76ee\u7684\u304c\u3042\u3063\u3066\u4e71\u5165\u3057\u305f\u3002\u4eca\u56de\u306e\u30b9\u30c6\u30fc\u30b8\u304c\u7c21\u5358\u306b\u898b\u3048\u305f\u308a\u3001\u53c2\u52a0\u8005\u306b\u5927\u4e8b\u306a\u4eba\u304c\u3044\u305f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u795e\u96a0\u3002\u4eca\u56de\u3088\u308a\u524d\u306e\u756a\u7d44\u306b\u53c2\u52a0\u3057\u3066\u3044\u305f\u304c\u884c\u65b9\u4e0d\u660e\u30fb\u6b7b\u3093\u3060\u3068\u601d\u308f\u308c\u3066\u3044\u305f\u3002\u304c\u3002\u541b\u306f\u307e\u3060\u3053\u3053\u306b\u3044\u308b\u3002","\u8077\u54e1\u3002\u3042\u308c\u3001\u9003\u3052\u9045\u308c\u307e\u3057\u305f\uff1f\u3042\u3089\u3042\u3089\u3001\u5927\u5909\u3067\u3059\u306d\u3001\u3057\u3087\u3046\u304c\u306a\u3044\u304b\u3089\u53c2\u52a0\u8005\u3055\u3093\u3068\u4e00\u7dd2\u306b\u8d70\u3063\u3066\u304f\u3060\u3055\u3044\u3002"]),ROADT:e(d("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868","1D6",["\u6b7b\u7dda\u3002\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u3002Flag+1","\u602a\u6211\u3002\u75db\u3044\u3002Life-1","\u5931\u610f\u3002\u3069\u3046\u3057\u3066\u3053\u3046\u306a\u3063\u305f\u3002Brave-1\u3002\u6e1b\u3089\u305b\u306a\u3044\u5834\u5408\u3001Flag+1","\u7d1b\u5931\u3002\u3069\u3063\u304b\u3044\u3063\u305f\u3002Item\u3092\u3069\u308c\u304b1\u3064\u6368\u3066\u308b\u3002\u6368\u3066\u308c\u306a\u3044\u5834\u5408\u3001Flag+1","\u8ffd\u5c3e\u3002\u5f8c\u308d\uff01\u5f8c\u308d\u30fc\u3063\uff01\u53c2\u52a0\u958b\u59cb\u90e8\u5c4b\u306e\u5371\u967a+1","\u8ff7\u5b50\u3002\u3042\u308c\u3001\u3053\u3053\u3069\u3053\u3060\uff1f\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3092\u632f\u308b\u56de\u6570+2"])}).$freeze()),n.$register_prefix("RC","DDC",d("TABLES").$keys()),E(n,"$initialize",function g(S){var H=this;return delete g.$$p,N(H,W(H,"initialize",g,!1,!0),"initialize",[S],null),H.sort_add_dice=!0,H.d66_sort_type=e(d("D66SortType"),"ASC")},1),n.$private(),E(n,"$eval_game_system_specific_command",function(S){var H,l,D=this;return z(H=z(l=D.$check_roll(S))?l:D.$ddc_table(S))?H:D.$roll_tables(S,e(D.$class(),"TABLES"))},1),E(n,"$check_roll",function(S){var D,H,k=m,J=m,ie=m,te=m,ce=m,ne=m,Q=m,R=m,x=m;return k=e(d("Command"),"Parser").$new(/RC\d+/,s(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(m).$parse(S),z(k)?(H=this.randomizer.$roll_barabara(2,6),D=F(H),te=j(J=null==D[0]?m:D[0],ie=null==D[1]?m:D[1]),ce=j(j(J,ie),k.$modify_number()),ne=k.$command()["$[]"](B(2,-1,!1)).$to_i(),G(k.$modify_number(),0)&&(Q="\u3000\u4fee\u6b63\u5024\uff1a"+k.$modify_number()),x=[["\u5224\u5b9a\u3000\u96e3\u6613\u5ea6\uff1a"+ne+Q,"\u51fa\u76ee\uff1a"+J+"\u3001"+ie,(R=K(J,ie)?d("Result").$critical("\u30be\u30ed\u76ee\uff01\u3010Critical\u3011"):K(te,7)?d("Result").$fumble("\u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u304c\u8868\u88cf\uff01\u3010Fumble\u3011"):z(U(ce,ne))?d("Result").$success(ce+"\u3001\u96e3\u6613\u5ea6\u4ee5\u4e0a\uff01\u3010Success\u3011"):d("Result").$failure(ce+"\u3001\u96e3\u6613\u5ea6\u672a\u6e80\uff01\u3010Miss\u3011")).$text()].$join(" \uff1e ")],C(R,"text=",o(x)),a(x.length,1),R):m},1),E(n,"$ddc_table",function(S){var D,H,V=m,k=m,J=m,ie=m,te=m;return G(S,"DDC")?m:(H=this.randomizer.$roll_barabara(2,6),H=[V=null==(D=F(H))[0]?m:D[0],k=null==D[1]?m:D[1]].$sort(),"\u96e3\u6613\u5ea6\u6c7a\u5b9a \uff1e \u51fa\u76ee\uff1a"+V+"\u3001"+k+" \uff1e "+(ie=null==(D=F(H))[1]?m:D[1])+"-"+(J=null==D[0]?m:D[0])+"="+(te=a(ie,J))+" \uff1e \u96e3\u6613\u5ea6"+j(5,te))},1)})}}]);