(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1114],{229:(ne,re,P)=>{P(9993),Opal.queue(function($){var J,V,ee,d,f,C,R,q,X,j,p=[],e=$.nil,H=$.$$$,A=$.module,I=$.klass,a=$.const_set,x=$.eqeq,i=$.truthy,D=$.rb_le,o=$.rb_minus,b=$.send,h=$.to_a,z=$.neqeq,B=$.rb_ge,F=$.def,L=$.rb_divide,T=$.not,S=$.range,K=$.hash2,y=$.rb_lt,N=$.rb_plus;return J=p,V=j=[A(p[0],"BCDice")].concat(J),q=[A(j[0],"GameSystem")].concat(V),X=$.$r(q),ee=q,f=[d=I(q[0],X("Base"),"ChaosFlare")].concat(ee),C=$.$r(f),(R=d.$$prototype).randomizer=R.cmd=e,a(f[0],"ID","ChaosFlare"),a(f[0],"NAME","\u30ab\u30aa\u30b9\u30d5\u30ec\u30a2"),a(f[0],"SORT_KEY","\u304b\u304a\u3059\u3075\u308c\u3042"),a(f[0],"HELP_MESSAGE","\u5224\u5b9a\nCF\n  \u66f8\u5f0f: [\u30c0\u30a4\u30b9\u306e\u6570]CF[\u4fee\u6b63\u5024][@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024][#\u30d5\u30a1\u30f3\u30d6\u30eb\u5024][>=\u76ee\u6a19\u5024]\n    CF\u4ee5\u5916\u306f\u5168\u3066\u7701\u7565\u53ef\u80fd\n  \u4f8b:\n  - CF 2D6,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502412,\u30d5\u30a1\u30f3\u30d6\u30eb\u50242\u3067\u5224\u5b9a\n  - CF+10@10 \u4fee\u6b63\u5024+10,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3067\u5224\u5b9a\n  - CF+10#3 \u4fee\u6b63\u5024+10,\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u5224\u5b9a\n  - CF+10>=10 \u76ee\u6a19\u5024\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u5dee\u5206\u5024\u3082\u51fa\u529b\u3059\u308b\n  - 3CF+10@10#3>=10 3D6\u3067\u306e\u5224\u5b9a\n  - CF@9#3+8>=10\n\n2D6\n  \u30d5\u30a1\u30f3\u30d6\u30eb\u50242\u3067\u5224\u5b9a\u3059\u308b\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306e\u5224\u5b9a\u306f\u884c\u308f\u308c\u306a\u3044\u3002\n  \u76ee\u6a19\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u5834\u5408\u3001\u5dee\u5206\u5024\u3092\u51fa\u529b\u3059\u308b\u3002\n  - 2D6+4>=10\n\n\u5404\u7a2e\u8868\n  FT: \u56e0\u7e01\u8868\n  FTx: \u6570\u5024\u3092\u6307\u5b9a\u3059\u308b\u3068\u56e0\u679c\u8868\u306e\u5024\u3092\u51fa\u529b\u3059\u308b\n  - FT -> 11\u304b\u308966\u306e\u9593\u3067\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\n  - FT23 -> 23\u306e\u9805\u76ee\u3092\u51fa\u529b\n  - FT0\n  - FT7\n"),d.$register_prefix("\\d*CF","FT"),F(d,"$result_2d6",function(u,n,l,_,s){var t=e,c=e,r=e;return x(_,">=")?(t=[],c=C("Result").$new(),i(D(n,2))&&(u=o(u,20),t.$push("\u30d5\u30a1\u30f3\u30d6\u30eb(-20)"),b(c,"fumble=",h(r=[!0])),o(r.length,1)),z(s,"?")&&(i(B(u,s))?(t.$push("\u6210\u529f"),b(c,"success=",h(r=[!0])),o(r.length,1)):(t.$push("\u5931\u6557"),b(c,"failure=",h(r=[!0])),o(r.length,1)),z(o(u,s),0)&&t.$push("\u5dee\u5206\u5024"+o(u,s))),i(t["$empty?"]())?C("Result").$nothing():(r=[t.$join(" \uff1e ")],b(c,"text=",h(r)),o(r.length,1),c)):e},5),F(d,"$eval_game_system_specific_command",function(u){return i(u["$start_with?"]("FT"))?this.$roll_fate_table(u):this.$cf_roll(u)},1),d.$private(),F(d,"$roll_fate_table",function(u){var c,r,l=e,_=e,s=e,t=e;if(l=/^FT(\d+)?/.$match(u),i(l["$[]"](1))){if(_=l["$[]"](1).$to_i(),i([0,7]["$include?"](_)))return"\u56e0\u679c\u8868("+_+") \uff1e "+C("FATE_TABLE")["$[]"](_)["$[]"](0);if(s=L(_,10).$to_i(),t=_["$%"](10),T(S(1,6,!1)["$include?"](s))||T(S(1,6,!1)["$include?"](t)))return e}else s=this.randomizer.$roll_once(6),t=this.randomizer.$roll_once(6);return c=s,r=o(L(t,2).$to_i(),1),"\u56e0\u679c\u8868("+s+t+") \uff1e "+C("FATE_TABLE")["$[]"](c)["$[]"](r)},1),F(d,"$cf_roll",function(u){var n=this,l=e,_=e,s=e,t=e,c=e,r=e,E=e,g=e,G=e,w=e,k=e,m=e;return l=H(C("Command"),"Parser").$new(/\d*CF/,K(["round_type"],{round_type:n.$round_type()})).$enable_critical().$enable_fumble(),n.cmd=l.$parse(u),!i(n.cmd)||(_=x(n.cmd.$command(),"CF")?2:n.cmd.$command().$to_i(),s=i(t=n.cmd.$critical())?t:12,c=i(t=n.cmd.$fumble())?t:2,b(n.cmd,"dollar=",h(r=[e])),o(r.length,1),i(y(_,0))||T([">=",e]["$include?"](n.cmd.$cmp_op())))?e:(g=(E=n.randomizer.$roll_barabara(_,6)).$sum(),G=E.$join(","),w=B(g,s),k=D(g,c),m=i(w)?30:i(k)?-20:g,m=N(m,n.cmd.$modify_number()),["("+n.cmd.$to_s("after_modify_number")+")",g+"["+G+"]",m.$to_s(),i(y(m,0))?"0":e,i(w)?"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb":e,i(k)?"\u30d5\u30a1\u30f3\u30d6\u30eb":e,i(n.cmd.$target_number())?"\u5dee\u5206\u5024 "+n.$difference(m):e].$compact().$join(" \uff1e "))},1),F(d,"$difference",function(u){return i(y(u,0))?this.cmd.$target_number()["$-@"]():o(u,this.cmd.$target_number())},1),a(f[0],"FATE_TABLE",[["\u8150\u308c\u7e01"],["\u7d14\u611b","\u89aa\u8fd1\u611f","\u5e87\u8b77"],["\u4fe1\u983c","\u611f\u670d","\u5171\u611f"],["\u53cb\u60c5","\u5c0a\u656c","\u6155\u60c5"],["\u597d\u6575\u624b","\u671f\u5f85","\u501f\u308a"],["\u8208\u5473","\u618e\u60aa","\u60b2\u3057\u307f"],["\u6050\u6016","\u57f7\u7740","\u5229\u7528"],["\u4efb\u610f"]].$freeze())})}}]);