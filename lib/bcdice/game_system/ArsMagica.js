(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5734],{3655:(re,te,Q)=>{Q(9993),Opal.modules["bcdice/normalize"]=function(r){var B,z,p,y=[],q=r.nil,e=r.module,c=r.eqeqeq,k=r.def,v=r.eqeq;return B=y,p=[e(y[0],"BCDice")].concat(B),(z=e(p[0],"Normalize")).$module_function(),k(z,"$comparison_operator",function(l){var s;return c(/<=|=</,s=l)?"<=":c(/>=|=>/,s)?">=":c(/<>|!=|=!/,s)?"!=":c(/</,s)?"<":c(/>/,s)?">":c(/=/,s)?"==":q},1),k(z,"$target_number",function(l){return v(l,"?")?l:l.$to_i()},1)},Opal.modules["bcdice/format"]=function(r){var p,l,s,F,E,z,y=[],q=r.nil,e=r.module,c=r.eqeqeq,k=r.def,v=r.truthy,i=r.eqeq,B=r.rb_gt;return p=y,l=z=[e(y[0],"BCDice")].concat(p),F=[s=e(z[0],"Format")].concat(l),E=r.$r(F),s.$module_function(),k(s,"$comparison_operator",function(h){var w;return c("==",w=h)?"=":c("!=",w)?"<>":c(E("Symbol"),w)?h.$to_s():q},1),k(s,"$modifier",function(h){return v(h["$nil?"]())?q:i(h,0)?"":v(B(h,0))?"+"+h:h.$to_s()},1)},Opal.queue(function(r){var h,V,ee,S,C,D,M,j,X,T,y=r.top,q=[],e=r.nil,c=r.module,k=r.klass,v=r.const_set,i=r.truthy,B=r.rb_minus,g=r.eqeq,p=r.send,n=r.rb_plus,z=r.neqeq,A=r.rb_gt,l=r.rb_lt,s=r.rb_times,F=r.rb_ge,E=r.def;return y.$require("bcdice/normalize"),y.$require("bcdice/format"),h=q,V=T=[c(q[0],"BCDice")].concat(h),j=[c(T[0],"GameSystem")].concat(V),X=r.$r(j),ee=j,C=[S=k(j[0],X("Base"),"ArsMagica")].concat(ee),D=r.$r(C),(M=S.$$prototype).target_numner=M.botch=M.modify_number=M.cmp_op=M.randomizer=e,v(C[0],"ID","ArsMagica"),v(C[0],"NAME","\u30a2\u30eb\u30b9\u30de\u30ae\u30ab"),v(C[0],"SORT_KEY","\u3042\u308b\u3059\u307e\u304d\u304b"),v(C[0],"HELP_MESSAGE",'\u30fb\u30b9\u30c8\u30ec\u30b9\u30c0\u30a4\u30b9\u3000(ArSx+y)\n\u3000"ArS(\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9)+(\u4fee\u6b63)"\u3067\u3059\u3002\u5224\u5b9a\u306b\u3082\u4f7f\u3048\u307e\u3059\u3002R\u30b3\u30de\u30f3\u30c9(1R10+y[m])\u306b\u8aad\u66ff\u3092\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9\u3068\u4fee\u6b63\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002(\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9\u3092\u7701\u7565\u3059\u308b\u30681\u3068\u3057\u3066\u6271\u3044\u307e\u3059)\n\u3000botch\u30c0\u30a4\u30b9\u306e0\u306e\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306f\u3001\u6570\u3048\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\uff08\u6ce8\u610f\uff01\uff09 botch\u306e\u5224\u65ad\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306b\u306f\u3001\u305d\u306e\u30c0\u30a4\u30b9\u3092\u542b\u3081\u3066\u30ed\u30fc\u30eb\u3057\u305f\u5168\u3066\u306e\u30c0\u30a4\u30b9\u3092[]\u306e\u4e2d\u306b\u4e26\u3079\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u4f8b) (1R10[5]) \uff1e 0[0,1,8,0,8,1] \uff1e Botch!\n\u3000\u3000\u6700\u521d\u306e0\u304c\u5224\u65ad\u57fa\u6e96\u3067\u3001\u305d\u306e\u53f3\u50745\u3064\u304c\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9\u3067\u3059\u30021*2,8*2,0*1\u306a\u306e\u30671botch\u3068\u3044\u3046\u8a33\u3067\u3059\u3002\n'),S.$register_prefix("ArS","1R10"),E(S,"$eval_game_system_specific_command",function(d){var a,u,m,$,o=this,N=e,f=e,I=e,b=e,t=e,R=e,K=e,x=e;if(!i(o.$parse_ars(d))&&!i(o.$parse_1r10(d)))return e;if(a=i(u=o.target_numner)?u:0,m=o.botch,$=o.modify_number,N=1,f=0,I=o.cmp_op,b=B(o.randomizer.$roll_once(10),1),t="("+o.$expr()+") \uff1e ",g(b,0))R=0,K=[],p(m,"times",[],function Y(J){var P,L=null==Y.$$s?this:Y.$$s;return null==L.randomizer&&(L.randomizer=e),null==J&&(J=e),P=B(L.randomizer.$roll_once(10),1),g(P,0)&&(R=n(R,1)),K.$push(P)},{$$arity:1,$$s:o}),t=n(t,"0["+b+","+K.$join(",")+"]"),z(R,0)?(t=i(A(R,1))?n(t," \uff1e "+R+"Botch!"):n(t," \uff1e Botch!"),I=e):(t=i(A($,0))?n(t,"+"+$+" \uff1e "+$):i(l($,0))?n(t,$+" \uff1e "+$):n(t," \uff1e 0"),f=$);else if(g(b,1)){for(x="";g(b,1);)N=s(N,2),b=o.randomizer.$roll_once(10),x=n(x,b+",");f=s(b,N),x=x.$sub(/,$/,""),t=n(t,f.$to_s()),t=n(t,"[1,"+x+"]"),f=n(f,$),i(A($,0))?t=n(t,"+"+$+" \uff1e "+f):i(l($,0))&&(t=n(t,$+" \uff1e "+f))}else f=n(b,$),t=i(A($,0))?n(t,b+"+"+$+" \uff1e "+f):i(l($,0))?n(t,""+b+$+" \uff1e "+f):n(t,f.$to_s());return g(I,">=")&&(t=n(t,i(F(f,a))?" \uff1e \u6210\u529f":" \uff1e \u5931\u6557")),t.$to_s()},1),S.$private(),E(S,"$parse_ars",function(d){var _,o,a=this,u=e,m=e;return u=/^ArS(\d+)?((?:[+-]-?\d+)+)?(?:([>=]+)(\d+))?$/i.$match(d),!!i(u)&&(a.botch=i(m=(_=u["$[]"](1))===e||null==_?e:p(_,"to_i",[]))?m:1,a.modify_number=D("ArithmeticEvaluator").$eval(i(m=u["$[]"](2))?m:""),a.cmp_op=D("Normalize").$comparison_operator(u["$[]"](3)),a.target_numner=(o=u["$[]"](4))===e||null==o?e:p(o,"to_i",[]),!0)},1),E(S,"$parse_1r10",function(d){var _,o,a=this,u=e,m=e;return u=/^1R10((?:[+-]-?\d+)+)?(?:\[(\d+)\])?(?:([>=]+)(\d+))?$/i.$match(d),!!i(u)&&(a.modify_number=D("ArithmeticEvaluator").$eval(i(m=u["$[]"](1))?m:""),a.botch=i(m=(_=u["$[]"](2))===e||null==_?e:p(_,"to_i",[]))?m:1,a.cmp_op=D("Normalize").$comparison_operator(u["$[]"](3)),a.target_numner=(o=u["$[]"](4))===e||null==o?e:p(o,"to_i",[]),!0)},1),E(S,"$expr",function(){var d=this;return"1R10"+D("Format").$modifier(d.modify_number)+"["+d.botch+"]"+d.cmp_op+d.target_numner},0)})}}]);