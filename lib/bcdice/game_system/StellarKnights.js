(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[628],{5849:(te,re,O)=>{O(9993),Opal.modules["bcdice/dice_table/table"]=function(t){var _,W,j,v,A,z,y,w,K,R=[],b=t.nil,n=t.module,a=t.klass,M=t.hash2,x=t.defs,Y=t.truthy,k=t.def,I=t.rb_minus;return _=R,W=K=[n(R[0],"BCDice")].concat(_),j=w=[n(K[0],"DiceTable")].concat(W),A=[v=a(w[0],null,"Table")].concat(j),z=t.$r(A),(y=v.$$prototype).times=y.sides=y.name=y.items=b,x(v,"$from_i18n",function(g,$){var T=b;return T=z("I18n").$t(g,M(["locale"],{locale:$})),this.$new(T["$[]"]("name"),T["$[]"]("type"),T["$[]"]("items"))},2),k(v,"$initialize",function(g,$,o){var T=this,c=b;return T.name=g,T.items=o.$freeze(),c=/(\d+)D(\d+)/i.$match($),Y(c)||T.$raise(z("ArgumentError"),"Unexpected table type: "+$),T.times=c["$[]"](1).$to_i(),T.sides=c["$[]"](2).$to_i()},3),k(v,"$roll",function(g){var o,$=this;return o=g.$roll_sum($.times,$.sides),$.$choice(o)},1),k(v,"$choice",function(g){var o,$=this;return o=I(g,$.times),z("RollResult").$new($.name,g,$.items["$[]"](o))},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(t){var L,p,v,A,z,y,G,H,u,R=[],b=t.nil,n=t.module,a=t.klass,M=t.hash2,x=t.defs,Y=t.def,k=t.rb_plus,I=t.rb_times,m=t.rb_minus;return L=R,p=u=[n(R[0],"BCDice")].concat(L),v=H=[n(u[0],"DiceTable")].concat(p),z=[A=a(H[0],null,"D66GridTable")].concat(v),y=t.$r(z),(G=A.$$prototype).name=G.items=b,x(A,"$from_i18n",function($,o){var c=b;return c=y("I18n").$t($,M(["locale","raise"],{locale:o,raise:!0})),this.$new(c["$[]"]("name"),c["$[]"]("items"))},2),Y(A,"$initialize",function($,o){return this.name=$,this.items=o.$freeze()},2),Y(A,"$roll",function($){var T,c,N,U,J;return T=$.$roll_once(6),c=$.$roll_once(6),N=k(I(T,10),c),U=m(T,1),J=m(c,1),y("RollResult").$new(this.name,N,this.items["$[]"](U)["$[]"](J))},1)},Opal.queue(function(t){var y,o,ee,h,s,e,d,C,q,c,N,g,R=t.top,b=[],n=t.nil,a=t.$$$,M=t.module,x=t.klass,Y=t.const_set,k=t.send2,I=t.find_super,m=t.def,_=t.truthy,L=t.eqeq,K=t.rb_plus,u=t.send,W=t.rb_ge,p=t.hash2,w=t.rb_gt,H=t.to_a,P=t.rb_minus,j=t.range,v=t.to_ary,A=t.rb_le;return R.$require("bcdice/dice_table/table"),R.$require("bcdice/dice_table/d66_grid_table"),y=b,o=g=[M(b[0],"BCDice")].concat(y),c=[M(g[0],"GameSystem")].concat(o),N=t.$r(c),ee=c,C=[d=x(c[0],N("Base"),"StellarKnights")].concat(ee),q=t.$r(C),d.$$prototype.randomizer=n,Y(C[0],"ID","StellarKnights"),Y(C[0],"NAME","\u9280\u5263\u306e\u30b9\u30c6\u30e9\u30ca\u30a4\u30c4"),Y(C[0],"SORT_KEY","\u304d\u3093\u3051\u3093\u306e\u3059\u3066\u3089\u306a\u3044\u3064"),Y(C[0],"HELP_MESSAGE","\u30fb\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000nSK[d][,k>l,...]\n[]\u5185\u306f\u7701\u7565\u53ef\u80fd\u3002\nn: \u30c0\u30a4\u30b9\u6570\u3001d: \u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u306b\u304a\u3051\u308b\u5bfe\u8c61\u306e\u9632\u5fa1\u529b\u3001k, l: \u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u304ck\u306a\u3089\u3070l\u306b\u5909\u66f4\uff08\u30a2\u30de\u30e9\u30f3\u30b5\u30b9\u306e\u30b9\u30ad\u30eb\u300c\u59cb\u307e\u308a\u306e\u90e8\u5c4b\u300d\u7528\uff09\nd\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u3092\u632f\u3063\u305f\u7d50\u679c\u306e\u307f\u8868\u793a\u3002\uff08nSK\u306fnB6\u3068\u540c\u3058\uff09\n\n4SK: \u30c0\u30a4\u30b9\u30924\u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n4+2SK: \u30c0\u30a4\u30b9\u30924+2 (=6) \u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n5/2SK: \u30c0\u30a4\u30b9\u30925\u500b\u306e\u534a\u5206 (=2) \u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n(5+3)/2SK: \u30c0\u30a4\u30b9\u3092(5+3)\u500b\u306e\u534a\u5206 (=4) \u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n5SK3: \u3010\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff1a5\u30c0\u30a4\u30b9\u3011\u3001\u5bfe\u8c61\u306e\u9632\u5fa1\u529b\u30923\u3068\u3057\u3066\u6210\u529f\u6570\u3092\u8868\u793a\n3SK,1>6: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u308a\u3001\u51fa\u76ee\u304c1\u306e\u30c0\u30a4\u30b9\u3092\u5168\u30666\u306b\u5909\u66f4\u3057\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n6SK4,1>6,2>6: \u3010\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff1a6\u30c0\u30a4\u30b9\u3011\u3001\u51fa\u76ee\u304c1\u30682\u306e\u30c0\u30a4\u30b9\u3092\u5168\u30666\u306b\u5909\u66f4\u3001\u5bfe\u8c61\u306e\u9632\u5fa1\u529b\u30924\u3068\u3057\u3066\u6210\u529f\u6570\u3092\u8868\u793a\n\n\u30fb\u57fa\u672c\nTT\uff1a\u304a\u984c\u8868\nSTA    \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868A\uff1a\u6642\u9593 (Situation Table A)\nSTB    \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B\uff1a\u5834\u6240 (ST B)\nSTB2[n]\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B \u305d\u306e2\uff1a\u5b66\u5712\u7de8 (ST B 2)\n\u3000n: 1(\u30a2\u30fc\u30bb\u30eb\u30c8\u30ec\u30a4), 2(\u30a4\u30c7\u30a2\u30b0\u30ed\u30ea\u30a2), 3(\u30b7\u30c8\u30e9), 4(\u30d5\u30a3\u30ed\u30bd\u30d5\u30a3\u30a2), 5(\u8056\u30a2\u30fc\u30b8\u30a7\u30c6\u30a3\u30a2), 6(SoA)\nSTC    \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868C\uff1a\u8a71\u984c (ST C)\nALLS   \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\u5168\u3066\u3092\u4e00\u62ec\u3067\uff08\u5b66\u5712\u7de8\u9664\u304f\uff09\nGAT\uff1a\u6240\u5c5e\u7d44\u7e54\u6c7a\u5b9a (Gakuen Table)\nHOT\uff1a\u5e0c\u671b\u8868 (Hope Table)\nDET\uff1a\u7d76\u671b\u8868 (Despair Table)\nWIT\uff1a\u9858\u3044\u4e8b\u8868 (Wish Table)\nYST\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868 (Your Story Table)\nYSTA\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u7570\u4e16\u754c (YST Another World)\nPET\uff1a\u6027\u683c\u8868 (Personality Table)\n    \u6027\u683c\u8868\u30922\u56de\u632f\u308a\u3001\u6027\u683c\u3092\u6c7a\u5b9a\u3059\u308b\n\n\u30fb\u9727\u3068\u685c\u306e\u30de\u30eb\u30b8\u30ca\u30ea\u30a2\nYSTM\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30de\u30eb\u30b8\u30ca\u30ea\u30a2\u4e16\u754c (YST Marginalia)\nSTM\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\uff1a\u30de\u30eb\u30b8\u30ca\u30ea\u30a2\u4e16\u754c (ST Marginalia)\nYSTL\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u624b\u7d19\u4e16\u754c (YST Letter)\nYSTR\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30ea\u30b3\u30ec\u30af\u30c8\u30fb\u30c9\u30fc\u30eb (YST Recollect-doll)\nSTBR\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B\uff1a\u5834\u6240\uff08\u30ea\u30b3\u30ec\u30af\u30c8\u30fb\u30c9\u30fc\u30eb\uff09 (ST B Recollect-doll)\nSTCR\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868C\uff1a\u30ea\u30b3\u30ec\u30af\u30c8 (ST C Recollect)\nSTBS\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B\uff1a\u30b7\u30c8\u30e9\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0 (ST B Sut Tu Real)\nSTE\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\uff1a\u30a8\u30af\u30ea\u30d7\u30b9\u5c02\u7528 (ST Eclipse)\n\n\u30fb\u7d2b\u5f3e\u306e\u30aa\u30eb\u30c8\u30ea\u30f4\u30fc\u30c8\nFT\uff1a\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u8868 (Fragment Table)\n    \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u8868\u3092\uff15\u56de\u632f\u308b\nFTx\uff1a\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u8868\u3092x\u56de\u632f\u308b\nYSTB\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30d6\u30ea\u30f3\u30ac\u30fc (YST Bringer)\nYSTF\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30d5\u30a9\u30fc\u30b8 (YST Forge)\nSTAL\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\uff1a\u30aa\u30eb\u30c8\u30ea\u30f4\u30fc\u30c8 (ST Alt-Levoot)\n"),m(d,"$initialize",function h(l){var e=this;return delete h.$$p,k(e,I(e,"initialize",h,!1,!0),"initialize",[l],null),e.sort_barabara_dice=!0,e.d66_sort_type=a(q("D66SortType"),"NO_SORT")},1),m(d,"$eval_game_system_specific_command",function(l){var s=this,e=n,i=n,r=n,D=n,S=n;return l=l.$upcase(),_(e=a(s.$class(),"TABLES")["$[]"](l))?e.$roll(s.randomizer):_(i=/([()+\/\d]+)SK(\d)?((,\d>\d)+)?/.$match(l))?(r=q("Arithmetic").$eval(i["$[]"](1),a(q("RoundType"),"FLOOR")),_(r["$nil?"]())?n:s.$resolute_action(r,_(D=i["$[]"](2))?i["$[]"](2).$to_i():D,i["$[]"](3))):L(l,"STB2")?s.$roll_all_situation_b2_tables():L(l,"ALLS")?s.$roll_all_situation_tables():L(l,"PET")?s.$roll_personality_table():_(i=/FT(\d+)?/.$match(l))?(S=(_(D=i["$[]"](1))?D:5).$to_i(),s.$roll_fragment_table(S)):n},1),d.$private(),m(d,"$resolute_action",function(l,s,e){var D,i=this,r=n,S=n,f=n,F=n,V=n,X=n;return D=(r=i.randomizer.$roll_barabara(l,6).$sort()).$join(","),S="("+i.$remake_command(l,s,e)+") \uff1e "+D,_(r["$empty?"]())?K(S,i.$translate("StellarKnights.SK.no_dice_error")):(f=i.$parse_dice_change_rules(e),u(f,"each",[],function(B){return null==B&&(B=n),u(r,"map!",[],function(Q){return null==Q&&(Q=n),L(Q,B["$[]"]("from"))?B["$[]"]("to"):Q},1)},1),_(f["$empty?"]())||(r["$sort!"](),S=K(S," \uff1e ["+r.$join(",")+"]")),_(s["$nil?"]())?(F=!1,V=!1):(X=u(r,"count",[],function(B){return null==B&&(B=n),W(B,s)},1),S=K(S,K(" \uff1e ",i.$translate("StellarKnights.SK.success_num",p(["success_num"],{success_num:X})))),F=w(X,0),V=F["$!"]()),u(q("Result").$new(S),"tap",[],function(B){var E=n;return null==B&&(B=n),u(B,"success=",H(E=[F])),P(E.length,1),u(B,"failure=",H(E=[V])),E[P(E.length,1)]},1))},3),m(d,"$remake_command",function(l,s,e){var i=n;return i=l+"SK",_(s["$nil?"]())||(i=K(i,s.$to_s())),_(e["$nil?"]())||(i=K(i,e)),i},3),m(d,"$parse_dice_change_rules",function(l){return _(l["$nil?"]())?[]:(l=l["$[]"](j(1,-1,!1)),u(l.$split(","),"map",[],function(e){var i=n;return null==e&&(e=n),i=u(e.$split(">"),"map",[],"to_i".$to_proc()),p(["from","to"],{from:i["$[]"](0),to:i["$[]"](1)})},1))},1),m(d,"$roll_all_situation_b2_tables",function(){return u(j(1,6,!1),"map",[],function s(e){var i=null==s.$$s?this:s.$$s;return null==i.randomizer&&(i.randomizer=n),null==e&&(e=n),a(i.$class(),"TABLES")["$[]"]("STB2"+e).$roll(i.randomizer)},{$$arity:1,$$s:this}).$join("\n")},0),m(d,"$roll_all_situation_tables",function(){return u(["STA","STB","STC"],"map",[],function s(e){var i=null==s.$$s?this:s.$$s;return null==i.randomizer&&(i.randomizer=n),null==e&&(e=n),a(i.$class(),"TABLES")["$[]"](e).$roll(i.randomizer)},{$$arity:1,$$s:this}).$join("\n")},0),m(d,"$roll_personality_table",function(){var l,s,i,r,D,S,e=this;return s=e.$get_table_by_d66(e.$translate("StellarKnights.PET.items")),i=null==(l=v(s))[0]?n:l[0],r=null==l[1]?n:l[1],s=e.$get_table_by_d66(e.$translate("StellarKnights.PET.items")),D=null==(l=v(s))[0]?n:l[0],S=null==l[1]?n:l[1],e.$translate("StellarKnights.PET.name")+"("+r+","+S+") \uff1e "+e.$translate("StellarKnights.PET.result",p(["value1","value2"],{value1:i,value2:D}))},0),m(d,"$roll_fragment_table",function(l){var s=this,e=n,i=n,r=n;return _(A(l,0))?n:(e=u(q("Array"),"new",[l],function S(){var f=null==S.$$s?this:S.$$s;return f.$get_table_by_d66(f.$translate("StellarKnights.FT.items"))},{$$arity:0,$$s:s}),i=u(e,"map",[],function(f){return null==f&&(f=n),f["$[]"](0)},1),r=u(e,"map",[],function(f){return null==f&&(f=n),f["$[]"](1)},1),s.$translate("StellarKnights.FT.name")+"("+r.$join(",")+") \uff1e "+i.$join(s.$translate("StellarKnights.FT.sep")))},1),s=[h=t.get_singleton_class(d)].concat(C),e=t.$r(s),h.$private(),m(h,"$translate_tables",function(r){return p(["TT","STA","STB","STB21","STB22","STB23","STB24","STB25","STB26","STC","GAT","HOT","DET","WIT","YST","YSTA","YSTM","STM","YSTL","YSTR","STBR","STCR","STBS","STE","YSTB","YSTF","STAL"],{TT:a(e("DiceTable"),"D66GridTable").$from_i18n("StellarKnights.tables.TT",r),STA:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STA",r),STB:a(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.STB",r),STB21:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB21",r),STB22:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB22",r),STB23:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB23",r),STB24:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB24",r),STB25:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB25",r),STB26:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB26",r),STC:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STC",r),GAT:a(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.GAT",r),HOT:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.HOT",r),DET:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.DET",r),WIT:a(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.WIT",r),YST:a(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.YST",r),YSTA:a(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.YSTA",r),YSTM:a(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.YSTM",r),STM:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STM",r),YSTL:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTL",r),YSTR:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTR",r),STBR:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STBR",r),STCR:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STCR",r),STBS:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STBS",r),STE:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STE",r),YSTB:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTB",r),YSTF:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTF",r),STAL:a(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STAL",r)})},1),Y(C[0],"TABLES",d.$translate_tables("ja_jp")),d.$register_prefix("[()+\\/\\d]+SK","STB2","ALLS","PET","FT",q("TABLES").$keys())})}}]);