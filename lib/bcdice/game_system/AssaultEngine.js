(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4339],{3898:($e,re,D)=>{D(9993),Opal.queue(function($){var N,Q,Z,o,_,f,y,V,C,w=[],r=$.nil,z=$.$$$,S=$.module,G=$.klass,a=$.const_set,L=$.send2,M=$.find_super,l=$.def,T=$.hash2,u=$.truthy,q=$.rb_ge,E=$.rb_plus,v=$.rb_times,A=$.rb_divide,j=$.send,F=$.to_a,H=$.rb_minus,I=$.rb_le;return N=w,Q=C=[S(w[0],"BCDice")].concat(N),y=[S(C[0],"GameSystem")].concat(Q),V=$.$r(y),Z=y,_=[o=G(y[0],V("Base"),"AssaultEngine")].concat(Z),f=$.$r(_),o.$$prototype.randomizer=r,a(_[0],"ID","AssaultEngine"),a(_[0],"NAME","\u30a2\u30b5\u30eb\u30c8\u30a8\u30f3\u30b8\u30f3"),a(_[0],"SORT_KEY","\u3042\u3055\u308b\u3068\u3048\u3093\u3057\u3093"),a(_[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a AEt (t\u76ee\u6a19\u5024)\n    \u4f8b: AE45 \uff08\u76ee\u6a19\u502445\uff09\n\u30fb\u30ea\u30ed\u30fc\u30eb nAEt (n\u30ed\u30fc\u30eb\u524d\u306e\u5024\u3001t\u76ee\u6a19\u5024)\n    \u4f8b: 76AE45 (\u76ee\u6a19\u502445\u3067\u300176\u3092\u632f\u308a\u76f4\u3059)\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\uff08t\u76ee\u6a19\u5024\uff09 \u30a8\u30cd\u30df\u30fc\u30d6\u30c3\u30afP11\n    \u4f8b: AES45 \uff08\u76ee\u6a19\u502445\u3001\u30b9\u30ef\u30c3\u30d7\u8868\u793a\u3042\u308a\uff09\n"),o.$register_prefix("\\d*AE"),l(o,"$initialize",function c(i){var n=this;return delete c.$$p,L(n,M(n,"initialize",c,!1,!0),"initialize",[i],null),n.round_type=z(f("RoundType"),"FLOOR")},1),l(o,"$eval_game_system_specific_command",function(i){var e=this,n=r,t=r,s=r,P=r,k=r,x=r,d=r,m=r,b=r,p=r,R=r;return n=z(f("Command"),"Parser").$new(/AES?/,T(["round_type"],{round_type:e.$round_type()})).$enable_prefix_number().$has_suffix_number().$parse(i),u(n)?(t=n.$suffix_number(),u(q(t,100))&&(t=99),u(n.$command()["$include?"]("AES"))?(s=e.randomizer.$roll_once(100)["$%"](100),P=E(v(s["$%"](10),10),A(s,10).$floor()),k=e.$judge(t,s),x=e.$judge(t,P),d="(AES"+e.$format00(t)+") \uff1e "+k.$text()+" / \u30b9\u30ef\u30c3\u30d7"+x.$text(),e.$check_result(k,x,d)):u(n.$prefix_number()["$nil?"]())?(s=e.randomizer.$roll_once(100)["$%"](100),j(e.$judge(t,s),"tap",[],function B(g){var h;return null==g&&(g=r),h=["(AE"+(null==B.$$s?this:B.$$s).$format00(t)+") \uff1e "+g.$text()],j(g,"text=",F(h)),h[H(h.length,1)]},{$$arity:1,$$s:e})):(m=n.$prefix_number(),b=e.randomizer.$roll_once(10)["$%"](10),p=e.$judge(t,E(v(A(m,10).$floor(),10),b)),R=e.$judge(t,E(m["$%"](10),v(b,10))),d="("+e.$format00(m)+"AE"+e.$format00(t)+") \uff1e "+b+" \uff1e "+p.$text()+" / "+R.$text(),e.$check_result(p,R,d))):r},1),l(o,"$format00",function(i){return this.$format("%02d",i)},1),l(o,"$check_result",function(i,e,n){return u(i["$critical?"]())||u(e["$critical?"]())?f("Result").$critical(n):u(i["$success?"]())||u(e["$success?"]())?f("Result").$success(n):u(i["$fumble?"]())&&u(e["$fumble?"]())?f("Result").$fumble(n):f("Result").$failure(n)},3),l(o,"$judge",function(i,e){var t,s;return t=A(e,10).$floor()["$=="](e["$%"](10)),s=this.$format00(e),u(I(e,i))?u(t)?f("Result").$critical("("+s+")\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"):f("Result").$success("("+s+")\u6210\u529f"):u(t)?f("Result").$fumble("("+s+")\u30d5\u30a1\u30f3\u30d6\u30eb"):f("Result").$failure("("+s+")\u5931\u6557")},2)})}}]);