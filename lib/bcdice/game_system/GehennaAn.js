(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5105],{1647:(ee,te,D)=>{D(9993),Opal.queue(function(t){var V,J,Z,a,h,n,q,U,S,T=[],e=t.nil,B=t.module,L=t.klass,p=t.const_set,M=t.send2,j=t.find_super,g=t.def,b=t.send,u=t.truthy,z=t.neqeq,R=t.rb_lt,H=t.rb_ge,d=t.rb_plus,v=t.rb_gt,I=t.rb_times,E=t.rb_minus,K=t.eqeq,N=t.rb_divide;return V=T,J=S=[B(T[0],"BCDice")].concat(V),q=[B(S[0],"GameSystem")].concat(J),U=t.$r(q),Z=q,h=[a=L(q[0],U("Base"),"GehennaAn")].concat(Z),n=t.$r(h),a.$$prototype.randomizer=e,p(h[0],"ID","GehennaAn"),p(h[0],"NAME","\u30b2\u30d8\u30ca\u30fb\u30a2\u30ca\u30b9\u30bf\u30b7\u30b9"),p(h[0],"SORT_KEY","\u3051\u3078\u306a\u3042\u306a\u3059\u305f\u3057\u3059"),p(h[0],"HELP_MESSAGE","\u6226\u95d8\u5224\u5b9a\u3068\u901a\u5e38\u5224\u5b9a\u306b\u5bfe\u5fdc\u3002\u5e78\u904b\u306e\u52a9\u3051\u3001\u9023\u6483\u5897\u52a0\u5024(\u6226\u95d8\u5224\u5b9a)\u3001\u95d8\u6280\u30c1\u30c3\u30c8(\u6226\u95d8\u5224\u5b9a)\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u6226\u95d8\u5224\u5b9a\u3000(nGAt+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u76ee\u6a19\u5024t\u3001\u4fee\u6b63\u5024m\u3067\u6226\u95d8\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u5e78\u904b\u306e\u52a9\u3051\u3001\u9023\u6483\u5897\u52a0\u5024\u3001\u95d8\u6280\u30c1\u30c3\u30c8\u3092\u81ea\u52d5\u51e6\u7406\u3057\u307e\u3059\u3002\n\u30fb\u901a\u5e38\u5224\u5b9a\u3000(nGt+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u76ee\u6a19\u5024t\u3001\u4fee\u6b63\u5024m\u3067\u901a\u5e38\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u5e78\u904b\u306e\u52a9\u3051\u3092\u81ea\u52d5\u51e6\u7406\u3057\u307e\u3059\u3002(\u9023\u6483\u5897\u52a0\u5024\u3001\u95d8\u6280\u30c1\u30c3\u30c8\u3092\u8868\u793a\u6291\u5236\u3057\u307e\u3059)\n"),a.$register_prefix("\\d+G\\d+","\\d+GA\\d+","\\d+R6"),g(a,"$initialize",function f(s){var r=this;return delete f.$$p,M(r,j(r,"initialize",f,!1,!0),"initialize",[s],null),r.sort_add_dice=!0,r.sort_barabara_dice=!0},1),a.$private(),g(a,"$replace_text",function(s){return b(b(b(b(s,"gsub",[/(\d+)GA(\d+)([+\-][+\-\d]+)/],function(){return n("Regexp").$last_match(1)+"R6"+n("Regexp").$last_match(3)+">="+n("Regexp").$last_match(2)+"[1]"},0),"gsub",[/(\d+)GA(\d+)/],function(){return n("Regexp").$last_match(1)+"R6>="+n("Regexp").$last_match(2)+"[1]"},0),"gsub",[/(\d+)G(\d+)([+\-][+\-\d]+)/],function(){return n("Regexp").$last_match(1)+"R6"+n("Regexp").$last_match(3)+">="+n("Regexp").$last_match(2)+"[0]"},0),"gsub",[/(\d+)G(\d+)/],function(){return n("Regexp").$last_match(1)+"R6>="+n("Regexp").$last_match(2)+"[0]"},0)},1),a.$public(),g(a,"$eval_game_system_specific_command",function(s){var $=this,r=e,o=e,_=e,w=e,l=e,A=e,c=e,C=e,G=e,y=e,i=e,x=e,k=e;return s=$.$replace_text(s),u(/(^|\s)S?((\d+)[rR]6([+\-\d]+)?([>=]+(\d+))(\[(\d)\]))(\s|$)/i["$=~"](s))?(s=n("Regexp").$last_match(2),r=n("Regexp").$last_match(3).$to_i(),o=n("Regexp").$last_match(4),_=n("Regexp").$last_match(6).$to_i(),w=n("Regexp").$last_match(8).$to_i(),l=n("ArithmeticEvaluator").$eval(o),A=$.randomizer.$roll_barabara(r,6).$sort(),c=A.$sum(),C=A.$join(","),G="",y=!0,c=0,b(A,"each",[],function(m){return null==m&&(m=e),z(G,"")?(z(G,m)||u(R(m,_)))&&(y=!1):G=m,u(H(m,_))?c=d(c,1):e},1),u(y)&&u(v(r,1))&&(c=I(c,2)),i=c+"["+C+"]",x=d(c,l),u(R(x,0))&&(x=0),k=E(r,c),u(R(k,0))&&(k=0),u(v(l,0))?i=d(i,"+"+l):u(R(l,0))&&(i=d(i,l.$to_s())),i=u(/[^\d\[\]]+/["$=~"](i))?"("+s+") \uff1e "+i+" \uff1e \u6210\u529f"+x+"\u3001\u5931\u6557"+k:"("+s+") \uff1e "+i,i=d(i,$.$getAnastasisBonusText(w,x))):e},1),a.$private(),g(a,"$getAnastasisBonusText",function(s,$){var o=e,_=e;return K(s,0)?"":(o=N(E($,1),2).$to_i(),u(v(o,7))&&(o=7),_="",u(v(o,0))&&(_=d(_,"\u9023\u6483[+"+o+"]/"))," \uff1e "+(_=d(_,"\u95d8\u6280["+this.$getTougiBonus($)+"]")))},2),g(a,"$getTougiBonus",function(s){return this.$get_table_by_number(s,[[6,"1"],[13,"2"],[18,"3"],[22,"4"],[99,"5"]])},1)})}}]);