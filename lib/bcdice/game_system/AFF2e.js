(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7327],{7676:(ne,se,T)=>{T(9993),Opal.queue(function(t){var V,U,ee,i,v,x,q,X,S,y=[],r=t.nil,E=t.module,B=t.klass,b=t.const_set,a=t.def,R=t.send,o=t.rb_plus,l=t.eqeqeq,m=t.truthy,z=t.rb_le,H=t.rb_ge,M=t.rb_lt,Y=t.rb_gt,K=t.neqeq,L=t.rb_minus;return V=y,U=S=[E(y[0],"BCDice")].concat(V),q=[E(S[0],"GameSystem")].concat(U),X=t.$r(q),ee=q,v=[i=B(q[0],X("Base"),"AFF2e")].concat(ee),x=t.$r(v),i.$$prototype.randomizer=r,b(v[0],"ID","AFF2e"),b(v[0],"NAME","ADVANCED FIGHTING FANTASY 2nd Edition"),b(v[0],"SORT_KEY","\u3042\u3068\u306f\u3093\u3059\u3068\u3075\u3042\u3044\u3066\u3044\u3093\u304f\u3075\u3042\u3093\u305f\u3057\u30442"),b(v[0],"HELP_MESSAGE","\u5bfe\u6297\u306a\u3057\u30ed\u30fc\u30eb\tFF{\u76ee\u6a19\u5024}+{\u88dc\u6b63}\n\u5bfe\u6297\u30ed\u30fc\u30eb\tFR{\u80fd\u529b\u5024}+{\u88dc\u6b63}\n\u6b66\u5668\u30ed\u30fc\u30eb\tFD[2,3,3,3,3,3,4]+{\u88dc\u6b63}\n\u9632\u5177\u30ed\u30fc\u30eb\tFD[0,0,0,0,1+1,1+1,2+2]+{\u88dc\u6b63}\n"),i.$register_prefix("FF.+","FR.+","FD.+"),a(i,"$explicit_sign",function(n){return this.$format("%+d",n)},1),a(i,"$eval_term",function(n){var e=r;return e=0,R(n,"scan",[/[+-]?\d+/],function(s){return null==s&&(s=r),e=o(e,s.$to_i())},1),e},1),a(i,"$parentheses",function(n){return o(o("(",n),")")},1),a(i,"$successful_or_failed",function(n,e){var u;return l(2,u=n)?m(z(e,1))?"\u6210\u529f\uff08\u5927\u6210\u529f\u3067\u306f\u306a\u3044\uff09":"\u5927\u6210\u529f\uff01":l(12,u)?m(H(e,12))?"\u5931\u6557\uff08\u5927\u5931\u6557\u3067\u306f\u306a\u3044\uff09":"\u5927\u5931\u6557\uff01":m(z(n,e))?"\u6210\u529f":"\u5931\u6557"},2),a(i,"$critical",function(n){var e;return l(2,e=n)?"\u30d5\u30a1\u30f3\u30d6\u30eb\uff01":l(12,e)?"\u5f37\u6253\uff01":r},1),a(i,"$clamp",function(n,e,u){return m(M(n,e))?e:m(Y(n,u))?u:n},3),a(i,"$eval_game_system_specific_command",function(n){var u,e=this,s=r,c=r,D=r,d=r,p=r,$=r,g=r,w=r,F=r,_=r,C=r,k=r,G=r,N=r;if(l(/^FF/,u=n))c=(s=x("Regexp").$last_match()).$post_match(),d="2D6<="+(D=e.$eval_term(c)),g=($=(p=e.randomizer.$roll_barabara(2,6)).$sum())+"["+p.$join(",")+"]",w=e.$successful_or_failed($,D),F=[e.$parentheses(d),g,w];else if(l(/^FR/,u))c=(s=x("Regexp").$last_match()).$post_match(),_=e.$eval_term(c),d="2D6"+e.$explicit_sign(_),g=($=(p=e.randomizer.$roll_barabara(2,6)).$sum())+"["+p.$join(",")+"]"+e.$explicit_sign(_),C=e.$critical($),F=[e.$parentheses(d),g,C,o($,_)].$compact();else if(l(/^FD/,u)){if(c=(s=x("Regexp").$last_match()).$post_match(),s=/^\[(.+)\]/.$match(c),!m(s))return"\u30c0\u30e1\u30fc\u30b8\u30b9\u30ed\u30c3\u30c8\u306f\u5fc5\u9808\u3067\u3059\u3002";if(c=s.$post_match(),k=R(s["$[]"](1).$split(","),"map",[],function I(A){return null==A&&(A=r),(null==I.$$s?this:I.$$s).$eval_term(A)},{$$arity:1,$$s:e}),K(k.$size(),7))return"\u30c0\u30e1\u30fc\u30b8\u30b9\u30ed\u30c3\u30c8\u306e\u9577\u3055\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002";_=e.$eval_term(c),d="1D6"+e.$explicit_sign(_),g=""+($=e.randomizer.$roll_once(6))+e.$explicit_sign(_),G=e.$clamp(o($,_),1,7),N=k["$[]"](L(G,1)),F=[e.$parentheses(d),g,o($,_),N+"\u30c0\u30e1\u30fc\u30b8"]}return F.$join(" \uff1e ")},1)})}}]);