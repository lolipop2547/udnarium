(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2213],{1293:(te,re,M)=>{M(9993),Opal.queue(function(r){var Y,U,O,o,h,D,w,X,A,E=[],e=r.nil,F=r.module,N=r.klass,y=r.const_set,s=r.truthy,L=r.rb_ge,j=r.to_ary,g=r.def,z=r.rb_gt,H=r.neqeq,R=r.rb_plus,T=r.eqeq,C=r.rb_le,I=r.rb_times,K=r.send;return Y=E,U=A=[F(E[0],"BCDice")].concat(Y),w=[F(A[0],"GameSystem")].concat(U),X=r.$r(w),O=w,h=[o=N(w[0],X("Base"),"RecordOfSteam")].concat(O),D=r.$r(h),o.$$prototype.randomizer=e,y(h[0],"ID","RecordOfSteam"),y(h[0],"NAME","Record of Steam"),y(h[0],"SORT_KEY","\u308c\u3053\u304a\u3068\u304a\u3075\u3059\u3061\u3044\u3080"),y(h[0],"HELP_MESSAGE","2S2@1\nRecordOfSteam : (2S2@1) \uff1e 1,2,3,4 \uff1e 1\u56de\u8ee2 \uff1e \u6210\u529f\u65702\n\n4S3@2\nRecordOfSteam : (4S3@2) \uff1e 2,1,2,4,4,4,2,3,4,5,6,6 \uff1e 4\u56de\u8ee2 \uff1e \u6210\u529f\u65705\n"),o.$register_prefix("\\d+S\\d+"),g(o,"$eval_game_system_specific_command",function(t){var u,m,c=this,k=e,b=e,n=e,i=e,d=e,x=e,l=e,q=e,v=e,_=e;return s(/(\d+)[sS](\d+)(@(\d+))?/i["$=~"](t))?(k=D("Regexp").$last_match(1).$to_i(),b=D("Regexp").$last_match(2).$to_i(),n=D("Regexp").$last_match(4),n=(n=s(i=n)?i:1).$to_i(),s(L(k,150))||s(L(n,3))?"(\u591a\u5206)\u7121\u9650\u500b\u306a\u306e\u3067\u632f\u308c\u307e\u305b\u3093\uff01 \u30e4\u30e1\u30c6\u30af\u30c0\u30b5\u30a4\u3001(\u30d7\u30ed\u30bb\u30b9\u304c)\u6b7b\u3093\u3067\u3057\u307e\u3044\u307e\u3059\u3063":(m=c.$getDiceRollResult(k,b,n,n),d=null==(u=j(m))[1]?e:u[1],x=null==u[3]?e:u[3],l=null==u[4]?e:u[4],q="("+t+") \uff1e "+(null==u[0]?e:u[0]),v=c.$getRoundCountText(null==u[2]?e:u[2]),_=c.$getSuccessText(d),""+q+v+c.$getSpecialText(x)+_+c.$getFumbleText(l))):"1"},1),g(o,"$getDiceRollResult",function(t,u,m,c){var b=this,n=e,i=e,$=e,f=e,d=e,a=e,x=e,l=e,q=e;for(n=0,i=0,$="",f=0,d=!1,a=0,x=!1;s(z(t,0));){if(q=(l=b.randomizer.$roll_barabara(t,6)).$join(","),H($,"")&&($=R($,",")),$=R($,q),T(l.$uniq().$length(),1)&&T(i,0)&&(s(C(l.$uniq().$first(),c))?d=!0:T(l.$uniq().$first(),6)&&(x=!0)),b.$debug("diceList",l),s(d))return f=1,[$,n=I(t,3),i,f,a];if(s(x))return[$,n,i,f,a=1];t=0,K(l,"map",[],function v(_){var S=null==v.$$s?this:v.$$s;return null==_&&(_=e),S.$debug("diceValue",_),S.$debug("criticalValue",m),S.$debug("specialValue",c),s(C(_,m))&&(t=R(t,2),i=R(i,1)),s(C(_,u))?n=R(n,1):e},{$$arity:1,$$s:b})}return[$,n,i,f,a]},4),g(o,"$getRoundCountText",function(t){return s(C(t,0))?"":" \uff1e "+t+"\u56de\u8ee2"},1),g(o,"$getSuccessText",function(t){return s(z(t,0))?" \uff1e \u6210\u529f\u6570"+t:" \uff1e \u5931\u6557"},1),g(o,"$getSpecialText",function(t){return T(t,1)?" \uff1e \u30b9\u30da\u30b7\u30e3\u30eb":e},1),g(o,"$getFumbleText",function(t){return T(t,1)?" \uff1e \u30d5\u30a1\u30f3\u30d6\u30eb":e},1)})}}]);