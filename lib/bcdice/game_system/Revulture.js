(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9886],{573:(X,Z,S)=>{S(9993),Opal.queue(function($){var M,N,U,o,m,A,K,Y,G,C=[],n=$.nil,p=$.$$$,q=$.module,j=$.klass,b=$.const_set,r=$.truthy,f=$.def,E=$.rb_le,k=$.rb_plus,_=$.send,h=$.rb_gt,L=$.to_a,w=$.rb_minus,B=$.hash2,z=$.eqeqeq,D=$.rb_ge;return M=C,N=G=[q(C[0],"BCDice")].concat(M),K=[q(G[0],"GameSystem")].concat(N),Y=$.$r(K),U=K,m=[o=j(K[0],Y("Base"),"Revulture")].concat(U),A=$.$r(m),o.$$prototype.randomizer=n,b(m[0],"ID","Revulture"),b(m[0],"NAME","\u5149\u7815\u306e\u30ea\u30f4\u30a1\u30eb\u30c1\u30e3\u30fc"),b(m[0],"SORT_KEY","\u3053\u3046\u3055\u3044\u306e\u308a\u3046\u3042\u308b\u3061\u3084\u3042"),b(m[0],"HELP_MESSAGE","\u25a0\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff08 xAT, xATK, xATTACK \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\n\u4f8b\uff09 3AT, 4ATK, 5+6ATTACK, 15/2AT\n\n\u25a1\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000\u76ee\u6a19\u5024\u3064\u304d\uff08 xAT<=y, xATK<=y, xATTACK<=y \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\ny: \u76ee\u6a19\u5024\uff08 1 \u4ee5\u4e0a 6 \u4ee5\u4e0b\u3002\u52a0\u7b97 + \u3092\u4f7f\u7528\u53ef\u80fd\uff09\n\u4f8b\uff09 3AT<=4, 3AT<=2+1\n\n\u25a1\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000\u76ee\u6a19\u5024\uff06\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u3064\u304d\uff08 xAT<=y[>=a:+b], xATK<=y[>=a:+b], xATTACK<=y[z] \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\ny: \u76ee\u6a19\u5024\uff08 1 \u4ee5\u4e0a 6 \u4ee5\u4e0b\u3002\u52a0\u7b97 + \u3092\u4f7f\u7528\u53ef\u80fd\uff09\nz: \u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u306e\u898f\u5247\uff08\u8a73\u7d30\u306f\u5f8c\u8ff0\uff09\uff08\u203b\u8907\u6570\u540c\u6642\u306b\u6307\u5b9a\u53ef\u80fd\uff09\n\n\u25bd\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u306e\u898f\u5247 [a:+b]\na: \u30d2\u30c3\u30c8\u6570\u304c a \u306a\u3089\n\u3000=a\u3000\uff08\u30d2\u30c3\u30c8\u6570\u304c a \u306b\u7b49\u3057\u3044\uff09\n\u3000>=a\u3000\uff08\u30d2\u30c3\u30c8\u6570\u304c a \u4ee5\u4e0a\uff09\nb: \u30c0\u30e1\u30fc\u30b8\u3092 b \u70b9\u8ffd\u52a0\n\n\u4f8b\uff09 3AT<=4[>=2:+3] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp056\u300c\u30b0\u30ec\u30f3\u30b0\u30e9\u30f3\u30c8AR\u300d\n\u4f8b\uff09 2AT<=4[=1:+5][>=2:+8] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp067\u300c\u30d5\u30a1\u30fc\u30dc\u30eb\u30fb\u30c9\u30e9\u30b4\u30f3\u30d6\u30ec\u30b9\u300d\n"),b(m[0],"ATTACK_ROLL_REG",/^(\d+([+\/]\d+)*)?AT(TACK|K)?(<=([1-6](\+\d)*))?((\[>?=\d+:\+\d+\])+)?/i.$freeze()),o.$register_prefix("\\d+([+\\/]\\d+)*AT"),f(o,"$eval_game_system_specific_command",function(u){var t=n;return r(t=A("ATTACK_ROLL_REG").$match(u))?this.$roll_attack(t["$[]"](1),t["$[]"](5),t["$[]"](7)):n},1),o.$private(),f(o,"$roll_attack",function(u,i,t){var s,y,e=this,a=n,x=n,v=n,T=n,R=n,l=n;return s=A("Arithmetic").$eval(u,p(A("RoundType"),"FLOOR")),r(i)&&(a=A("Arithmetic").$eval(i,p(A("RoundType"),"FLOOR")).$clamp(1,6)),y=e.$make_command_text(s,a,t),r(E(s,0))?y+" \uff1e \u30c0\u30a4\u30b9\u6570\u304c 0 \u3067\u3059":r(a["$nil?"]())&&r(t)?y+" \uff1e \u76ee\u6a19\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u3092\u7b97\u51fa\u3067\u304d\u307e\u305b\u3093":(x=e.randomizer.$roll_barabara(s,6).$sort(),v=x.$count(1),r(a)&&(T=k(_(x,"count",[],function(c){return null==c&&(c=n),E(c,a)},1),v)),R=e.$calc_damage(T,t),(l=[])["$<<"](y),l["$<<"](x.$join(",")),r(h(v,0))&&l["$<<"]("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb "+v),r(T)&&l["$<<"]("\u30d2\u30c3\u30c8\u6570 "+T),r(R)&&l["$<<"]("\u30c0\u30e1\u30fc\u30b8 "+R),_(A("Result").$new(l.$join(" \uff1e ")),"tap",[],function(c){var d=n;return null==c&&(c=n),r(T)&&(d=[h(T,0)],_(c,"condition=",L(d)),w(d.length,1)),d=[h(v,0)],_(c,"critical=",L(d)),d[w(d.length,1)]},1))},3),f(o,"$make_command_text",function(u,i,t){var e=n;return e=u+"attack",r(i)&&(e=k(e,"<="+i)),r(t)&&(e=k(e,t)),"("+e+")"},3),f(o,"$calc_damage",function(u,i){var e=n;return r(i)?(e=u,_(this.$parse_additional_damage_rules(i),"each",[],function(a){return null==a&&(a=n),r(a["$[]"]("condition").$call(u))?e=k(e,a["$[]"]("additinal_damage")):n},1),e):n},2),f(o,"$parse_additional_damage_rules",function(u){return _(u.$scan(/\[(>?=)(\d+):\+(\d+)\]/),"map",[],function t(e){return null==e&&(e=n),B(["condition","additinal_damage"],{condition:(null==t.$$s?this:t.$$s).$make_additional_damage_condition(e["$[]"](0),e["$[]"](1).$to_i()),additinal_damage:e["$[]"](2).$to_i()})},{$$arity:1,$$s:this})},1),f(o,"$make_additional_damage_condition",function(u,i){var e;return z("=",e=u)?_(this,"lambda",[],function(a){return null==a&&(a=n),a["$=="](i)},1):z(">=",e)?_(this,"lambda",[],function(a){return null==a&&(a=n),D(a,i)},1):n},2)})}}]);