(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4238],{6681:(U,V,H)=>{H(9993),Opal.queue(function(a){var N,M,Y,s,g,S,z,I,w,k=[],r=a.nil,T=a.module,A=a.klass,b=a.const_set,_=a.truthy,d=a.def,v=a.rb_plus,j=a.eqeq,Q=a.rb_ge,h=a.rb_minus,C=a.send,E=a.rb_gt,R=a.eqeqeq,q=a.rb_le;return N=k,M=w=[T(k[0],"BCDice")].concat(N),z=[T(w[0],"GameSystem")].concat(M),I=a.$r(z),Y=z,g=[s=A(z[0],I("Base"),"NSSQ")].concat(Y),S=a.$r(g),s.$$prototype.randomizer=r,b(g[0],"ID","NSSQ"),b(g[0],"NAME","SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG"),b(g[0],"SORT_KEY","\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG"),b(g[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xSQ\xb1y)\n  xD6\u306e\u5224\u5b9a\u30023\u3064\u4ee5\u4e0a\u632f\u3063\u305f\u3068\u304d\u3001\u51fa\u76ee\u306e\u9ad8\u30442\u3064\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u3082\u8a08\u7b97\u3057\u307e\u3059\u3002\n  \xb1y: y\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb (xDR(C)(+)y)\n  xD6\u306e\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002C\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30a2\u30c3\u30d7\u72b6\u614b\u3067\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002+\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u6642\u306e\u30c0\u30a4\u30b9\u304c8\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\n  \u4f8b) 5DR3 5DRC4 5DRC+4\n\n\u25a0 \u56de\u5fa9\u30ed\u30fc\u30eb (xHRy)\n  xD6\u306e\u56de\u5fa9\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u304c\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\u7701\u7565\u3057\u305f\u5834\u54083\u3002\n  \u4f8b) 2HR 10HR2\n\n\u25a0 \u63a1\u53d6\u30ed\u30fc\u30eb (TC\xb1z,SC\xb1z,GC\xb1z)\n  \u3061\u3087\u3063\u3068(T)\u3001\u305d\u3053\u305d\u3053(S)\u3001\u304c\u3063\u3064\u308a(G)\u63a1\u53d6\u63a1\u6398\u4f10\u63a1\u3092\u884c\u3046\u3002\n  z: z\u306b\u8ffd\u52a0\u3067\u30ed\u30fc\u30eb\u3059\u308b\u56de\u6570\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  \u4f8b) TC SC+1 GC-1\n"),s.$register_prefix("\\d+SQ[\\+\\-\\d]*","\\d+DR(C)?(\\+)?\\d+","[TSG]C","\\d+HR\\d*"),d(s,"$eval_game_system_specific_command",function($){var e,t,i,n=this;return _(e=_(t=_(i=n.$roll_sq($))?i:n.$damage_roll($))?t:n.$heal_roll($))?e:n.$collecting_roll($)},1),s.$private(),d(s,"$roll_sq",function($){var e=r,t=r,i=r,u=r,l=r,o=r,c=r;return e=/(\d+)SQ([+\-\d]+)?/i.$match($),_(e)?(t=e["$[]"](1).$to_i(),i=S("ArithmeticEvaluator").$eval(e["$[]"](2)),l=(u=this.randomizer.$roll_barabara(t,6)).$sort().$reverse().$take(2),o=v(l.$sum(),i),c=j(l,[6,6])?" \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01":j(l,[1,1])?" \u30d5\u30a1\u30f3\u30d6\u30eb\uff01":r,["("+$+")","["+u.$join(",")+"]"+S("Format").$modifier(i),o+"["+l.$join(",")+"]"+c].$join(" \uff1e ")):r},1),d(s,"$damage_roll",function($){var n=this,e=r,t=r,i=r,u=r,l=r,o=r,c=r,f=r;return e=/(\d+)DR(C)?(\+)?(\d+)/i.$match($),_(e)?(t=e["$[]"](1).$to_i(),i=e["$[]"](2)["$nil?"]()["$!"](),u=e["$[]"](3)["$nil?"]()["$!"](),l=e["$[]"](4).$to_i(),c="("+$+") \uff1e ["+(o=n.randomizer.$roll_barabara(t,6)).$join(",")+"]"+l+" \uff1e "+n.$damage(o,l)+"\u30c0\u30e1\u30fc\u30b8",f=_(i)?1:2,_(Q(h(o.$count(6),o.$count(1)),f))&&(c=v(c," \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01\n"),c=v(c,n.$additional_damage_roll(u,l))),c):r},1),d(s,"$additional_damage_roll",function($,n){var t,i=r;return"("+(t=_($)?8:4)+"DR"+n+") \uff1e ["+(i=this.randomizer.$roll_barabara(t,6)).$join(",")+"]"+n+" \uff1e "+this.$damage(i,n)+"\u30c0\u30e1\u30fc\u30b8"},2),d(s,"$heal_roll",function($){var n,t=r,i=r,u=r,l=r,o=r;return t=/^(\d+)HR(\d+)?$/i.$match($),_(t)?(i=t["$[]"](1).$to_i(),u=_(l=(n=t["$[]"](2))===r||null==n?r:C(n,"to_i",[]))?l:3,"("+$+") \uff1e ["+(o=this.randomizer.$roll_barabara(i,6)).$join(",")+"]"+u+" \uff1e "+this.$damage(o,u)+"\u56de\u5fa9"):r},1),d(s,"$damage",function($,n){return C($,"count",[],function(t){return null==t&&(t=r),E(t,n)},1)},2),d(s,"$collecting_roll",function($){var e=r,t=r,i=r,u=r,l=r,o=r;return e=/([TSG])C([+\-\d]+)?/i.$match($),!_(e)||(t=e["$[]"](1),i=S("ArithmeticEvaluator").$eval(e["$[]"](2)),u=R("T",l=t)?3:R("S",l)?4:R("G",l)?5:r,o=v(h(u,2),i),_(q(o,0)))?r:C(S("Array"),"new",[o],function f(D){var G,y=null==f.$$s?this:f.$$s,x=r;return null==y.randomizer&&(y.randomizer=r),null==D&&(D=r),G=(x=y.randomizer.$roll_barabara(2,6)).$sum(),"("+$+") \uff1e "+G+"["+x.$join(",")+"]: "+y.$result_collecting(D,G,u)},{$$arity:1,$$s:this}).$join("\n")},1),d(s,"$result_collecting",function($,n,e){return _(q(n,e))&&_(E(h(e,2),$))?"\uff01\u3042\u3042\u3063\u3068\uff01":_(q(h(e,2),$))?"\u6210\u529f\uff08\u8ffd\u52a0\u5206\uff09":"\u6210\u529f"},3)})}}]);