(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7115],{6409:(O,ee,x)=>{x(9993),Opal.queue(function(n){var Y,R,Q,o,c,C,N,A,q,V=[],e=n.nil,H=n.module,L=n.klass,a=n.const_set,u=n.truthy,S=n.to_ary,T=n.send,v=n.rb_plus,k=n.rb_gt,y=n.rb_ge,B=n.rb_lt,j=n.eqeq,m=n.def,p=n.rb_times,w=n.rb_divide;return Y=V,R=q=[H(V[0],"BCDice")].concat(Y),N=[H(q[0],"GameSystem")].concat(R),A=n.$r(N),Q=N,c=[o=L(N[0],A("Base"),"VampireTheMasquerade5th")].concat(Q),C=n.$r(c),o.$$prototype.randomizer=e,a(c[0],"ID","VampireTheMasquerade5th"),a(c[0],"NAME","Vampire: The Masquerade 5th Edition"),a(c[0],"SORT_KEY","\u3046\u3042\u3093\u306f\u3044\u3042\u3055\u307e\u3059\u304b\u308c\u3048\u30685"),a(c[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nVMFx+x)\n  \u6ce8\u610f\uff1a\u96e3\u6613\u5ea6\u306f\u5fc5\u8981\u6210\u529f\u6570\u3092\u8868\u3059\n\n  \u96e3\u6613\u5ea6\u6307\u5b9a\uff1a\u5224\u5b9a\u6210\u529f\u3068\u5931\u6557\u3001Critical\u5224\u5b9a\u3001\n             \uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Messy Critical\u3068Bestial Failure\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n  \u4f8b) (\u96e3\u6613\u5ea6)VMF(\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb)+(Hunger\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)VMF(\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb)\n\n  \u96e3\u6613\u5ea6\u7701\u7565\uff1a\u5224\u5b9a\u5931\u6557\u3001Critical\u3001\uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Bestial Failure\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n              \u5224\u5b9a\u6210\u529f\u3001Messy Critical\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n  \u4f8b) VMF(\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb)+(Hunger\u30c0\u30a4\u30b9)\n      VMF(\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb)\n\n  \u96e3\u6613\u5ea60\u6307\u5b9a\uff1a\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n  \u4f8b) 0VMF(\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb)+(Hunger\u30c0\u30a4\u30b9)\n      0VMF(\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb)\n\n"),a(c[0],"DIFFICULTY_INDEX",1),a(c[0],"DICE_POOL_INDEX",3),a(c[0],"HUNGER_DICE_INDEX",5),a(c[0],"NOT_CHECK_SUCCESS",-1),o.$register_prefix("\\d*VMF"),m(o,"$eval_game_system_specific_command",function(s){var r,t,d,l=this,$=e,f=e,D=e,_=e,E=e,i=e,F=e,U=e,X=e,I=e,M=e,b=e;return $=/^(\d+)?(VMF)(\d+)(\+(\d+))?/.$match(s),u($)?(f=$["$[]"](C("DICE_POOL_INDEX")).$to_i(),t=l.$make_dice_roll(f),D=null==(r=S(t))[0]?e:r[0],_=null==r[1]?e:r[1],E=null==r[2]?e:r[2],i="("+f+"D10",F=(r=$["$[]"](C("HUNGER_DICE_INDEX")))===e||null==r?e:T(r,"to_i",[]),u(F)?(d=l.$make_dice_roll(F),U=null==(t=S(d))[0]?e:t[0],X=null==t[1]?e:t[1],M=null==t[3]?e:t[3],E=v(E,I=null==t[2]?e:t[2]),_=v(_,X),i=i+"+"+F+"D10) \uff1e ["+D+"]+["+U+"] "):(I=0,M=0,i=i+") \uff1e ["+D+"] "),_=v(_,l.$get_critical_success(E)),b=u($["$[]"](C("DIFFICULTY_INDEX")))?$["$[]"](C("DIFFICULTY_INDEX")).$to_i():C("NOT_CHECK_SUCCESS"),i=i+" \u6210\u529f\u6570="+_,u(k(b,0))?i=i+" \u96e3\u6613\u5ea6="+b+(u(y(_,b))?l.$get_success_result(y(E,2),I):l.$get_fail_result(M)):u(B(b,0))&&(i=""+i+(j(_,0)?l.$get_fail_result(M):"")),i):""},1),m(o,"$get_critical_success",function(s){return p(w(s,2).$to_i(),2)},1),m(o,"$make_dice_roll",function(s){var t=e;return[(t=this.randomizer.$roll_barabara(s,10)).$join(","),T(t,"count",[],function(_){return null==_&&(_=e),y(_,6)},1),t.$count(10),t.$count(1)]},1),m(o,"$get_success_result",function(s,r){var t;return t="\uff1a\u5224\u5b9a\u6210\u529f!",u(k(r,0))&&u(s)?t+" [Messy Critical]":u(s)?t+" [Critical Win]":t},2),m(o,"$get_fail_result",function(s){var r;return r="\uff1a\u5224\u5b9a\u5931\u6557!",u(k(s,0))?r+" [Bestial Failure]":r},1)})}}]);