(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5620],{8686:(Q,W,z)=>{z(9993),Opal.queue(function(r){var V,p,Y,_,h,o,x,H,y,L=[],e=r.nil,w=r.module,U=r.klass,v=r.const_set,B=r.eqeqeq,D=r.def,m=r.send,M=r.rb_le,A=r.rb_minus,I=r.rb_ge,q=r.rb_plus,T=r.rb_times,k=r.to_a,b=r.truthy,G=r.rb_lt,E=r.eqeq;return V=L,p=y=[w(L[0],"BCDice")].concat(V),x=[w(y[0],"GameSystem")].concat(p),H=r.$r(x),Y=x,h=[_=U(x[0],H("Base"),"Emoklore")].concat(Y),o=r.$r(h),_.$$prototype.randomizer=e,v(h[0],"ID","Emoklore"),v(h[0],"NAME","\u30a8\u30e2\u30af\u30ed\u30a2TRPG"),v(h[0],"SORT_KEY","\u3048\u3082\u304f\u308d\u3042TRPG"),v(h[0],"HELP_MESSAGE",'\u30fb\u6280\u80fd\u5024\u5224\u5b9a\uff08xDM<=y\uff09\n  "(\u500b\u6570)DM<=(\u5224\u5b9a\u5024)"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3057\u305f\u5834\u54081\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  \u4f8b\uff092DM<=5 DM<=8\n\u30fb\u6280\u80fd\u5024\u5224\u5b9a\uff08sDAa+z)\n  "(\u6280\u80fd\u30ec\u30d9\u30eb)DA(\u80fd\u529b\u5024)+(\u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9)"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n  \u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3057\u305f\u5834\u54080\u306b\u306a\u308a\u307e\u3059\u3002\n  \u6280\u80fd\u30ec\u30d9\u30eb\u306f1\uff5e3\u306e\u6570\u5024\u3001\u307e\u305f\u306f\u30d9\u30fc\u30b9\u6280\u80fd\u306e\u5834\u5408"b"\u304c\u5165\u308a\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u6280\u80fd\u30ec\u30d9\u30eb\u3068\u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9\u306e\u500b\u6570\u306b\u3088\u308a\u6c7a\u5b9a\u3057\u3001s+z\u500b\u306e\u30c0\u30a4\u30b9\u3092\u632f\u308a\u307e\u3059\u3002\uff08s="b"\u306e\u5834\u5408\u306fs=1\uff09\n  \u5224\u5b9a\u5024\u306fs+a\u3068\u306a\u308a\u307e\u3059\u3002\uff08s="b"\u306e\u5834\u5408\u306fs=0\uff09\n'),_.$register_prefix("\\d*DM<=","(B|\\d*)DA"),v(h[0],"CRITICAL_VALUE",1),v(h[0],"FUMBLE_VALUE",10),D(_,"$eval_game_system_specific_command",function(t){var c;return B(/^\d*DM<=\d/,c=t)?this.$roll_dm(t):B(/^(B|\d*)DA\d+(\+)?\d*/,c)?this.$roll_da(t):e},1),_.$private(),D(_,"$dice_roll",function(t,n){var f,a,u,i,R,$=e,s=e,d=e;return $=this.randomizer.$roll_barabara(t,10),s=m($,"reject",[],function(l){return null==l&&(l=e),M(l,o("CRITICAL_VALUE"))},1),f=A($.$size(),s.$size()),a=m(s,"count",[],function(l){return null==l&&(l=e),M(l,n)},1),u=m(s,"count",[],function(l){return null==l&&(l=e),I(l,o("FUMBLE_VALUE"))},1),i=A(q(T(2,f),a),u),d=this.$compare_result(i),R=["["+$.$join(", ")+"] \uff1e "+i+" \uff1e \u6210\u529f\u6570"+i+" "+d.$text()],m(d,"text=",k(R)),A(R.length,1),d},2),D(_,"$compare_result",function(t){return b(G(t,0))?o("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb!"):E(t,0)?o("Result").$failure("\u5931\u6557!"):E(t,1)?o("Result").$success("\u6210\u529f!"):E(t,2)?o("Result").$critical("\u30c0\u30d6\u30eb!"):E(t,3)?o("Result").$critical("\u30c8\u30ea\u30d7\u30eb!"):b(M(t,9))?o("Result").$critical("\u30df\u30e9\u30af\u30eb!"):o("Result").$critical("\u30ab\u30bf\u30b9\u30c8\u30ed\u30d5!")},1),D(_,"$roll_dm",function(t){var n,$=e,s=e,f=e,a=e,u=e,i=e;return $=/^(\d+)?DM<=(\d+)$/.$match(t),!b($)||(s=b(f=(n=$["$[]"](1))===e||null==n?e:m(n,"to_i",[]))?f:1,a=$["$[]"](2).$to_i(),b(M(s,0)))?e:(i=["("+s+"DM<="+a+") \uff1e "+(u=this.$dice_roll(s,a)).$text()],m(u,"text=",k(i)),A(i.length,1),u)},1),D(_,"$roll_da",function(t){var n,$=e,s=e,f=e,a=e,u=e,i=e,d=e;return $=/^(B|\d+)?DA(\d+)(\+\d+)?$/.$match(t),b($)?(s=$["$[]"](3).$to_i(),d=["("+t+") \uff1e ("+(f=q(E($["$[]"](1),"B")?1:b(a=(n=$["$[]"](1))===e||null==n?e:m(n,"to_i",[]))?a:1,s))+"DM<="+(u=q($["$[]"](1).$to_i(),$["$[]"](2).$to_i()))+") \uff1e "+(i=this.$dice_roll(f,u)).$text()],m(i,"text=",k(d)),A(d.length,1),i):e},1)})}}]);