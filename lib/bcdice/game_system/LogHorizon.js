(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4810],{8991:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var H,u,A,I,L,f,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.class_variable_set,C=r.truthy,N=r.class_variable_get,l=r.def,B=r.send,V=r.to_a,v=r.rb_minus,E=r.send2,G=r.find_super,Z=r.hash2,K=r.find_block_super,U=r.neqeq;return H=Y,f=[L=e(Y[0],"I18n")].concat(H),k(f[0],"@@fallbacks",n),u=r.get_singleton_class(L),A=[u].concat(f),I=r.$r(A),l(u,"$fallbacks",function(){var T=n;return k(A[1],"@@fallbacks",C(null!=A[1].$$cvars["@@fallbacks"]?"class variable":n)&&C(T=N(A[1],"@@fallbacks",!1))?T:t(t(I("I18n"),"Locale"),"Fallbacks").$new()),C(T=I("Thread").$current()["$[]"]("i18n_fallbacks"))?T:N(A[1],"@@fallbacks",!1)},0),l(u,"$fallbacks=",function(b){var T;return k(A[1],"@@fallbacks",C(b["$is_a?"](I("Array")))?t(t(I("I18n"),"Locale"),"Fallbacks").$new(b):b),T=["i18n_fallbacks",N(A[1],"@@fallbacks",!1)],B(I("Thread").$current(),"[]=",V(T)),T[v(T.length,1)]},1),function(u,w){var b,T,q,o,I=[e(u,"Backend")].concat(w);return b=I,q=[T=e(I[0],"Fallbacks")].concat(b),o=r.$r(q),l(T,"$translate",function m(d,a,_){try{var $=m.$$p||n,c=this,R=n,z=n;return delete m.$$p,null==_&&(_=o("EMPTY_HASH")),C(_.$fetch("fallback",!0))?C(_["$[]"]("fallback_in_progress"))?E(c,G(c,"translate",m,!1,!0),"translate",[d,a,_],$):(C(_["$[]"]("default"))&&(R=c["$extract_non_symbol_default!"](_)),z=_.$merge(Z(["fallback_in_progress"],{fallback_in_progress:!0})),B(o("I18n").$fallbacks()["$[]"](d),"each",[],function p(D){var M=null==p.$$s?this:p.$$s;null==D&&(D=n);try{return B(M,"catch",["exception"],function j(){var i=null==j.$$s?this:j.$$s,S=n;if(S=E(i,K(i,"translate",j.$$def||p.$$def||m,!1,!1),"translate",[D,a,z],null),C(S["$nil?"]()))return n;U(d.$to_s(),D.$to_s())&&i.$on_fallback(d,D,a,_),r.ret(S)},{$$arity:0,$$s:M})}catch(j){if(!r.rescue(j,[t(o("I18n"),"InvalidLocale")]))throw j;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:c}),C(_["$key?"]("default"))&&C(_["$[]"]("default")["$nil?"]())?n:C(R)?E(c,G(c,"translate",m,!1,!0),"translate",[d,n,_.$merge(Z(["default"],{default:R}))],null):c.$throw("exception",t(o("I18n"),"MissingTranslation").$new(d,a,_))):E(c,G(c,"translate",m,!1,!0),"translate",[d,a,_],$)}catch(p){if(p===r.returner)return p.$v;throw p}},-3),l(T,"$extract_non_symbol_default!",function(d){var _,a=n,$=n;return a=[d["$[]"]("default")].$flatten(),_=B(a,"detect",[],function(R){return null==R&&(R=n),R["$is_a?"](o("Symbol"))["$!"]()},1),C(_)&&($=["default",a["$[]"](0,a.$index(_))],B(d,"[]=",V($)),v($.length,1)),_},1),l(T,"$exists?",function m(d,a,_){try{var $=m.$$p||n,c=this;return delete m.$$p,null==_&&(_=o("EMPTY_HASH")),C(_.$fetch("fallback",!0))?(B(o("I18n").$fallbacks()["$[]"](d),"each",[],function R(z){var p=null==R.$$s?this:R.$$s;null==z&&(z=n);try{if(!C(E(p,K(p,"exists?",R.$$def||m,!1,!1),"exists?",[z,a],null)))return n;r.ret(!0)}catch(D){if(!r.rescue(D,[t(o("I18n"),"InvalidLocale")]))throw D;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:c}),!1):E(c,G(c,"exists?",m,!1,!0),"exists?",[d,a,_],$)}catch(R){if(R===r.returner)return R.$v;throw R}},-3),T.$private(),l(T,"$on_fallback",function(d,a,_,$){return n},4)}(f[0],f)},Opal.modules["bcdice/randomizer"]=function(r){var L,h,b,T,q,o,u,w,Y=[],n=r.nil,t=r.$$$,k=r.klass,C=r.const_set,N=r.def,l=r.truthy,B=r.rb_gt,V=r.rb_plus,v=r.rb_le,E=r.send,G=r.rb_minus,Z=r.eqeq,K=r.rb_times,U=r.eqeqeq,ee=r.rb_ge;return L=Y,u=[(0,r.module)(Y[0],"BCDice")].concat(L),w=r.$r(u),h=u,T=[b=k(u[0],null,"Randomizer")].concat(h),q=r.$r(T),(o=b.$$prototype).rand_results=o.detailed_rand_results=n,C(T[0],"UPPER_LIMIT_DICE_TIMES",200),C(T[0],"UPPER_LIMIT_DICE_SIDES",1e3),C(T[0],"UPPER_LIMIT_RANDS",1e4),N(b,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),b.$attr_reader("rand_results"),b.$attr_reader("detailed_rand_results"),C(T[0],"DetailedRandResult",q("Struct").$new("kind","sides","value")),N(b,"$roll_barabara",function(d,a){var _=this;return l(B(V(_.rand_results.$size(),d),q("UPPER_LIMIT_RANDS")))&&_.$raise(q("TooManyRandsError")),l(v(d,0))||l(B(d,q("UPPER_LIMIT_DICE_TIMES")))?[]:E(q("Array"),"new",[d],function $(){return(null==$.$$s?this:$.$$s).$roll_once(a)},{$$arity:0,$$s:_})},2),N(b,"$roll_sum",function(d,a){return this.$roll_barabara(d,a).$sum()},2),N(b,"$roll_once",function(d){var _=n;return l(v(d,0))||l(B(d,q("UPPER_LIMIT_DICE_SIDES")))?0:(_=this.$rand_inner(d),this.$push_to_detail("normal",d,_),_)},1),N(b,"$roll_index",function(d){return G(this.$roll_once(d),1)},1),N(b,"$roll_tens_d10",function(){var _,a=n;return a=this.$rand_inner(10),Z(a,10)&&(a=0),_=K(a,10),this.$push_to_detail("tens_d10",10,_),_},0),N(b,"$roll_d9",function(){var a;return a=G(this.$rand_inner(10),1),this.$push_to_detail("d9",10,a),a},0),N(b,"$roll_d66",function(d){var $,_=n;return _=E(q("Array"),"new",[2],function c(){return(null==c.$$s?this:c.$$s).$roll_once(6)},{$$arity:0,$$s:this}),U(t(q("D66SortType"),"ASC"),$=d)?_["$sort!"]():U(t(q("D66SortType"),"DESC"),$)&&_["$sort!"]()["$reverse!"](),V(K(_["$[]"](0),10),_["$[]"](1))},1),b.$private(),N(b,"$rand_inner",function(d){var _,a=this;return l(ee(a.rand_results.$size(),q("UPPER_LIMIT_RANDS")))&&a.$raise(q("TooManyRandsError")),_=a.$random(d),a.rand_results["$<<"]([_,d]),_},1),N(b,"$random",function(d){return V(q("Kernel").$rand(d),1)},1),N(b,"$push_to_detail",function(d,a,_){var c;return c=q("DetailedRandResult").$new(d,a,_),this.detailed_rand_results.$push(c)},3),k(u[0],w("StandardError"),"TooManyRandsError"),n},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var l,E,ee,H,L,f,u,Z,V,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.truthy;return l=Y,E=V=[t(Y[0],"BCDice")].concat(l),ee=Z=[t(V[0],"DiceTable")].concat(E),L=[H=e(Z[0],null,"RollResult")].concat(ee),f=r.$r(L),(u=H.$$prototype).table_name=u.value=u.body=n,k(H,"$initialize",function(A,I,h){var b=this;return b.table_name=A,b.value=I,b.body=h},3),H.$attr_reader("table_name"),H.$attr_reader("value"),H.$attr_reader("body"),k(H,"$to_s",function(){var A=this;return A.table_name+"("+A.value+") \uff1e "+A.body},0),k(H,"$last_body",function(){var A=this;return C(A.body["$is_a?"](f("RollResult")))?A.body.$last_body():A.body},0),k(H,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var B,G,H,L,f,u,w,K,v,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.truthy,C=r.def,N=r.rb_minus;return B=Y,G=v=[t(Y[0],"BCDice")].concat(B),H=K=[t(v[0],"DiceTable")].concat(G),f=[L=e(K[0],null,"ChainTable")].concat(H),u=r.$r(f),(w=L.$$prototype).times=w.sides=w.items=w.name=n,C(L,"$initialize",function(I,h,b){var T=this,q=n;return T.name=I,T.items=b.$freeze(),q=/(\d+)D(\d+)/i.$match(h),k(q)||T.$raise(u("ArgumentError"),"Unexpected table type: "+h),T.times=q["$[]"](1).$to_i(),T.sides=q["$[]"](2).$to_i()},3),C(L,"$roll",function(I){var b,T,h=this,q=n;return b=I.$roll_sum(h.times,h.sides),T=N(b,h.times),q=h.items["$[]"](T),k(q["$respond_to?"]("roll"))&&(q=q.$roll(I)),u("RollResult").$new(h.name,b,q)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var E,U,u,w,A,I,h,H,Z,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,C=r.defs,N=r.def,l=r.rb_plus,B=r.rb_times,V=r.rb_minus;return E=Y,U=Z=[t(Y[0],"BCDice")].concat(E),u=H=[t(Z[0],"DiceTable")].concat(U),A=[w=e(H[0],null,"D66GridTable")].concat(u),I=r.$r(A),(h=w.$$prototype).name=h.items=n,C(w,"$from_i18n",function(T,q){var m=n;return m=I("I18n").$t(T,k(["locale","raise"],{locale:q,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("items"))},2),N(w,"$initialize",function(T,q){return this.name=T,this.items=q.$freeze()},2),N(w,"$roll",function(T){var o,m,d,a,_;return o=T.$roll_once(6),m=T.$roll_once(6),d=l(B(o,10),m),a=V(o,1),_=V(m,1),I("RollResult").$new(this.name,d,this.items["$[]"](a)["$[]"](_))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var V,Z,f,u,w,A,U,ee,E,n=[],t=r.nil,e=r.module,k=r.klass,C=r.hash2,N=r.defs,l=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=E=[e(n[0],"BCDice")].concat(V),U=[e(E[0],"DiceTable")].concat(Z),ee=r.$r(U),f=U,w=[u=k(U[0],ee("D66GridTable"),"D66HalfGridTable")].concat(f),A=r.$r(w),N(u,"$from_i18n",function(h,b){var q=t;return q=A("I18n").$t(h,C(["locale","raise"],{locale:b,raise:!0})),this.$new(q["$[]"]("name"),q["$[]"]("items_1_2_3"),q["$[]"]("items_4_5_6"))},2),l(u,"$initialize",function(h,b,T){return this.name=h,this.items=[b,b,b,T,T,T].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var V,Z,f,u,w,A,U,ee,E,n=[],t=r.nil,e=r.module,k=r.klass,C=r.hash2,N=r.defs,l=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=E=[e(n[0],"BCDice")].concat(V),U=[e(E[0],"DiceTable")].concat(Z),ee=r.$r(U),f=U,w=[u=k(U[0],ee("D66GridTable"),"D66OneThirdTable")].concat(f),A=r.$r(w),N(u,"$from_i18n",function(h,b){var q=t;return q=A("I18n").$t(h,C(["locale","raise"],{locale:b,raise:!0})),this.$new(q["$[]"]("name"),q["$[]"]("items_1_2"),q["$[]"]("items_3_4"),q["$[]"]("items_5_6"))},2),l(u,"$initialize",function(h,b,T,q){return this.name=h,this.items=[b,b,T,T,q,q].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var Z,H,A,I,h,b,T,f,U,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,C=r.hash2,N=r.defs,l=r.def,B=r.eqeqeq,V=r.rb_plus,v=r.rb_times,E=r.truthy;return Z=Y,H=U=[e(Y[0],"BCDice")].concat(Z),A=f=[e(U[0],"DiceTable")].concat(H),h=[I=k(f[0],null,"D66Table")].concat(A),b=r.$r(h),(T=I.$$prototype).sort_type=T.items=T.name=n,N(I,"$from_i18n",function(o,m){var _,a=n;return a=b("I18n").$t(o,C(["locale"],{locale:m})),_=b("D66SortType").$const_get(a["$[]"]("d66_sort_type")),this.$new(a["$[]"]("name"),_,a["$[]"]("items"))},2),l(I,"$initialize",function(o,m,d){var a=this;return a.name=o,a.sort_type=m,a.items=d.$freeze()},3),l(I,"$roll",function(o){var m=this,d=n,a=n,_=n,$=n;return d=o.$roll_barabara(2,6),B(t(b("D66SortType"),"ASC"),a=m.sort_type)?d["$sort!"]():B(t(b("D66SortType"),"DESC"),a)&&d["$sort!"]()["$reverse!"](),_=V(v(d["$[]"](0),10),d["$[]"](1)),$=E(a=m.items["$[]"](_))?a:m.items["$[]"](_.$to_s()),E($["$respond_to?"]("roll"))&&($=$.$roll(o)),b("RollResult").$new(m.name,_,$)},1),l(I,"$choice",function(o){return b("RollResult").$new(this.name,o,this.items["$[]"](o))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var ee,u,A,I,L,n=[],t=r.nil,e=r.module,k=r.klass,C=r.hash2,N=r.send,l=r.to_ary,B=r.rb_plus,V=r.rb_times,v=r.to_a,E=r.rb_minus,G=r.send2,Z=r.find_super,K=r.def;return r.top.$require("bcdice/dice_table/d66_table"),ee=n,u=L=[e(n[0],"BCDice")].concat(ee),A=[e(L[0],"DiceTable")].concat(u),I=r.$r(A),K(k(A[0],I("D66Table"),"D66LeftRangeTable"),"$initialize",function q(o,m,d){var $;return delete q.$$p,$=C([],{}),N(d,"each",[],function(R){var z,M;return null==R&&(R=t),z=l(R),M=null==z[1]?t:z[1],N(null==z[0]?t:z[0],"each",[],function(i){return null==i&&(i=t),N(M,"each_with_index",[],function(s,P){var F,Q;return null==s&&(s=t),null==P&&(P=t),F=B(V(i,10),B(P,1)),N($,"[]=",v(Q=[F,s])),Q[E(Q.length,1)]},2)},1)},1),G(this,Z(this,"initialize",q,!1,!0),"initialize",[o,m,$],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var v,K,f,u,w,A,I,ee,G,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.truthy,N=r.rb_minus,l=r.rb_plus,B=r.rb_times;return v=Y,K=G=[t(Y[0],"BCDice")].concat(v),f=ee=[t(G[0],"DiceTable")].concat(K),w=[u=e(ee[0],null,"D66ParityTable")].concat(f),A=r.$r(w),(I=u.$$prototype).odd=I.even=I.name=n,k(u,"$initialize",function(b,T,q){var o=this;return o.name=b,o.odd=T.$freeze(),o.even=q.$freeze()},3),k(u,"$roll",function(b){var o,d,a,T=this,q=n;return q=b.$roll_once(6),o=b.$roll_once(6),d=(C(q["$odd?"]())?T.odd:T.even)["$[]"](N(o,1)),a=l(B(q,10),o),A("RollResult").$new(T.name,a,d)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var V,Z,L,f,u,w,A,U,E,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.rb_plus,N=r.rb_times,l=r.send;return V=Y,Z=E=[t(Y[0],"BCDice")].concat(V),L=U=[t(E[0],"DiceTable")].concat(Z),u=[f=e(U[0],null,"D66RangeTable")].concat(L),w=r.$r(u),(A=f.$$prototype).items=A.name=n,k(f,"$initialize",function(h,b){return this.name=h,this.items=b.$freeze()},2),k(f,"$roll",function(h){var T,q,o,m=n;return T=h.$roll_once(6),q=h.$roll_once(6),o=C(N(T,10),q),m=l(this.items,"find",[],function(a){return null==a&&(a=n),a["$[]"](0)["$include?"](o)},1),w("RollResult").$new(this.name,o,m["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var K,L,I,h,b,T,q,u,ee,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.const_set,C=r.send,N=r.truthy,l=r.def,B=r.to_a,V=r.rb_minus,v=r.eqeqeq,E=r.rb_times,G=r.rb_plus;return K=Y,L=ee=[t(Y[0],"BCDice")].concat(K),I=u=[t(ee[0],"DiceTable")].concat(L),b=[h=e(u[0],null,"RangeTable")].concat(I),T=r.$r(b),(q=h.$$prototype).name=q.items=q.num_of_dice=q.num_of_sides=q.formatter=n,k(b[0],"RollResult",C(T("Struct"),"new",["sum","values","content","formatted"],function o(){return(null==o.$$s?this:o.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:h})),k(b[0],"Item",T("Struct").$new("range","content")),k(b[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),k(b[0],"DEFAULT_FORMATTER",C(h,"lambda",[],function(m,d){return null==m&&(m=n),null==d&&(d=n),m.$name()+"("+d.$sum()+") \uff1e "+d.$content()},2)),h.$attr_reader("name"),h.$attr_reader("num_of_dice"),h.$attr_reader("num_of_sides"),l(h,"$initialize",function o(m,d,a){var c,_=o.$$p||n,$=this,R=n;return delete o.$$p,$.name=m.$freeze(),$.formatter=N(c=_)?c:T("DEFAULT_FORMATTER"),R=T("DICE_ROLL_METHOD_RE").$match(d),N(R)||$.$raise(T("ArgumentError"),$.name+": invalid dice roll method: "+d),$.num_of_dice=R["$[]"](1).$to_i(),$.num_of_sides=R["$[]"](2).$to_i(),$.$store(a)},3),l(h,"$fetch",function(m){var a,d=this;return a=C(d.items,"find",[],function($){return null==$&&($=n),$.$range()["$include?"](m)},1),N(a)||d.$raise(T("RangeError"),d.name+": value is out of range: "+m),a},1),l(h,"$roll",function(m){var _,$,c,d=this,a=n;return _=(a=m.$roll_barabara(d.num_of_dice,d.num_of_sides)).$sum(),$=T("RollResult").$new(_,a,d.$fetch(_).$content()),c=[d.formatter["$[]"](d,$)],C($,"formatted=",B(c)),V(c.length,1),$},1),h.$private(),l(h,"$store",function(m){var a,_,d=this;return a=C(m,"map",[],function $(c,R){return null==c&&(c=n),null==R&&(R=n),[(null==$.$$s?this:$.$$s).$coerce_to_int_range(c),R]},{$$arity:2,$$s:d}),_=C(a,"sort_by",[],function(c,R){return null==c&&(c=n),null==R&&(R=n),c.$min()},2),d.$assert_min_sum_is_covered(_),d.$assert_max_sum_is_covered(_),d.$assert_no_gap_or_overlap_in_ranges(_),d.items=C(_,"map",[],function(c,R){return null==c&&(c=n),null==R&&(R=n),T("Item").$new(c,R.$freeze()).$freeze()},2).$freeze(),d},1),l(h,"$coerce_to_int_range",function(m){var a;return v(T("Integer"),a=m)?T("Range").$new(m,m):v(T("Range"),a)&&N(m.$begin()["$is_a?"](T("Integer")))&&N(m.$end()["$is_a?"](T("Integer")))?m:this.$raise(T("TypeError"),this.name+": "+m+" ("+m.$class()+") must be an Integer or a Range with Integers ")},1),l(h,"$assert_min_sum_is_covered",function(m){var a,d=this,_=n;return a=d.num_of_dice,_=m.$first()["$[]"](0),N(_["$include?"](a))||d.$raise(T("RangeError"),d.name+": min value ("+a+") is not covered: "+_),d},1),l(h,"$assert_max_sum_is_covered",function(m){var a,d=this,_=n;return a=E(d.num_of_dice,d.num_of_sides),_=m.$last()["$[]"](0),N(_["$include?"](a))||d.$raise(T("RangeError"),d.name+": max value ("+a+") is not covered: "+_),d},1),l(h,"$assert_no_gap_or_overlap_in_ranges",function(m){return C(m,"each_cons",[2],function a(_,$){var p,D,c=null==a.$$s?this:a.$$s,R=n,z=n;return null==c.name&&(c.name=n),null==_&&(_=n),null==$&&($=n),R=_["$[]"](0),z=$["$[]"](0),p=R.$max(),D=G(p,1),N(z["$include?"](p))&&c.$raise(T("RangeError"),c.name+": Range overlap: "+R+" and "+z),N(z["$include?"](D))?n:c.$raise(T("RangeError"),c.name+": Range gap: "+R+" and "+z)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var V,Z,L,I,h,b,T,u,U,E,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,C=r.send,N=r.def,l=r.rb_minus;return V=Y,Z=E=[e(Y[0],"BCDice")].concat(V),L=U=[e(E[0],"DiceTable")].concat(Z),I=u=[k(U[0],null,"SaiFicSkillTable")].concat(L),b=[h=k(u[0],null,"Category")].concat(I),T=r.$r(b),h.$$prototype.name=n,N(h,"$initialize",function(m,d,a,_){var $=this;return $.name=m,$.skills=C(d.$map(),"with_index",[2],function(R,z){return null==R&&(R=n),null==z&&(z=n),t(T("SaiFicSkillTable"),"Skill").$new(m,R,a,z,_)},2),$.dice=a},4),N(h,"$roll",function(m){return this.$skills()["$[]"](l(m.$roll_sum(2,6),2))},1),N(h,"$to_s",function(){return this.name},0),h.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var l,E,ee,w,A,L,Z,V,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.hash2;return l=Y,E=V=[t(Y[0],"BCDice")].concat(l),ee=Z=[t(V[0],"DiceTable")].concat(E),L=[e(Z[0],null,"SaiFicSkillTable")].concat(ee),(A=(w=e(L[0],null,"Skill")).$$prototype).s_format=A.category_dice=A.row_dice=A.category_name=A.name=n,k(w,"$initialize",function(h,b,T,q,o){var m=this;return m.category_name=h,m.name=b,m.category_dice=T,m.row_dice=q,m.s_format=o},5),k(w,"$to_s",function(){var h=this;return h.$format(h.s_format,C(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))},0),w.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var H,w,T,q,o,m,d,I,f,Y=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,C=r.klass,N=r.hash2,l=r.send,V=r.defs,v=r.const_set,E=r.to_ary,G=r.def,Z=r.truthy,K=r.rb_minus,U=r.rb_plus;return Y.$require("bcdice/dice_table/sai_fic_skill_table/category"),Y.$require("bcdice/dice_table/sai_fic_skill_table/skill"),H=n,w=f=[k(n[0],"BCDice")].concat(H),T=I=[k(f[0],"DiceTable")].concat(w),o=[q=C(I[0],null,"SaiFicSkillTable")].concat(T),m=r.$r(o),(d=q.$$prototype).rtt=d.rtt_format=d.rct=d.rct_format=d.rttn=d.rttn_format=d.categories=t,V(q,"$from_i18n",function(_,$,c){var R,z,p,i,j=t;if(null==c)c=N([],{});else if(!c.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(R=c.$$smap.rtt)&&(R=t),null==(z=c.$$smap.rct)&&(z=t),null==(p=c.$$smap.rttn)&&(p=t),i=(j=m("I18n").$t("RTT",N(["locale","raise","default"],{locale:$,raise:!1,default:N([],{})})).$merge(m("I18n").$t(_,N(["locale","raise"],{locale:$,raise:!0}))))["$[]"]("items"),j=l(j,"select",[],function(s,P){return null==s&&(s=t),null==P&&(P=t),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](s)},2),this.$new(i,r.to_hash(j).$merge(N(["rtt","rct","rttn"],{rtt:R,rct:z,rttn:p})))},-3),v(o[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),v(o[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),v(o[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),v(o[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),G(q,"$initialize",function(_,$){var c,R,z,p,D,M,j,i=this;if(null==$)$=N([],{});else if(!$.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(c=$.$$smap.rtt)&&(c=t),null==(R=$.$$smap.rct)&&(R=t),null==(z=$.$$smap.rttn)&&(z=t),null==(p=$.$$smap.rtt_format)&&(p=m("DEFAULT_RTT")),null==(D=$.$$smap.rct_format)&&(D=m("DEFAULT_RCT")),null==(M=$.$$smap.rttn_format)&&(M=m("DEFAULT_RTTN")),null==(j=$.$$smap.s_format)&&(j=m("DEFAULT_S")),i.categories=l(_.$map(),"with_index",[1],function(s,P){var F,re,X;return null==s&&(s=t),null==P&&(P=t),re=null==(F=E(s))[0]?t:F[0],X=null==F[1]?t:F[1],e(m("SaiFicSkillTable"),"Category").$new(re,X,P,j)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),i.rtt=c,i.rct=R,i.rttn=z.$to_a(),i.rtt_format=p,i.rct_format=D,i.rttn_format=M},-2),v(o[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),q.$attr_reader("categories"),G(q,"$roll_command",function(_,$){var R,c=this,z=t,p=t;return Z(["RTT",c.rtt]["$include?"](R=$))?c.$format_skill(c.rtt_format,c.$roll_skill(_)):Z(["RCT",c.rct]["$include?"](R))?(z=c.$roll_category(_),c.$format(c.rct_format,N(["category_dice","category_name"],{category_dice:z.$dice(),category_name:z.$name()}))):Z(p=m("RTTN").$index(R))||Z(p=c.rttn.$index(R))?c.$format_skill(c.rttn_format,c.categories["$[]"](p).$roll(_)):t},2),G(q,"$roll_category",function(_){return this.categories["$[]"](K(_.$roll_once(6),1))},1),G(q,"$roll_skill",function(_){return this.$roll_category(_).$roll(_)},1),G(q,"$prefixes",function(){var _=this;return U(["RTT[1-6]?","RCT",_.rtt,_.rct],_.rttn).$compact()},0),q.$private(),G(q,"$format_skill",function(_,$){return this.$format(_,N(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:$.$category_dice(),row_dice:$.$row_dice(),category_name:$.$category_name(),skill_name:$.$name(),text:$.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var v,K,f,u,w,A,I,ee,G,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,C=r.defs,N=r.truthy,l=r.def,B=r.rb_minus;return v=Y,K=G=[t(Y[0],"BCDice")].concat(v),f=ee=[t(G[0],"DiceTable")].concat(K),w=[u=e(ee[0],null,"Table")].concat(f),A=r.$r(w),(I=u.$$prototype).times=I.sides=I.name=I.items=n,C(u,"$from_i18n",function(b,T){var o=n;return o=A("I18n").$t(b,k(["locale"],{locale:T})),this.$new(o["$[]"]("name"),o["$[]"]("type"),o["$[]"]("items"))},2),l(u,"$initialize",function(b,T,q){var o=this,m=n;return o.name=b,o.items=q.$freeze(),m=/(\d+)D(\d+)/i.$match(T),N(m)||o.$raise(A("ArgumentError"),"Unexpected table type: "+T),o.times=m["$[]"](1).$to_i(),o.sides=m["$[]"](2).$to_i()},3),l(u,"$roll",function(b){var q,T=this;return q=b.$roll_sum(T.times,T.sides),T.$choice(q)},1),l(u,"$choice",function(b){var q,T=this;return q=B(b,T.times),A("RollResult").$new(T.name,b,T.items["$[]"](q))},1)},Opal.modules["bcdice/dice_table"]=function(r){var Y=r.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var C,V,E,l,Y=[],t=r.module,e=r.const_set;return C=Y,V=l=[t(Y[0],"BCDice")].concat(C),E=[t(l[0],"D66SortType")].concat(V),e(E[0],"NO_SORT","no_sort"),e(E[0],"ASC","asc"),e(E[0],"DESC","desc"),function(B,V){var E=[t(B,"RoundType")].concat(V);return e(E[0],"CEIL","ceil"),e(E[0],"FLOOR","floor"),e(E[0],"ROUND","round")}(l[0],l)},Opal.modules["bcdice/translate"]=function(r){var l,E,G,Z,K,V,Y=[],n=r.nil,t=r.module,e=r.hash2,C=r.def;return l=Y,E=V=[t(Y[0],"BCDice")].concat(l),Z=[G=t(V[0],"Translate")].concat(E),K=r.$r(Z),C(G,"$translate",function(ee,H){var L,f=this;if(null==f.locale&&(f.locale=n),null==H)H=e([],{});else if(!H.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return L=r.kwrestargs(H,{}),K("I18n").$translate(ee,e(["locale","raise"],{locale:f.locale,raise:!0}).$merge(r.to_hash(L)))},-2)},Opal.modules["bcdice/result"]=function(r){var V,K,L,U,H,E,Y=[],n=r.nil,e=r.klass,k=r.send,C=r.to_a,N=r.rb_minus,l=r.def;return V=Y,K=E=[(0,r.module)(Y[0],"BCDice")].concat(V),[U=e(E[0],null,"Result")].concat(K),(H=U.$$prototype).secret=H.success=H.failure=H.critical=H.fumble=n,l(L=r.get_singleton_class(U),"$success",function(w){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",C(b=[w])),N(b.length,1),k(h,"success=",C(b=[!0])),b[N(b.length,1)]},1)},1),l(L,"$failure",function(w){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",C(b=[w])),N(b.length,1),k(h,"failure=",C(b=[!0])),b[N(b.length,1)]},1)},1),l(L,"$critical",function(w){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",C(b=[w])),N(b.length,1),k(h,"critical=",C(b=[!0])),N(b.length,1),k(h,"success=",C(b=[!0])),b[N(b.length,1)]},1)},1),l(L,"$fumble",function(w){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",C(b=[w])),N(b.length,1),k(h,"fumble=",C(b=[!0])),N(b.length,1),k(h,"failure=",C(b=[!0])),b[N(b.length,1)]},1)},1),l(L,"$nothing",function(){return"nothing"},0),l(U,"$initialize",function(f){var u=this;return null==f&&(f=n),u.text=f,u.rands=n,u.detailed_rands=n,u.secret=!1,u.success=!1,u.failure=!1,u.critical=!1,u.fumble=!1},-1),U.$attr_accessor("text","rands","detailed_rands"),U.$attr_writer("secret","success","failure","critical","fumble"),l(U,"$secret?",function(){return this.secret},0),l(U,"$success?",function(){return this.success},0),l(U,"$failure?",function(){return this.failure},0),l(U,"$critical?",function(){return this.critical},0),l(U,"$fumble?",function(){return this.fumble},0),l(U,"$condition=",function(f){return this.success=f,this.failure=f["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var T,o,m,n=[],t=r.$r(n),e=r.nil,k=r.$$$,C=r.module,N=r.klass,l=r.truthy,B=r.const_set,V=r.defs,v=r.gvars,E=r.rb_lt,G=r.send,Z=r.to_a,K=r.rb_minus,U=r.def,ee=r.to_ary,H=r.neqeq,L=r.rb_plus,f=r.eqeq,u=r.rb_ge,w=r.rb_gt,A=r.eqeqeq,I=r.rb_le,h=r.rb_times;return T=n,o=[C(n[0],"Racc")].concat(T),m=r.$r(o),N(o[0],m("StandardError"),"ParseError"),l(k("::","ParseError","skip_raise")?"constant":e)||B(n[0],"ParseError",k(t("Racc"),"ParseError")),function(b,T){var $,c,R,z,p,m=[C(b,"Racc")].concat(T),d=r.$r(m);return l(d("Racc_No_Extensions","skip_raise")?"constant":e)||B(m[0],"Racc_No_Extensions",!1),$=m,R=[c=N(m[0],null,"Parser")].concat($),z=r.$r(R),(p=c.$$prototype).yydebug=p.racc_debug_out=p.racc_error_status=p.racc_t=p.racc_vstack=p.racc_val=p.racc_state=p.racc_tstack=e,B(R[0],"Racc_Runtime_Version","1.4.6"),B(R[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),B(R[0],"Racc_Runtime_Core_Version_R","1.4.6"),B(R[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),B(R[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),B(R[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),B(R[0],"Racc_Runtime_Core_Version",z("Racc_Runtime_Core_Version_R")),B(R[0],"Racc_Runtime_Core_Revision",z("Racc_Runtime_Core_Revision_R")),B(R[0],"Racc_Runtime_Type","ruby"),V(z("Parser"),"$racc_runtime_type",function(){return z("Racc_Runtime_Type")},0),U(c,"$_racc_setup",function(){var M,j,i=this,S=e,s=e,P=e;return null==v.stderr&&(v.stderr=e),l(k(i.$class(),"Racc_debug_parser"))||(i.yydebug=!1),l(null!=(M=i.yydebug)&&M!==e?"instance-variable":e)||(i.yydebug=!1),l(i.yydebug)&&(l(null!=(j=i.racc_debug_out)&&j!==e?"instance-variable":e)||(i.racc_debug_out=v.stderr),i.racc_debug_out=l(S=i.racc_debug_out)?S:v.stderr),s=k(i.$class(),"Racc_arg"),l(E(s.$size(),14))&&(G(s,"[]=",Z(P=[13,!0])),K(P.length,1)),s},0),U(c,"$_racc_init_sysvars",function(){var M=this;return M.racc_state=[0],M.racc_tstack=[],M.racc_vstack=[],M.racc_t=e,M.racc_val=e,M.racc_read_next=!0,M.racc_user_yyerror=!1,M.racc_error_status=0},0),U(c,"$do_parse",function(){return this.$__send__(z("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),U(c,"$next_token",function(){return this.$raise(z("NotImplementedError"),this.$class()+"#next_token is not defined")},0),U(c,"$_racc_do_parse_rb",function(M,j){var i,s=this,P=e,F=e,Q=e,re=e,W=e,y=e,J=e,g=e;return i=ee(M),P=null==i[0]?e:i[0],F=null==i[1]?e:i[1],Q=null==i[2]?e:i[2],re=null==i[3]?e:i[3],W=null==i[10]?e:i[10],s.$_racc_init_sysvars(),y=J=g=e,G(s,"catch",["racc_end_parse"],function x(){var $e,te,O=null==x.$$s?this:x.$$s,ue=e;for(null==O.racc_state&&(O.racc_state=e),null==O.racc_read_next&&(O.racc_read_next=e),null==O.racc_t&&(O.racc_t=e),null==O.yydebug&&(O.yydebug=e),null==O.racc_val&&(O.racc_val=e);l(!0);)for(l(g=re["$[]"](O.racc_state["$[]"](-1)))?(l(O.racc_read_next)&&H(O.racc_t,0)&&(te=O.$next_token(),$e=ee(te),y=null==$e[0]?e:$e[0],O.racc_val=null==$e[1]?e:$e[1],O.racc_t=l(y)?l(ue=W["$[]"](y))?ue:1:0,l(O.yydebug)&&O.$racc_read_token(O.racc_t,y,O.racc_val),O.racc_read_next=!1),g=L(g,O.racc_t),l(u(g,0))&&l(J=P["$[]"](g))&&f(F["$[]"](g),O.racc_state["$[]"](-1))||(J=Q["$[]"](O.racc_state["$[]"](-1)))):J=Q["$[]"](O.racc_state["$[]"](-1));l(J=O.$_racc_evalact(J,M)););},{$$arity:0,$$s:s})},2),U(c,"$yyparse",function(M,j){return this.$__send__(z("Racc_YY_Parse_Method"),M,j,this.$_racc_setup(),!0)},2),U(c,"$_racc_yyparse_rb",function(M,j,i,S){var s,F=this,Q=e,re=e,X=e,W=e,J=e,g=e,x=e;return s=ee(i),Q=null==s[0]?e:s[0],re=null==s[1]?e:s[1],X=null==s[2]?e:s[2],W=null==s[3]?e:s[3],J=null==s[10]?e:s[10],F.$_racc_init_sysvars(),g=e,x=e,G(F,"catch",["racc_end_parse"],function ne(){var O=null==ne.$$s?this:ne.$$s;for(null==O.racc_state&&(O.racc_state=e);!l(x=W["$[]"](O.racc_state["$[]"](-1)));)for(;l(g=O.$_racc_evalact(X["$[]"](O.racc_state["$[]"](-1)),i)););return G(M,"__send__",[j],function ue(se,le){var ae=null==ue.$$s?this:ue.$$s,ie=e,_e=e;for(null==ae.racc_t&&(ae.racc_t=e),null==ae.racc_state&&(ae.racc_state=e),null==ae.racc_read_next&&(ae.racc_read_next=e),null==se&&(se=e),null==le&&(le=e),ae.racc_t=l(se)?l(ie=J["$[]"](se))?ie:1:0,ae.racc_val=le,ae.racc_read_next=!1,x=L(x,ae.racc_t),l(u(x,0))&&l(g=Q["$[]"](x))&&f(re["$[]"](x),ae.racc_state["$[]"](-1))||(g=X["$[]"](ae.racc_state["$[]"](-1)));l(g=ae.$_racc_evalact(g,i)););for(;l(l(ie=l(_e=(x=W["$[]"](ae.racc_state["$[]"](-1)))["$!"]())?_e:ae.racc_read_next["$!"]())?ie:ae.racc_t["$=="](0));)for(l(x)&&l(x=L(x,ae.racc_t))&&l(u(x,0))&&l(g=Q["$[]"](x))&&f(re["$[]"](x),ae.racc_state["$[]"](-1))||(g=X["$[]"](ae.racc_state["$[]"](-1)));l(g=ae.$_racc_evalact(g,i)););},{$$arity:2,$$s:O})},{$$arity:0,$$s:F})},4),U(c,"$_racc_evalact",function(M,j){var i,X,s=this,P=e,F=e,re=e,W=e,y=e,J=e,g=e;if(P=null==(i=ee(j))[0]?e:i[0],F=null==i[1]?e:i[1],re=null==i[3]?e:i[3],X=null==i[11]?e:i[11],W=null==i[12]?e:i[12],l(w(M,0))&&l(E(M,X)))l(w(s.racc_error_status,0))&&(f(s.racc_t,1)||(s.racc_error_status=K(s.racc_error_status,1))),s.racc_vstack.$push(s.racc_val),s.racc_state.$push(M),s.racc_read_next=!0,l(s.yydebug)&&(s.racc_tstack.$push(s.racc_t),s.$racc_shift(s.racc_t,s.racc_tstack,s.racc_vstack));else if(l(E(M,0))&&l(w(M,W["$-@"]()))){if(y=G(s,"catch",["racc_jump"],function x(){var ne=null==x.$$s?this:x.$$s;return null==ne.racc_state&&(ne.racc_state=e),ne.racc_state.$push(ne.$_racc_do_reduce(j,M)),!1},{$$arity:0,$$s:s}),l(y)){if(A(1,J=y))return s.racc_user_yyerror=!0,W["$-@"]();if(A(2,J))return X;s.$raise("[Racc Bug] unknown jump code")}}else if(f(M,X))l(s.yydebug)&&s.$racc_accept(),s.$throw("racc_end_parse",s.racc_vstack["$[]"](0));else{if(f(M,W["$-@"]())){for(A(0,J=s.racc_error_status)?l(j["$[]"](21))||s.$on_error(s.racc_t,s.racc_val,s.racc_vstack):A(3,J)&&(f(s.racc_t,0)&&s.$throw("racc_end_parse",e),s.racc_read_next=!0),s.racc_user_yyerror=!1,s.racc_error_status=3;l(!0)&&!(l(g=re["$[]"](s.racc_state["$[]"](-1)))&&(g=L(g,1),l(u(g,0))&&l(M=P["$[]"](g))&&f(F["$[]"](g),s.racc_state["$[]"](-1))));)l(I(s.racc_state.$size(),1))&&s.$throw("racc_end_parse",e),s.racc_state.$pop(),s.racc_vstack.$pop(),l(s.yydebug)&&(s.racc_tstack.$pop(),s.$racc_e_pop(s.racc_state,s.racc_tstack,s.racc_vstack));return M}s.$raise("[Racc Bug] unknown action "+M.$inspect())}return l(s.yydebug)&&s.$racc_next_state(s.racc_state["$[]"](-1),s.racc_state),e},2),U(c,"$_racc_do_reduce",function(M,j){var i,W,J,O,ue,se,ae,s=this,F=e,Q=e,re=e,X=e,y=e,g=e,x=e,ne=e,$e=e,te=e,le=e,oe=e,ce=e,ie=e;return F=null==(i=ee(M))[4]?e:i[4],Q=null==i[5]?e:i[5],re=null==i[6]?e:i[6],X=null==i[7]?e:i[7],W=null==i[8]?e:i[8],y=null==i[9]?e:i[9],J=null==i[13]?e:i[13],g=s.racc_state,x=s.racc_vstack,ne=s.racc_tstack,$e=h(j,-3),te=y["$[]"]($e),O=y["$[]"](L($e,1)),ue=y["$[]"](L($e,2)),se=[],l(s.yydebug)&&(le=ne["$[]"](te["$-@"](),te)),oe=x["$[]"](te["$-@"](),te),l(s.yydebug)&&(ce=[te["$-@"](),te,se],G(ne,"[]=",Z(ce)),K(ce.length,1)),ce=[te["$-@"](),te,se],G(x,"[]=",Z(ce)),K(ce.length,1),ce=[te["$-@"](),te,se],G(g,"[]=",Z(ce)),K(ce.length,1),l(J)?x.$push(s.$__send__(ue,oe,x,oe["$[]"](0))):x.$push(s.$__send__(ue,oe,x)),ne.$push(O),l(s.yydebug)&&s.$racc_reduce(le,O,ne,x),ae=K(O,W),l($e=X["$[]"](ae))&&($e=L($e,g["$[]"](-1)),l(u($e,0))&&l(ie=F["$[]"]($e))&&f(Q["$[]"]($e),ae))?ie:re["$[]"](ae)},2),U(c,"$on_error",function(M,j,i){var s,S=this;return S.$raise(z("ParseError"),S.$sprintf("\nparse error on value %s (%s)",j.$inspect(),l(s=S.$token_to_str(M))?s:"?"))},3),U(c,"$yyerror",function(){return this.$throw("racc_jump",1)},0),U(c,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),U(c,"$yyerrok",function(){return this.racc_error_status=0},0),U(c,"$racc_read_token",function(M,j,i){var S=this;return S.racc_debug_out.$print("read    "),S.racc_debug_out.$print(j.$inspect(),"(",S.$racc_token2str(M),") "),S.racc_debug_out.$puts(i.$inspect()),S.racc_debug_out.$puts()},3),U(c,"$racc_shift",function(M,j,i){var S=this;return S.racc_debug_out.$puts("shift   "+S.$racc_token2str(M)),S.$racc_print_stacks(j,i),S.racc_debug_out.$puts()},3),U(c,"$racc_reduce",function(M,j,i,S){var s=this,P=e;return(P=s.racc_debug_out).$print("reduce "),l(M["$empty?"]())?P.$print(" <none>"):G(M,"each",[],function F(Q){return null==Q&&(Q=e),P.$print(" ",(null==F.$$s?this:F.$$s).$racc_token2str(Q))},{$$arity:1,$$s:s}),P.$puts(" --\x3e "+s.$racc_token2str(j)),s.$racc_print_stacks(i,S),s.racc_debug_out.$puts()},4),U(c,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),U(c,"$racc_e_pop",function(M,j,i){var S=this;return S.racc_debug_out.$puts("error recovering mode: pop token"),S.$racc_print_states(M),S.$racc_print_stacks(j,i),S.racc_debug_out.$puts()},3),U(c,"$racc_next_state",function(M,j){var i=this;return i.racc_debug_out.$puts("goto    "+M),i.$racc_print_states(j),i.racc_debug_out.$puts()},2),U(c,"$racc_print_stacks",function(M,j){var S=e;return(S=this.racc_debug_out).$print("        ["),G(M,"each_index",[],function s(P){return null==P&&(P=e),S.$print(" (",(null==s.$$s?this:s.$$s).$racc_token2str(M["$[]"](P))," ",j["$[]"](P).$inspect(),")")},{$$arity:1,$$s:this}),S.$puts(" ]")},2),U(c,"$racc_print_states",function(M){var i=e;return(i=this.racc_debug_out).$print("        ["),G(M,"each",[],function(s){return null==s&&(s=e),i.$print(" ",s)},1),i.$puts(" ]")},1),U(c,"$racc_token2str",function(M){var i;return l(i=k(this.$class(),"Racc_token_to_s_table")["$[]"](M))?i:this.$raise("[Racc Bug] can't convert token "+M+" to string")},1),U(c,"$token_to_str",function(M){return k(this.$class(),"Racc_token_to_s_table")["$[]"](M)},1)}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(r){var K,L,A,o,m,h,b,u,ee,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,C=r.def,N=r.send2,l=r.find_super,B=r.eqeq,V=r.const_set,v=r.eqeqeq,E=r.rb_divide,G=r.alias;return K=Y,L=ee=[e(Y[0],"BCDice")].concat(K),A=u=[e(ee[0],"Arithmetic")].concat(L),h=[e(u[0],"Node")].concat(A),b=r.$r(h),(m=(o=k(h[0],null,"BinaryOp")).$$prototype).lhs=m.rhs=m.op=n,C(o,"$initialize",function(a,_,$){var c=this;return c.lhs=a,c.op=_,c.rhs=$},3),C(o,"$eval",function(a){var c,_=this,$=n;return $=_.lhs.$eval(a),c=_.rhs.$eval(a),$.$send(_.op,c)},1),C(o,"$output",function(){var a=this;return""+a.lhs.$output()+a.op+a.rhs.$output()},0),C(o,"$s_exp",function(){var a=this;return"("+a.$op_for_s_exp()+" "+a.lhs.$s_exp()+" "+a.rhs.$s_exp()+")"},0),C(o,"$op_for_s_exp",function(){return this.op},0),function(T,q,o){var m=k(T,q,"DivideBase"),d=[m].concat(o),a=r.$r(d),_=m.$$prototype;_.lhs=_.rhs=_.op=n,C(m,"$initialize",function $(c,R){return delete $.$$p,N(this,l(this,"initialize",$,!1,!0),"initialize",[c,"/",R],null)},2),C(m,"$eval",function(c){var z,p,R=this;return z=R.lhs.$eval(c),p=R.rhs.$eval(c),B(p,0)&&R.$raise(a("ZeroDivisionError")),R.$divide_and_round(z,p,c)},1),C(m,"$output",function $(){var c=$.$$p||n,R=this;return delete $.$$p,""+N(R,l(R,"output",$,!1,!0),"output",[],c)+R.$rounding_method()},0),m.$private(),C(m,"$rounding_method",function(){return t(this.$class(),"ROUNDING_METHOD")},0),C(m,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),C(m,"$divide_and_round",function(c,R,z){return this.$raise(a("NotImplementedError"))},3)}(h[0],b("BinaryOp"),h),function(T,q,o){var m=k(T,q,"DivideWithGameSystemDefault"),d=[m].concat(o),a=r.$r(d);V(d[0],"ROUNDING_METHOD",""),m.$private(),C(m,"$divide_and_round",function($,c,R){var z;return v(t(a("RoundType"),"CEIL"),z=R)?E($.$to_f(),c).$ceil():v(t(a("RoundType"),"ROUND"),z)?E($.$to_f(),c).$round():E($,c).$floor()},3)}(h[0],b("DivideBase"),h),function(T,q,o){var m=k(T,q,"DivideWithCeil"),d=[m].concat(o);V(d[0],"ROUNDING_METHOD","C"),m.$private(),C(m,"$divide_and_round",function(_,$,c){return E(_.$to_f(),$).$ceil()},3)}(h[0],b("DivideBase"),h),function(T,q,o){var m=k(T,q,"DivideWithRound"),d=[m].concat(o);V(d[0],"ROUNDING_METHOD","R"),m.$private(),C(m,"$divide_and_round",function(_,$,c){return E(_.$to_f(),$).$round()},3)}(h[0],b("DivideBase"),h),function(T,q,o){var m=k(T,q,"DivideWithFloor"),d=[m].concat(o);V(d[0],"ROUNDING_METHOD","F"),m.$private(),C(m,"$divide_and_round",function(_,$,c){return E(_,$).$to_i()},3)}(h[0],b("DivideBase"),h),function(T,q){var o=k(T,null,"Negative");o.$$prototype.body=n,C(o,"$initialize",function(a){return this.body=a},1),C(o,"$eval",function(a){return this.body.$eval(a)["$-@"]()},1),C(o,"$output",function(){return"-"+this.body.$output()},0),C(o,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(h[0]),function(T,q){var o=k(T,null,"Parenthesis");o.$$prototype.expr=n,C(o,"$initialize",function(a){return this.expr=a},1),C(o,"$eval",function(a){return this.expr.$eval(a)},1),C(o,"$output",function(){return"("+this.expr.$output()+")"},0),C(o,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(h[0]),function(T,q){var o=k(T,null,"Number");return o.$$prototype.value=n,C(o,"$initialize",function(a){return this.value=a},1),C(o,"$eval",function(a){return this.value},1),C(o,"$output",function(){return this.value.$to_s()},0),G(o,"s_exp","output")}(h[0])},Opal.modules.strscan=function(r){var Z,K,U,ee,H,Y=[],n=r.nil,e=r.def,k=r.truthy,C=r.eqeqeq,N=r.Opal,l=r.send,B=r.to_a,V=r.rb_minus,v=r.alias;return Z=Y,U=[K=(0,r.klass)(Y[0],null,"StringScanner")].concat(Z),ee=r.$r(U),(H=K.$$prototype).pos=H.string=H.working=H.matched=H.prev_pos=H.match=n,K.$attr_reader("pos","matched"),e(K,"$initialize",function(f){var u=this;return u.string=f,u.pos=0,u.matched=n,u.working=f,u.match=[]},1),K.$attr_reader("string"),e(K,"$beginning_of_line?",function(){var f=this;return 0===f.pos||"\n"===f.string.charAt(f.pos-1)},0),e(K,"$scan",function(f){var u=this,w=(f=u.$anchor(f)).exec(u.working);return null==w?u.matched=n:"object"==typeof w?(u.prev_pos=u.pos,u.pos+=w[0].length,u.working=u.working.substring(w[0].length),u.matched=w[0],u.match=w,w[0]):"string"==typeof w?(u.pos+=w.length,u.working=u.working.substring(w.length),w):n},1),e(K,"$scan_until",function(f){var u=this;f=u.$anchor(f);for(var I,w=u.pos,A=u.working;;){if(I=f.exec(A),w+=1,A=A.substr(1),null!=I)return u.matched=u.string.substr(u.pos,w-u.pos-1+I[0].length),u.match=I,u.prev_pos=w-1,u.pos=w,u.working=A.substr(I[0].length),u.matched;if(0===A.length)return u.match=[],u.matched=n}},1),e(K,"$[]",function(f){var w;if(k(this.match["$empty?"]()))return n;C(ee("Symbol"),w=f)?f=f.$to_s():C(ee("String"),w)||(f=N["$coerce_to!"](f,ee("Integer"),"to_int"));var A=this.match;return f<0&&(f+=A.length),f<0||f>=A.length||null==A[f]?n:A[f]},1),e(K,"$check",function(f){var u=this,w=(f=u.$anchor(f)).exec(u.working);return u.matched=null==w?n:w[0]},1),e(K,"$check_until",function(f){var u=this,w=u.prev_pos,A=u.pos,I=u.$scan_until(f);return I!==n&&(u.matched=I.substr(-1),u.working=u.string.substr(A)),u.prev_pos=w,u.pos=A,I},1),e(K,"$peek",function(f){return this.working.substring(0,f)},1),e(K,"$eos?",function(){return 0===this.working.length},0),e(K,"$exist?",function(f){var w=f.exec(this.working);return null==w?n:0==w.index?0:w.index+1},1),e(K,"$skip",function(f){var u=this,w=(f=u.$anchor(f)).exec(u.working);if(null==w)return u.match=[],u.matched=n;var A=w[0],I=A.length;return u.matched=A,u.match=w,u.prev_pos=u.pos,u.pos+=I,u.working=u.working.substring(I),I},1),e(K,"$skip_until",function(f){var w=this.$scan_until(f);return w===n?n:(this.matched=w.substr(-1),w.length)},1),e(K,"$get_byte",function(){var f=this,u=n;return f.pos<f.string.length?(f.prev_pos=f.pos,f.pos+=1,u=f.matched=f.working.substring(0,1),f.working=f.working.substring(1)):f.matched=n,u},0),e(K,"$match?",function(f){var u=this,w=(f=u.$anchor(f)).exec(u.working);return null==w?n:(u.prev_pos=u.pos,w[0].length)},1),e(K,"$pos=",function(f){var u=this;return f<0&&(f+=u.string.$length()),u.pos=f,u.working=u.string.slice(f)},1),e(K,"$matched_size",function(){return this.matched===n?n:this.matched.length},0),e(K,"$post_match",function(){var f=this;return f.matched===n?n:f.string.substr(f.pos)},0),e(K,"$pre_match",function(){var f=this;return f.matched===n?n:f.string.substr(0,f.prev_pos)},0),e(K,"$reset",function(){var f=this;return f.working=f.string,f.matched=n,f.pos=0},0),e(K,"$rest",function(){return this.working},0),e(K,"$rest?",function(){return 0!==this.working.length},0),e(K,"$rest_size",function(){return this.$rest().$size()},0),e(K,"$terminate",function(){var u,f=this;return f.match=n,u=[f.string.$length()],l(f,"pos=",B(u)),u[V(u.length,1)]},0),e(K,"$unscan",function(){var f=this;return f.pos=f.prev_pos,f.prev_pos=n,f.match=n,f},0),v(K,"bol?","beginning_of_line?"),v(K,"getch","get_byte"),K.$private(),e(K,"$anchor",function(f){var u=f.toString().match(/\/([^\/]+)$/);return u=u?u[1]:void 0,new RegExp("^(?:"+f.source+")",u)},1)},Opal.modules["bcdice/normalize"]=function(r){var l,E,V,Y=[],n=r.nil,t=r.module,e=r.eqeqeq,k=r.def,C=r.eqeq;return l=Y,V=[t(Y[0],"BCDice")].concat(l),(E=t(V[0],"Normalize")).$module_function(),k(E,"$comparison_operator",function(Z){var K;return e(/<=|=</,K=Z)?"<=":e(/>=|=>/,K)?">=":e(/<>|!=|=!/,K)?"!=":e(/</,K)?"<":e(/>/,K)?">":e(/=/,K)?"==":n},1),k(E,"$target_number",function(Z){return C(Z,"?")?Z:Z.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var E,U,u,w,A,I,h,H,Z,Y=r.top,n=[],t=r.nil,e=r.module,k=r.klass,C=r.const_set,N=r.hash2,l=r.truthy,B=r.send,V=r.def;return Y.$require("strscan"),Y.$require("bcdice/normalize"),E=n,U=Z=[e(n[0],"BCDice")].concat(E),u=H=[e(Z[0],"Command")].concat(U),A=[w=k(H[0],null,"Lexer")].concat(u),I=r.$r(A),(h=w.$$prototype).scanner=h.notations=t,C(A[0],"SYMBOLS",N(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),V(w,"$initialize",function(T,q){var o,m,a;return T=l(a=(m=(o=T)===t||null==o?t:B(o,"split",[" ",2]))===t||null==m?t:B(m,"first",[]))?a:"",this.scanner=I("StringScanner").$new(T),this.notations=B(q,"map",[],function($){return null==$&&($=t),l($["$is_a?"](I("String")))?I("Regexp").$new($):$},1)},2),V(w,"$next_token",function(){try{var T=this,q=t,o=t,d=t,a=t;return l(T.scanner["$eos?"]())?[!1,"$"]:(B(T.notations,"each",[],function _($){var R,c=null==_.$$s?this:_.$$s;if(null==c.scanner&&(c.scanner=t),null==$&&($=t),R=c.scanner.$scan($),!l(R))return t;r.ret(["NOTATION",R])},{$$arity:1,$$s:T}),l(q=T.scanner.$scan(/\d+/))?["NUMBER",q.$to_i()]:l(o=T.scanner.$scan(/[<>!=]+/))?(o=I("Normalize").$comparison_operator(o),[l(o)?"CMP_OP":"ILLEGAL",o]):(d=T.scanner.$getch().$upcase(),[l(a=I("SYMBOLS")["$[]"](d))?a:d.$to_sym(),d]))}catch(_){if(_===r.returner)return _.$v;throw _}},0),V(w,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var B,G,H,L,f,u,w,K,v,Y=[],n=r.nil,t=r.module,e=r.klass,k=r.def,C=r.truthy,N=r.eqeqeq;return B=Y,G=v=[t(Y[0],"BCDice")].concat(B),H=K=[t(v[0],"Command")].concat(G),f=[L=e(K[0],null,"Parsed")].concat(H),u=r.$r(f),(w=L.$$prototype).question_target=w.critical=w.fumble=w.dollar=w.modify_number=w.target_number=w.prefix_number=w.command=w.suffix_number=w.cmp_op=n,L.$attr_accessor("command"),L.$attr_accessor("prefix_number"),L.$attr_accessor("suffix_number"),L.$attr_accessor("critical"),L.$attr_accessor("fumble"),L.$attr_accessor("dollar"),L.$attr_accessor("modify_number"),L.$attr_accessor("cmp_op"),L.$attr_accessor("target_number"),L.$attr_writer("question_target"),k(L,"$initialize",function(){var I=this;return I.prefix_number=n,I.suffix_number=n,I.critical=n,I.fumble=n,I.dollar=n,I.cmp_op=n,I.target_number=n,I.question_target=!1},0),k(L,"$question_target?",function(){return this.question_target},0),k(L,"$to_s",function(I){var d,h=this,b=n,T=n,q=n,o=n,m=n;return null==I&&(I="after_command"),b=C(h.critical)?"@"+h.critical:n,T=C(h.fumble)?"#"+h.fumble:n,q=C(h.dollar)?"$"+h.dollar:n,o=u("Format").$modifier(h.modify_number),m=C(h.question_target)?"?":h.target_number,N("after_command",d=I)?[h.prefix_number,h.command,h.suffix_number,b,T,q,o,h.cmp_op,m].$join():N("after_modify_number",d)?[h.prefix_number,h.command,h.suffix_number,o,b,T,q,h.cmp_op,m].$join():N("after_target_number",d)?[h.prefix_number,h.command,h.suffix_number,o,h.cmp_op,m,b,T,q].$join():n},-1)},Opal.modules["bcdice/command/parser"]=function(r){var u,h,d,c,R,z,p,D,M,j,i,S,F,a,_,$,X,T,q,A,Y=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,C=r.klass,N=r.module,l=r.hash2,B=r.send2,V=r.find_super,v=r.def,E=r.send,G=r.to_a,Z=r.rb_minus,K=r.eqeq,U=r.hash,ee=r.const_set,H=r.truthy,L=r.to_ary;return Y.$require("racc/parser.rb"),Y.$require("bcdice/arithmetic/node"),Y.$require("bcdice/command/lexer"),Y.$require("bcdice/command/parsed"),C(k(t("BCDice"),"Command"),k(t("Racc"),"Parser"),"Parser"),u=n,h=A=[N(n[0],"BCDice")].concat(u),T=[N(A[0],"Command")].concat(h),q=r.$r(T),d=T,_=[a=C(T[0],k(q("Racc"),"Parser"),"Parser")].concat(d),$=r.$r(_),(X=a.$$prototype).notations=X.lexer=X.modifier=X.suffix_number=X.prefix_number=X.need_suffix_number=X.need_prefix_number=X.critical=X.fumble=X.dollar=X.allowed_cmp_op=X.question_target=e,v(a,"$initialize",function W(y,J){var g,x,ne,$e,O=this;if(delete W.$$p,g=r.slice.call(arguments),null==(x=r.extract_kwargs(g)))x=l([],{});else if(!x.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(ne=g,!r.hasOwnProperty.call(x.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return $e=x.$$smap.round_type,B(O,V(O,"initialize",W,!1,!0),"initialize",[],null),O.notations=ne,O.round_type=$e,O.prefix_number=!1,O.suffix_number=!1,O.need_prefix_number=!1,O.need_suffix_number=!1,O.modifier=!0,O.critical=!1,O.fumble=!1,O.dollar=!1,O.allowed_cmp_op=[e,">=",">","<=","<","==","!="],O.question_target=!1},-2),v(a,"$disable_modifier",function(){return this.modifier=!1,this},0),v(a,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),v(a,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),v(a,"$has_prefix_number",function(){var y=this;return y.prefix_number=!0,y.need_prefix_number=!0,y},0),v(a,"$has_suffix_number",function(){var y=this;return y.suffix_number=!0,y.need_suffix_number=!0,y},0),v(a,"$enable_critical",function(){return this.critical=!0,this},0),v(a,"$enable_fumble",function(){return this.fumble=!0,this},0),v(a,"$enable_dollar",function(){return this.dollar=!0,this},0),v(a,"$restrict_cmp_op_to",function(y){var J,x=this;return J=r.slice.call(arguments),x.allowed_cmp_op=J,x},-1),v(a,"$enable_question_target",function(){return this.question_target=!0,this},0),v(a,"$parse",function(y){var J=this;try{return J.lexer=$("Lexer").$new(y,J.notations),J.$do_parse()}catch(g){if(!r.rescue(g,[$("ParseError"),$("ZeroDivisionError")]))throw g;try{return e}finally{r.pop_exception()}}},1),a.$private(),v(a,"$parsed",function(y,J,g,x){return E($("Parsed").$new(),"tap",[],function $e(te){var O,ue,se,le,oe,ce,ae=null==$e.$$s?this:$e.$$s,ie=e;return null==ae.round_type&&(ae.round_type=e),null==te&&(te=e),ie=[y["$[]"]("command")],E(te,"command=",G(ie)),Z(ie.length,1),ie=[(O=y["$[]"]("prefix"),O===e||null==O?e:E(O,"eval",[ae.round_type]))],E(te,"prefix_number=",G(ie)),Z(ie.length,1),ie=[(ue=y["$[]"]("suffix"),ue===e||null==ue?e:E(ue,"eval",[ae.round_type]))],E(te,"suffix_number=",G(ie)),Z(ie.length,1),ie=[(se=J["$[]"]("critical"),se===e||null==se?e:E(se,"eval",[ae.round_type]))],E(te,"critical=",G(ie)),Z(ie.length,1),ie=[(le=J["$[]"]("fumble"),le===e||null==le?e:E(le,"eval",[ae.round_type]))],E(te,"fumble=",G(ie)),Z(ie.length,1),ie=[(oe=J["$[]"]("dollar"),oe===e||null==oe?e:E(oe,"eval",[ae.round_type]))],E(te,"dollar=",G(ie)),Z(ie.length,1),ie=[g.$eval(ae.round_type)],E(te,"modify_number=",G(ie)),Z(ie.length,1),ie=[x["$[]"]("cmp_op")],E(te,"cmp_op=",G(ie)),Z(ie.length,1),K(x["$[]"]("target"),"?")?(E(te,"question_target=",G(ie=[!0])),Z(ie.length,1),E(te,"target_number=",G(ie=[0])),ie[Z(ie.length,1)]):(E(te,"question_target=",G(ie=[!1])),Z(ie.length,1),ie=[(ce=x["$[]"]("target"),ce===e||null==ce?e:E(ce,"eval",[ae.round_type]))],E(te,"target_number=",G(ie)),ie[Z(ie.length,1)])},{$$arity:1,$$s:this})},4),v(a,"$next_token",function(){return this.lexer.$next_token()},0),c=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],R=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],z=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],p=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],D=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],M=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],j=[e,6,13,3,9,-1,27,-15,-10,-1,-38],i=[e,e,e,e,e,e,19,16,15,e,e],S=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],F=U(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),ee(_[0],"Racc_arg",[c,R,p,z,D,M,i,j,19,S,F,58,35,!0]),ee(_[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),ee(_[0],"Racc_debug_parser",!1),v(a,"$_reduce_1",function(y,J,g){var x;return H(this.modifier)||this.$raise($("ParseError")),x=L(y),this.$parsed(null==x[0]?e:x[0],null==x[1]?e:x[1],null==x[2]?e:x[2],null==x[3]?e:x[3])},3),v(a,"$_reduce_2",function(y,J,g){var x;return H(this.modifier)||this.$raise($("ParseError")),x=L(y),this.$parsed(null==x[0]?e:x[0],null==x[2]?e:x[2],null==x[1]?e:x[1],null==x[3]?e:x[3])},3),v(a,"$_reduce_3",function(y,J,g){var x,ue;return ue=null==(x=L(y))[2]?e:x[2],this.$parsed(null==x[0]?e:x[0],null==x[1]?e:x[1],k(k($("Arithmetic"),"Node"),"Number").$new(0),ue)},3),v(a,"$_reduce_4",function(y,J,g){var x=this;return H(x.prefix_number)&&H(x.suffix_number)||x.$raise($("ParseError")),l(["command","prefix","suffix"],{command:y["$[]"](1),prefix:y["$[]"](0),suffix:y["$[]"](2)})},3),v(a,"$_reduce_5",function(y,J,g){var x=this;return H(x.prefix_number)||x.$raise($("ParseError")),H(x.need_suffix_number)&&x.$raise($("ParseError")),l(["command","prefix"],{command:y["$[]"](1),prefix:y["$[]"](0)})},3),v(a,"$_reduce_6",function(y,J,g){var x=this;return H(x.suffix_number)||x.$raise($("ParseError")),H(x.need_prefix_number)&&x.$raise($("ParseError")),l(["command","suffix"],{command:y["$[]"](0),suffix:y["$[]"](1)})},3),v(a,"$_reduce_7",function(y,J,g){var x=this;return(H(x.need_prefix_number)||H(x.need_suffix_number))&&x.$raise($("ParseError")),l(["command"],{command:y["$[]"](0)})},3),v(a,"$_reduce_8",function(y,J,g){return l([],{})},3),v(a,"$_reduce_9",function(y,J,g){var x,ue,se,te=e;return te=null==(x=L(y))[0]?e:x[0],ue=null==x[2]?e:x[2],H(this.critical)&&H(te["$[]"]("critical")["$nil?"]())||this.$raise($("ParseError")),E(te,"[]=",G(se=["critical",ue])),Z(se.length,1),te},3),v(a,"$_reduce_10",function(y,J,g){var x,ue,se,te=e;return te=null==(x=L(y))[0]?e:x[0],ue=null==x[2]?e:x[2],H(this.fumble)&&H(te["$[]"]("fumble")["$nil?"]())||this.$raise($("ParseError")),E(te,"[]=",G(se=["fumble",ue])),Z(se.length,1),te},3),v(a,"$_reduce_11",function(y,J,g){var x,ue,se,te=e;return te=null==(x=L(y))[0]?e:x[0],ue=null==x[2]?e:x[2],H(this.dollar)&&H(te["$[]"]("dollar")["$nil?"]())||this.$raise($("ParseError")),E(te,"[]=",G(se=["dollar",ue])),Z(se.length,1),te},3),v(a,"$_reduce_12",function(y,J,g){return y["$[]"](1)},3),v(a,"$_reduce_13",function(y,J,g){return k(k($("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))},3),v(a,"$_reduce_14",function(y,J,g){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))},3),v(a,"$_reduce_15",function(y,J,g){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))},3),v(a,"$_reduce_16",function(y,J,g){return H(this.allowed_cmp_op["$include?"](e))||this.$raise($("ParseError")),l([],{})},3),v(a,"$_reduce_17",function(y,J,g){var x,te,O;return O=null==(x=L(y))[1]?e:x[1],H(this.allowed_cmp_op["$include?"](te=null==x[0]?e:x[0]))||this.$raise($("ParseError")),l(["cmp_op","target"],{cmp_op:te,target:O})},3),v(a,"$_reduce_18",function(y,J,g){var ne,x=this;return ne=y["$[]"](0),H(x.question_target)||x.$raise($("ParseError")),H(x.allowed_cmp_op["$include?"](ne))||x.$raise($("ParseError")),l(["cmp_op","target"],{cmp_op:ne,target:"?"})},3),v(a,"$_reduce_19",function(y,J,g){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"+",y["$[]"](2))},3),v(a,"$_reduce_20",function(y,J,g){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"-",y["$[]"](2))},3),v(a,"$_reduce_22",function(y,J,g){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(y["$[]"](0),"*",y["$[]"](2))},3),v(a,"$_reduce_23",function(y,J,g){return y["$[]"](3).$new(y["$[]"](0),y["$[]"](2))},3),v(a,"$_reduce_25",function(y,J,g){return k(k($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),v(a,"$_reduce_26",function(y,J,g){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),v(a,"$_reduce_27",function(y,J,g){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),v(a,"$_reduce_28",function(y,J,g){return k(k($("Arithmetic"),"Node"),"DivideWithRound")},3),v(a,"$_reduce_29",function(y,J,g){return k(k($("Arithmetic"),"Node"),"DivideWithFloor")},3),v(a,"$_reduce_30",function(y,J,g){return y["$[]"](1)},3),v(a,"$_reduce_31",function(y,J,g){return k(k($("Arithmetic"),"Node"),"Negative").$new(y["$[]"](1))},3),v(a,"$_reduce_33",function(y,J,g){return y["$[]"](1)},3),v(a,"$_reduce_34",function(y,J,g){return k(k($("Arithmetic"),"Node"),"Number").$new(y["$[]"](0))},3),v(a,"$_reduce_none",function(y,J,g){return y["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var B,G,ee,H,L,f,K,v,Y=[],n=r.nil,t=r.module,e=r.send,k=r.eqeqeq,C=r.truthy,N=r.def;return B=Y,G=v=[t(Y[0],"BCDice")].concat(B),ee=K=[t(v[0],"Deprecated")].concat(G),L=[H=t(K[0],"Checker")].concat(ee),f=r.$r(L),H.$private(),N(H,"$check_result_legacy",function(w,A,I,h){var o,b=this,T=n,q=n,m=n,d=n;return T=e(A,"map",[],"sides".$to_proc()),o=(q=e(A,"map",[],"value".$to_proc())).$sum(),m=k([100],d=T)?b.$check_1D100(w,o,I,h):k([20],d)?b.$check_1D20(w,o,I,h):k([6,6],d)?b.$check_2D6(w,o,q,I,h):n,(C(m["$nil?"]())||C(m["$empty?"]()))&&(m=k([10],d=T.$uniq())?b.$check_nD10(w,o,q,I,h):k([6],d)?b.$check_nD6(w,o,q,I,h):n,C(m["$nil?"]())||C(m["$empty?"]()))?n:f("Result").$new(m.$delete_prefix(" \uff1e "))},4),N(H,"$check_1D100",function(w,A,I,h){return n},4),N(H,"$check_1D20",function(w,A,I,h){return n},4),N(H,"$check_nD10",function(w,A,I,h,b){return n},5),N(H,"$check_2D6",function(w,A,I,h,b){return n},5),N(H,"$check_nD6",function(w,A,I,h,b){return n},5)},Opal.modules["bcdice/base"]=function(r){var A,q,_,c,R,o,m,d,a,h,Y=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,C=r.module,N=r.klass,l=r.truthy,B=r.def,V=r.regexp,v=r.rb_plus,E=r.send,G=r.to_a,Z=r.rb_minus,K=r.eqeqeq,U=r.eqeq,ee=r.range,H=r.rb_divide,L=r.rb_times,f=r.rb_ge,u=e;return Y.$require("i18n"),Y.$require("i18n/backend/fallbacks"),Y.$require("bcdice/randomizer"),Y.$require("bcdice/dice_table"),Y.$require("bcdice/enum"),Y.$require("bcdice/translate"),Y.$require("bcdice/result"),Y.$require("bcdice/command/parser"),Y.$require("bcdice/deprecated/checker"),A=n,q=h=[C(n[0],"BCDice")].concat(A),m=[o=N(h[0],null,"Base")].concat(q),d=r.$r(m),(a=o.$$prototype).sort_add_dice=a.sort_barabara_dice=a.enabled_d9=a.raw_input=a.randomizer=a.enabled_upcase_input=a.debug=e,c=[_=r.get_singleton_class(o)].concat(m),R=r.$r(c),_.$attr_reader("prefixes"),B(_,"$register_prefix",function(p){var M,j=this,i=e;return null==j.prefixes&&(j.prefixes=e),M=r.slice.call(arguments),j.prefixes=l(i=j.prefixes)?i:[],j.prefixes.$concat(M.$flatten())},-1),B(_,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),B(_,"$prefixes_pattern",function(){var p=this,D=e;return null==p.prefixes_pattern&&(p.prefixes_pattern=e),null==p.prefixes&&(p.prefixes=e),p.prefixes_pattern=l(D=p.prefixes_pattern)?D:e,l(p.prefixes_pattern)?p.prefixes_pattern:(p.prefixes=l(D=p.prefixes)?D:[],p.prefixes.$freeze(),p.prefixes_pattern=(l(p.prefixes["$empty?"]())?/(?!)/:V(["^(S)?(",p.prefixes.$join("|"),")"],"i")).$freeze())},0),B(_,"$command_pattern",function(){var p=this,D=e,M=e;return null==p.command_pattern&&(p.command_pattern=e),null==p.prefixes&&(p.prefixes=e),p.command_pattern=l(D=p.command_pattern)?D:e,l(p.command_pattern)?p.command_pattern:(p.prefixes=l(D=p.prefixes)?D:[],p.prefixes.$freeze(),M=v(E(k(R("CommonCommand"),"COMMANDS"),"map",[],function(i){return null==i&&(i=e),k(i,"PREFIX_PATTERN").$source()},1),p.prefixes),p.command_pattern=V(["^S?(",M.$join("|"),")"],"i").$freeze())},0),B(_,"$eval",function(p){return this.$new(p).$eval()},1),o.$include(d("Translate")),o.$include(k(d("Deprecated"),"Checker")),B(o,"$initialize",function($){var c=this;return c.raw_input=$,c.sort_add_dice=!1,c.sort_barabara_dice=!1,c.d66_sort_type=k(d("D66SortType"),"NO_SORT"),c.enabled_d9=!1,c.round_type=k(d("RoundType"),"FLOOR"),c.sides_implicit_d=6,c.upper_dice_reroll_threshold=e,c.reroll_dice_reroll_threshold=e,c.default_cmp_op=e,c.default_target_number=e,c.enabled_upcase_input=!0,c.locale="ja_jp",c.randomizer=k(d("BCDice"),"Randomizer").$new(),c.debug=!1},1),o.$attr_accessor("randomizer"),o.$attr_reader("d66_sort_type"),o.$attr_reader("round_type"),o.$attr_reader("sides_implicit_d"),o.$attr_reader("upper_dice_reroll_threshold"),o.$attr_reader("reroll_dice_reroll_threshold"),o.$attr_reader("default_cmp_op"),o.$attr_reader("default_target_number"),B(o,"$sort_add_dice?",function(){return this.sort_add_dice},0),B(o,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),B(o,"$enabled_d9?",function(){return this.enabled_d9},0),B(o,"$enable_debug",function(){return this.debug=!0},0),B(o,"$eval",function(){var c,R,z,$=this,p=e;return c=k(d("BCDice"),"Preprocessor").$process($.raw_input,$),R=l(z=$.$dice_command(c))?z:$.$eval_common_command($.raw_input),l(R)?(p=[$.randomizer.$rand_results()],E(R,"rands=",G(p)),Z(p.length,1),p=[$.randomizer.$detailed_rand_results()],E(R,"detailed_rands=",G(p)),Z(p.length,1),R):e},0),B(o,"$change_text",function($){return $},1),B(o,"$check_result",function($,c,R,z){var p=this,D=e,M=e,j=e,i=e,S=e;return D=p.$check_result_legacy($,c,R,z),l(D)?D:(M=E(c,"map",[],"sides".$to_proc()),i=(j=E(c,"map",[],"value".$to_proc())).$sum(),D=K([100],S=M)?p.$result_1d100($,i,R,z):K([20],S)?p.$result_1d20($,i,R,z):K([6,6],S)?p.$result_2d6($,i,j,R,z):e,U(D,d("Result").$nothing())?e:l(D)?D:(D=K([10],S=M.$uniq())?p.$result_nd10($,i,j,R,z):K([6],S)?p.$result_nd6($,i,j,R,z):e,U(D,d("Result").$nothing())?e:l(D)?D:p.$result_ndx($,R,z)))},4),B(o,"$grich_text",function($,c,R){return e},3),o.$private(),B(o,"$eval_common_command",function($){try{return $=this.$change_text($),E(k(d("CommonCommand"),"COMMANDS"),"each",[],function R(z){var D,p=null==R.$$s?this:R.$$s;if(null==p.randomizer&&(p.randomizer=e),null==z&&(z=e),D=z.$eval($,p,p.randomizer),!l(D))return e;r.ret(D)},{$$arity:1,$$s:this}),e}catch(R){if(R===r.returner)return R.$v;throw R}},1),B(o,"$dice_command",function($){var c=this,R=e,z=e,p=e,D=e,M=e;return l(c.enabled_upcase_input)&&($=$.$upcase()),R=c.$class().$prefixes_pattern().$match($),l(R)?(z=R["$[]"](1)["$nil?"]()["$!"](),l(z)&&($=$["$[]"](ee(1,-1,!1))),p=c.$eval_game_system_specific_command($),l(p["$is_a?"](d("Result")))?(D=[l(M=p["$secret?"]())?M:z],E(p,"secret=",G(D)),Z(D.length,1),p):l(p["$nil?"]())||l(p["$empty?"]())||U(p,"1")?e:E(d("Result").$new(),"tap",[],function(i){return null==i&&(i=e),D=[p.$to_s()],E(i,"text=",G(D)),Z(D.length,1),E(i,"secret=",G(D=[z])),D[Z(D.length,1)]},1)):e},1),B(o,"$eval_game_system_specific_command",function($){return e},1),B(o,"$result_ndx",function($,c,R){return l(R["$is_a?"](d("String")))?e:l($.$send(c,R))?d("Result").$success(this.$translate("success")):d("Result").$failure(this.$translate("failure"))},3),B(o,"$result_1d100",function($,c,R,z){return e},4),B(o,"$result_1d20",function($,c,R,z){return e},4),B(o,"$result_nd10",function($,c,R,z,p){return e},5),B(o,"$result_2d6",function($,c,R,z,p){return e},5),B(o,"$result_nd6",function($,c,R,z,p){return e},5),B(o,"$get_table_by_2d6",function($){return this.$get_table_by_nD6($,2)},1),B(o,"$get_table_by_1d6",function($){return this.$get_table_by_nD6($,1)},1),B(o,"$get_table_by_nD6",function($,c){return this.$get_table_by_nDx($,c,6)},2),B(o,"$get_table_by_nDx",function($,c,R){var p,D=e;return p=this.randomizer.$roll_sum(c,R),D=this.$get_table_value($["$[]"](Z(p,c))),l(D["$nil?"]())?["1",0]:[D,p]},3),B(o,"$get_table_by_1d3",function($){var z,p,c=this,D=e;return c.$debug("get_table_by_1d3"),z=c.randomizer.$roll_sum(1,6),c.$debug("num",z),p=H(Z(z,1),2).$to_i(),c.$debug("index",p),D=$["$[]"](p),l(D["$nil?"]())?["1",0]:[D,z]},1),B(o,"$get_table_by_d66_swap",function($){var R;return R=this.randomizer.$roll_d66(k(d("D66SortType"),"ASC")),[this.$get_table_by_number(R,$),R]},1),B(o,"$get_table_by_d66",function($){var R,z,p,M,D=e;return R=this.randomizer.$roll_once(6),z=this.randomizer.$roll_once(6),p=v(L(Z(R,1),6),Z(z,1)),D=$["$[]"](p),M=""+R+z,l(D["$nil?"]())?["1",M]:[D,M]},1),B(o,"$get_table_by_number",function($,c,R){try{return null==R&&(R="1"),E(c,"each",[],function p(D){var j,M=null==p.$$s?this:p.$$s;if(null==D&&(D=e),j=D["$[]"](0),!l(f(j,$)))return e;r.ret(M.$get_table_value(D["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(R)}catch(p){if(p===r.returner)return p.$v;throw p}},-3),B(o,"$get_table_value",function($){return l($["$is_a?"](d("Proc")))?$.$call():$},1),B(o,"$roll_tables",function($,c){var z=e;return z=c["$[]"]($),l(z)?z.$roll(this.randomizer).$to_s():e},2),B(o,"$debug",function($,c){var z,p=this,D=e,M=e;return z=r.slice.call(arguments,1),l(p.debug)?(D=l($["$is_a?"](d("String")))?$:$.$inspect(),l(z["$empty?"]())?p.$warn(D):(M=E(z,"map",[],function(i){return null==i&&(i=e),l(i["$is_a?"](d("String")))?'"'+i+'"':i.$inspect()},1),p.$warn(D+": "+M.$join(", ")))):e},-2),k(k(t("I18n"),"Backend"),"Simple").$include(k(k(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),u=["ja_jp"],E(t("I18n"),"default_locale=",G(u)),Z(u.length,1),u=[["ja_jp"]],E(t("I18n").$fallbacks(),"defaults=",G(u)),u[Z(u.length,1)]},Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var B,G,U,H,L,Z,K,v,Y=[],n=r.nil,t=r.$$$,e=r.module,k=r.hash2,C=r.truthy,N=r.def;return B=Y,G=v=[e(Y[0],"BCDice")].concat(B),K=[Z=e(v[0],"ArithmeticEvaluator")].concat(G),H=[U=r.get_singleton_class(Z)].concat(K),L=r.$r(H),N(U,"$eval",function(u,w){var A,I=n;if(null==w)w=k([],{});else if(!w.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(A=w.$$smap.round_type)&&(A=t(L("RoundType"),"FLOOR")),C(u)&&C(I=L("Arithmetic").$eval(u,A))?I:0},-2)},Opal.queue(function(r){var b,m,$,c,R,S,s,z,p,D,M,a,_,q,Y=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,C=r.klass,N=r.const_set,l=r.send2,B=r.find_super,V=r.def,v=r.truthy,E=r.hash2,G=r.rb_plus,Z=r.send,K=r.to_a,U=r.rb_minus,ee=r.rb_ge,H=r.eqeqeq,L=r.rb_divide,f=r.rb_times,u=r.eqeq,w=r.neqeq,A=r.rb_le,I=r.rb_lt;return Y.$require("bcdice/base"),Y.$require("bcdice/arithmetic_evaluator"),b=n,m=q=[k(n[0],"BCDice")].concat(b),a=[k(q[0],"GameSystem")].concat(m),_=r.$r(a),$=a[0],c=_("Base"),R=a,p=[z=C($,c,"LogHorizon")].concat(R),D=r.$r(p),(M=z.$$prototype).randomizer=M.locale=t,N(p[0],"ID","LogHorizon"),N(p[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),N(p[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),N(p[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),z.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),V(z,"$initialize",function j(i){var s=this;return delete j.$$p,l(s,B(s,"initialize",j,!1,!0),"initialize",[i],null),s.d66_sort_type=e(D("D66SortType"),"NO_SORT")},1),V(z,"$eval_game_system_specific_command",function(i){var s,P,F,Q,re,X,W,y,J,g,x,S=this;return v(s=v(P=v(F=v(Q=v(re=v(X=v(W=v(y=v(J=v(g=v(x=S.$getCheckRollDiceCommandResult(i))?x:S.$roll_consumption(i))?g:S.$roll_consumption_table(i))?J:S.$roll_treasure(i))?y:S.$roll_treasure_table(i))?W:S.$roll_treasure_table_b2(i))?X:S.$getInventionAttributeTextDiceCommandResult(i))?re:S.$getTroubleInAkibaStreetDiceCommandResult(i))?Q:S.$getAbandonedChildDiceCommandResult(i))?F:S.$getMusicalInstrumentTypeDiceCommandResult(i))?P:S.$roll_eastal_exploration_table(i))?s:S.$roll_tables(i,e(S.$class(),"TABLES"))},1),z.$private(),V(z,"$getCheckRollDiceCommandResult",function(i){var S=this,P=t,F=t,Q=t,re=t,X=t,W=t,J=t;return P=e(D("Command"),"Parser").$new(/\d+LH/,E(["round_type"],{round_type:S.$round_type()})).$restrict_cmp_op_to(t,">=").$parse(i),v(P)?(F=P.$command().$to_i(),re=(Q=S.randomizer.$roll_barabara(F,6)).$sum(),X=G(re,P.$modify_number()),W=S.$result_text(F,Q,X,P),J=[["("+P+")",re+"["+Q.$join(",")+"]"+D("Format").$modifier(P.$modify_number()),X,W.$text()].$compact().$join(" \uff1e ")],Z(W,"text=",K(J)),U(J.length,1),W):t},1),V(z,"$result_text",function(i,S,s,P){var F=this;return v(ee(S.$count(6),2))?D("Result").$critical(F.$translate("LogHorizon.LH.critical")):v(ee(S.$count(1),i))?D("Result").$fumble(F.$translate("LogHorizon.LH.fumble")):v(P.$cmp_op()["$nil?"]())?D("Result").$new():v(ee(s,P.$target_number()))?D("Result").$success(F.$translate("success")):D("Result").$failure(F.$translate("failure"))},4),V(z,"$getValue",function(i,S){return v(i["$nil?"]())||v(i["$empty?"]())?S:D("ArithmeticEvaluator").$eval(i)},2),V(z,"$roll_consumption",function(i){var s=t,P=t,F=t,Q=t,re=t;return s=/^CT\d*([+\-\d]+)?$/.$match(i),v(s)?(P=D("ArithmeticEvaluator").$eval(s["$[]"](1)),F=D("Format").$modifier(P),Q=this.randomizer.$roll_once(6),v(F["$empty?"]())||(re=G(Q.$to_s(),F)),["(1D6"+F+")",re,G(Q,P)].$compact().$join(" \uff1e ")):t},1),V(z,"$roll_consumption_table",function(i){var s=t,P=t,F=t,Q=t;return s=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),v(s)?(P=this.$construct_consumption_table(s["$[]"](1)),F=s["$[]"](2).$to_i(),Q=D("ArithmeticEvaluator").$eval(s["$[]"](3)),v(s["$[]"](4))&&P.$fix_dice_value(s["$[]"](4).$to_i()),P.$roll(F,Q,this.randomizer)):t},1),V(z,"$construct_consumption_table",function(i){var P,S=this,s=t;return s=H("P",P=i)?S.$translate("LogHorizon.CT.PCT"):H("E",P)?S.$translate("LogHorizon.CT.ECT"):H("G",P)?S.$translate("LogHorizon.CT.GCT"):H("C",P)?S.$translate("LogHorizon.CT.CCT"):H("ES",P)?S.$translate("LogHorizon.CT.ESCT"):H("CS",P)?S.$translate("LogHorizon.CT.CSCT"):t,D("ConsumptionTable").$new(s["$[]"]("name"),s["$[]"]("items"))},1),(s=(S=C(p[0],null,"ConsumptionTable")).$$prototype).tables=s.dice_value=s.name=t,V(S,"$initialize",function(F,Q){return this.name=F,this.tables=Q,this.dice_value=t},2),V(S,"$fix_dice_value",function(F){return this.dice_value=F},1),V(S,"$roll",function(F,Q,re){var W,J,x,X=this,y=t,g=t;return W=L(U(F,1),5).$clamp(0,U(X.tables.$size(),1)),y=X.tables["$[]"](W),X.dice_value=v(J=X.dice_value)?J:re.$roll_once(6),g=G(X.dice_value,Q),x=y["$[]"](g.$clamp(0,7)),X.name+"("+g+"["+X.dice_value+"]) \uff1e "+x},3),V(z,"$roll_treasure",function(i){var s=t,P=t,F=t,Q=t,re=t,X=t;return s=/^TRS(\d+)?([+\-\d]+)?$/.$match(i),v(s)?(P=s["$[]"](1).$to_i(),F=D("ArithmeticEvaluator").$eval(s["$[]"](2)),re=(Q=this.randomizer.$roll_barabara(2,6)).$sum(),X=G(G(re,f(P,5)),F),"(2D6+"+P+"*5"+D("Format").$modifier(F)+") \uff1e "+re+"["+Q.$join(",")+"]"+D("Format").$modifier(G(f(P,5),F))+" \uff1e "+X):t},1),V(z,"$roll_treasure_table",function(i){var S=this,s=t,P=t,F=t,Q=t,re=t;return s=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),v(s)?(P=s["$[]"](1),F=S.$construct_treasure_table(P),Q=s["$[]"](2).$to_i(),re=D("ArithmeticEvaluator").$eval(s["$[]"](3)),u(Q,0)&&u(re,0)?S.$translate("LogHorizon.TRS.need_cr",E(["command"],{command:i})):(v(s["$[]"](4))&&F.$fix_dice_value(7),F.$roll(Q,re,S.randomizer))):t},1),V(z,"$construct_treasure_table",function(i){return u(i,"HTRS")?D("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):D("TreasureTable").$from_i18n("LogHorizon.TRS."+i,this.locale)},1),V(z,"$roll_treasure_table_b2",function(i){var S=this,s=t,P=t,F=t,Q=t,re=t;return s=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),v(s)?(P=s["$[]"](1),F=D("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+P,S.locale),Q=s["$[]"](2).$to_i(),re=D("ArithmeticEvaluator").$eval(s["$[]"](3)),u(Q,0)&&u(re,0)?S.$translate("LogHorizon.TRS.need_cr",E(["command"],{command:i})):(v(s["$[]"](4))&&F.$fix_dice_value(7),F.$roll(Q,re,S.randomizer))):t},1),function(j,i,S){var re,W,y,s=C(j,null,"TreasureTable"),P=[s].concat(S),F=r.$r(P),Q=s.$$prototype;Q.dice_list=Q.name=Q.items=t,s.$include(F("Translate")),W=[re=r.get_singleton_class(s)].concat(P),y=r.$r(W),V(re,"$from_i18n",function(g,x){var $e=t;return $e=y("I18n").$translate(g,E(["raise","locale"],{raise:!0,locale:x})),this.$new($e["$[]"]("name"),$e["$[]"]("items"),x)},2),V(s,"$initialize",function(X,W,y){var J=this;return J.name=X,J.items=W,J.locale=y,J.dice_list=t},3),V(s,"$fix_dice_value",function(X){return this.dice_list=[X]},1),V(s,"$roll",function(X,W,y){var J,g=this,x=t,ne=t,$e=t,te=t;return u(X,0)&&u(W,0)?t:(x=u(X,0)&&w(W,0)?W:(g.dice_list=v(ne=g.dice_list)?ne:y.$roll_barabara(2,6),G(G(g.dice_list.$sum(),f(5,X)),W)),$e=g.$pick_item(x),v(g.dice_list)&&(te="["+((J=g.dice_list)===t||null==J?t:Z(J,"join",[","]))+"]"),g.name+"("+x+te+") \uff1e "+$e)},3),s.$private(),V(s,"$pick_item",function(X){var W=this;return v(A(X,6))?W.$translate("LogHorizon.TRS.below_lower_limit",E(["value"],{value:6})):v(A(X,62))?W.items["$[]"](X.$to_s()):v(A(X,72))?W.items["$[]"](U(X,10).$to_s())+"&80G":v(A(X,82))?W.items["$[]"](U(X,20).$to_s())+"&160G":v(A(X,87))?W.items["$[]"](U(X,30).$to_s())+"&260G":W.$translate("LogHorizon.TRS.exceed_upper_limit",E(["value"],{value:88}))},1)}(p[0],0,p),function(j,i){var S=C(j,i,"HeroineTreasureTable");S.$$prototype.items=t,V(S,"$pick_item",function(F){var Q=this;return v(A(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",E(["value"],{value:6})):v(A(F,53))?Q.items["$[]"](F.$to_s()):Q.$translate("LogHorizon.TRS.exceed_upper_limit",E(["value"],{value:54}))},1)}(p[0],D("TreasureTable")),function(j,i){var S=C(j,i,"ExpansionTreasureTable");S.$$prototype.items=t,V(S,"$pick_item",function(F){var Q=this;return v(A(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",E(["value"],{value:6})):v(A(F,162))?Q.items["$[]"](F.$to_s()):v(A(F,172))?Q.items["$[]"](U(F,10).$to_s())+"&200G":v(A(F,182))?Q.items["$[]"](U(F,20).$to_s())+"&400G":v(A(F,187))?Q.items["$[]"](U(F,30).$to_s())+"&600G":Q.$translate("LogHorizon.TRS.exceed_upper_limit",E(["value"],{value:188}))},1)}(p[0],D("TreasureTable")),V(z,"$getInventionAttributeTextDiceCommandResult",function(i){var s=t,P=t,F=t,Q=t,re=t;return v(i["$=~"](/IAT([ABMDLT]*)/))?(s=this.$translate("LogHorizon.IAT.name"),P=v(D("Regexp").$last_match(1))&&w(D("Regexp").$last_match(1),"")?D("Regexp").$last_match(1):"MDLT",F=P.$length()["$=="](1),Q=[],re=[],Z(P.$split(/(?:)/),"each",[],function X(W){var x,y=null==X.$$s?this:X.$$s,J=t,g=t,ne=t;return null==y.randomizer&&(y.randomizer=t),null==W&&(W=t),J=y.randomizer.$roll_once(6),re["$<<"](J.$to_s()),ne=(g=H("A",x=W)||H("M",x)?y.$translate("LogHorizon.IAT.A"):H("B",x)||H("D",x)?y.$translate("LogHorizon.IAT.B"):H("L",x)?y.$translate("LogHorizon.IAT.L"):H("T",x)?y.$translate("LogHorizon.IAT.T"):t)["$[]"]("items")["$[]"](U(J,1)),v(F)&&(ne=g["$[]"]("name")+"\uff1a"+ne),Q.$push(ne)},{$$arity:1,$$s:this}),s+"(["+re.$join(",")+"]) \uff1e "+Q.$join(" ")):t},1),V(z,"$getTroubleInAkibaStreetDiceCommandResult",function(i){return u(i,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):t},1),V(z,"$getAbandonedChildDiceCommandResult",function(i){return u(i,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):t},1),V(z,"$roll_random_table",function(i){var s=t,P=t,F=t,Q=t;return s=this.$translate(i),P=s["$[]"]("tables"),F=this.randomizer.$roll_barabara(P.$size(),6),Q=Z(F.$map(),"with_index",[],function(X,W){return null==X&&(X=t),null==W&&(W=t),P["$[]"](W)["$[]"](U(X,1))},2),s["$[]"]("name")+"(["+F.$join(",")+"]) \uff1e "+Q.$join(" ")},1),V(z,"$getMusicalInstrumentTypeDiceCommandResult",function(i){var S=this,s=t,P=t,F=t,Q=t,re=t,X=t,W=t;return!v(i["$=~"](/MII(\d?)/))||(s=(v(P=D("Regexp").$last_match(1))?D("Regexp").$last_match(1)["$!="](""):P)["$!"](),F=v(s)?S.randomizer.$roll_once(6):D("Regexp").$last_match(1).$to_i(),v(I(F,1))||I(6,F))?t:(Q=S.$translate("LogHorizon.MII.name"),re=S.$translate("LogHorizon.MII.type_list")["$[]"](U(F,1)),X=S.randomizer.$roll_once(6),W=S.$translate("LogHorizon.MII.items")["$[]"](U(F,1))["$[]"](U(X,1)),G(G(Q.$to_s(),v(s)?"("+F+")":"")," \uff1e "+re+"("+X+") \uff1e "+W))},1),V(z,"$roll_eastal_exploration_table",function(i){var S,s=this,P=t,F=t,Q=t,re=t,X=t,W=t,y=t,J=t,x=t;return P=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),!v(P)||v(P["$[]"](1)["$nil?"]())&&v(P["$[]"](2)["$nil?"]())&&v(P["$[]"](3)["$nil?"]())?t:(F=P["$[]"](1).$to_i(),Q=D("ArithmeticEvaluator").$eval(P["$[]"](2)),re=(S=P["$[]"](3))===t||null==S?t:Z(S,"to_i",[]),X=v(re)?[re]:u(F,0)?[]:s.randomizer.$roll_barabara(2,6),v(X["$empty?"]())||(W="["+X.$join(",")+"]"),y=G(G(X.$sum(),f(F,5)),Q).$clamp(7,162),J=s.$translate("LogHorizon.ESTL.name"),x=s.$translate("LogHorizon.ESTL.items")["$[]"](y.$to_s()).$chomp(),J+"("+y+W+")\n"+x)},1),function(j,i){var S=[j].concat(i),s=r.$r(S);j.$private(),V(j,"$translate_tables",function(F){return E(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",F),KOYU:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",F),MGR1:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",F),MGR2:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",F),MGR3:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",F),HLOC:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",F),PCNM:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",F)})},1)}(r.get_singleton_class(z),p),N(p[0],"TABLES",z.$translate_tables("ja_jp")),z.$register_prefix(D("TABLES").$keys())})}}]);