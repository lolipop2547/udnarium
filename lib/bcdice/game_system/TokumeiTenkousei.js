(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5101],{4905:(X,Z,j)=>{j(9993),Opal.queue(function(i){var K,Y,W,s,c,l,T,h,Q,E,g=[],e=i.nil,C=i.$$$,z=i.module,S=i.klass,d=i.const_set,R=i.send2,A=i.find_super,a=i.def,B=i.hash2,_=i.truthy,G=i.rb_plus,q=i.send,M=i.to_a,F=i.rb_minus,x=i.rb_gt,w=i.eqeq,H=i.rb_times;return K=g,Y=E=[z(g[0],"BCDice")].concat(K),h=[z(E[0],"GameSystem")].concat(Y),Q=i.$r(h),W=h,c=[s=S(h[0],Q("Base"),"TokumeiTenkousei")].concat(W),l=i.$r(c),(T=s.$$prototype).randomizer=T.dice_list=e,d(c[0],"ID","TokumeiTenkousei"),d(c[0],"NAME","\u7279\u547d\u8ee2\u653b\u751f"),d(c[0],"SORT_KEY","\u3068\u304f\u3081\u3044\u3066\u3093\u3053\u3046\u305b\u3044"),d(c[0],"HELP_MESSAGE",'\u30fb\u5224\u5b9a (xD6+y>=n)\n\u3000\u30be\u30ed\u76ee\u3067\u306e\u81ea\u52d5\u632f\u308a\u8db3\u3057\n\u30001\u306e\u51fa\u76ee\u306b\u5fdc\u3058\u3066EPP\u306e\u7372\u5f97\u91cf\u3092\u8868\u793a\n\u3000\u76ee\u6a19\u5024 "?" \u306b\u306f\u672a\u5bfe\u5fdc\n'),a(s,"$initialize",function u(n){var t=this;return delete u.$$p,R(t,A(t,"initialize",u,!1,!0),"initialize",[n],null),t.sort_add_dice=!0},1),s.$register_prefix("\\d+D6"),a(s,"$eval_game_system_specific_command",function(n){var f,y,P,b,t=this,r=e,$=e,k=e,v=e,p=e;if(r=C(l("Command"),"Parser").$new(/\d+D6/,B(["round_type"],{round_type:t.$round_type()})).$parse(n),!_(r))return e;for(f=r.$command().$to_i(),$=t.randomizer.$roll_barabara(f,6).$sort(),t.dice_list=[$];_(t["$same_all_dice?"]($));)$=t.randomizer.$roll_barabara(f,6).$sort(),t.dice_list.$push($);return y=(k=t.dice_list.$flatten()).$sum(),P=k.$count(1),v=G(y,r.$modify_number()),p=_(r.$cmp_op())?_(v.$send(r.$cmp_op(),r.$target_number()))?l("Result").$success("\u6210\u529f"):l("Result").$failure("\u5931\u6557"):e,b=[["("+r+")",t.$interim_expr(r,y),v.$to_s(),p.$text(),t.$epp(P)].$compact().$join(" \uff1e ")],q(p,"text=",M(b)),F(b.length,1),p},1),a(s,"$same_all_dice?",function(n){var o;return _(o=x(n.$size(),1))?n.$uniq().$size()["$=="](1):o},1),a(s,"$interim_expr",function(n,o){var m=e,r=e;return w(this.dice_list.$flatten().$size(),1)&&w(n.$modify_number(),0)?e:(m=q(this.dice_list,"map",[],function($){return null==$&&($=e),"["+$.$join(",")+"]"},1).$join(""),r=l("Format").$modifier(n.$modify_number()),[o.$to_s(),m,r].$join(""))},2),a(s,"$epp",function(n){return _(x(n,0))?H(n,5)+"EPP\u7372\u5f97":e},1)})}}]);