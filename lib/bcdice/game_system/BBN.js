(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2522],{8554:(L,Y,z)=>{z(9993),Opal.queue(function($){var C,T,K,u,y,o,v,M,k,p=[],r=$.nil,g=$.module,D=$.klass,m=$.const_set,n=$.truthy,a=$.rb_plus,w=$.send,E=$.to_a,b=$.rb_ge,l=$.def,q=$.eqeqeq,G=$.rb_divide,B=$.rb_gt,S=$.rb_lt;return C=p,T=k=[g(p[0],"BCDice")].concat(C),v=[g(k[0],"GameSystem")].concat(T),M=$.$r(v),K=v,y=[u=D(v[0],M("Base"),"BBN")].concat(K),(o=u.$$prototype).randomizer=o.roll_times=o.modify=o.modify_str=o.difficulty=o.critical=o.fumble=r,u.$register_prefix("\\d+BN"),m(y[0],"ID","BBN"),m(y[0],"NAME","BBNTRPG"),m(y[0],"SORT_KEY","\u3072\u3044\u3072\u3044\u3048\u306cTRPG"),m(y[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a(xBN\xb1y>=z[c,f])\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u30001D\u306e\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f1\u30022D\u306e\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f2\u3002\n\u3000nD\u306e\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f n/2 \u306e\u5207\u308a\u4e0a\u3052\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u304c\u540c\u6642\u306b\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3092\u512a\u5148\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  c\uff1a\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306b\u5fc5\u8981\u306a\u30c0\u30a4\u30b9\u76ee\u300c6\u300d\u306e\u6570\u306e\u5897\u6e1b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  f\uff1a\u30d5\u30a1\u30f3\u30d6\u30eb\u306b\u5fc5\u8981\u306a\u30c0\u30a4\u30b9\u76ee\u300c1\u300d\u306e\u6570\u306e\u5897\u6e1b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3BN+4\u30003BN>=8\u30003BN+1>=10[-1] 3BN+1>=10[,1] 3BN+1>=10[1,1]\n"),l(u,"$eval_game_system_specific_command",function(i){var e=this,t=r,_=r,s=r,c=r,f=r;return n(e.$parse(i))?(_=(t=e.randomizer.$roll_barabara(e.roll_times,6)).$sum(),s=t.$join(","),c=a(_,e.modify),f=["("+i+")",_+"["+s+"]"+e.modify_str,c],n(e["$critical_?"](t))?w(f,"push",["\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01"].concat(E(e.$additional_roll(t.$count(6),c)))):n(e["$fumble_?"](t))?f.$push("\u30d5\u30a1\u30f3\u30d6\u30eb\uff01"):n(e.difficulty)&&f.$push(n(b(c,e.difficulty))?"\u6210\u529f":"\u5931\u6557"),f.$join(" \uff1e ")):r},1),u.$private(),l(u,"$parse",function(i){var e=this,t=r,_=r,s=r;return t=/^(\d+)BN([+-]\d+)?(>=(([+-]?\d+)))?(\[([+-]?\d+)?(,([+-]?\d+))?\])?/.$match(i),!!n(t)&&(e.roll_times=t["$[]"](1).$to_i(),e.modify_str=n(_=t["$[]"](2))?_:"",e.modify=t["$[]"](2).$to_i(),e.difficulty=n(t["$[]"](4))?t["$[]"](4).$to_i():r,s=e.$critical_base(e.roll_times),e.critical=a(s,t["$[]"](7).$to_i()),e.fumble=a(s,t["$[]"](9).$to_i()),!0)},1),l(u,"$critical_base",function(i){var e;return q(1,e=i)||q(2,e)?i:G(i.$to_f(),2).$ceil()},1),l(u,"$critical_?",function(i){return b(i.$count(6),this.critical)},1),l(u,"$fumble_?",function(i){return b(i.$count(1),this.fumble)},1),l(u,"$additional_roll",function(i,e){var _=this,s=r,c=r,f=r,h=r,N=r,x=r;for(s=[],c=0;n(n(f=B(i,0))?S(c,10):f);)c=a(c,1),N=(h=_.randomizer.$roll_barabara(i,6)).$sum(),x=h.$join(","),i=h.$count(6),s.$push(e+"+"+N+"["+x+"]"),n(B(i,0))&&s.$push("\u8ffd\u52a0\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01"),e=a(e,N);return n(B(i,0))&&s.$push("\u7121\u9650\u30eb\u30fc\u30d7\u9632\u6b62\u306e\u305f\u3081\u4e2d\u65ad"),s.$push(e),n(_.difficulty)&&s.$push(n(b(e,_.difficulty))?"\u6210\u529f":"\u5931\u6557"),s},2)})}}]);