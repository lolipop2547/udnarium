(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4957],{1641:(X,Z,L)=>{L(9993),Opal.queue(function(r){var B,K,U,$,_,i,p,Y,x,R=[],e=r.nil,a=r.$$$,E=r.module,P=r.klass,m=r.const_set,c=r.def,S=r.hash2,t=r.truthy,d=r.rb_plus,T=r.rb_minus,D=r.send,H=r.to_a,w=r.rb_le,j=r.rb_divide;return B=R,K=x=[E(R[0],"BCDice")].concat(B),p=[E(x[0],"GameSystem")].concat(K),Y=r.$r(p),U=p,_=[$=P(p[0],Y("Base"),"ToshiakiHolyGrailWar")].concat(U),i=r.$r(_),$.$$prototype.randomizer=e,m(_[0],"ID","ToshiakiHolyGrailWar"),m(_[0],"NAME","\u3068\u3057\u3042\u304d\u306e\u8056\u676f\u6226\u4e89TRPG"),m(_[0],"SORT_KEY","\u3068\u3057\u3042\u304d\u306e\u305b\u3044\u306f\u3044\u305b\u3093\u305d\u3046TRPG"),m(_[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (Fx+y-z@a>=t)\n  \u88dc\u6b63\u5024\u30da\u30ca\u30eb\u30c6\u30a3\u3092\u81ea\u52d5\u8a08\u7b97\u3057\u3066\u30c0\u30a4\u30b9\u306e\u9762\u6570\u3092\u6c7a\u5b9a\u3057\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u9762\u6570\u306f2\u4ee5\u4e0a\u300110\u4ee5\u4e0b\u306e\u7bc4\u56f2\u306b\u5236\u9650\u3055\u308c\u307e\u3059\u3002\n  x: \u30b9\u30c6\u30fc\u30bf\u30b9\n  y: \u88dc\u6b63\u5024 (\u4efb\u610f)\n  z: \u30de\u30a4\u30ca\u30b9\u88dc\u6b63\u5024 (\u4efb\u610f)\n  a: \u30c0\u30a4\u30b9\u9762\u6570\u306e\u5897\u91cf (\u4efb\u610f)\n  t: \u76ee\u6a19\u5024 (\u4efb\u610f)\n  \u4f8b)\n    F8+11, F8+11-5, F8+11-5@1, F8+11+9-3-2@-1, F8+11-5>=50, F8\n"),$.$register_prefix("F"),c($,"$eval_game_system_specific_command",function(s){return this.$roll_f(s)},1),$.$private(),c($,"$roll_f",function(s){var u=this,n=e,o=e,G=e,y=e,h=e,z=e,A=e,g=e,k=e,F=e,l=e,f=e,v=e;return n=a(i("Command"),"Parser").$new(/F(\d+)(\+\d+)*(-\d+)*/,S(["round_type"],{round_type:a(i("RoundType"),"CEIL")})).$disable_modifier().$enable_critical().$parse(s),t(n)&&(o=n.$command().$match(/^F(\d+)((?:\+\d+)+)?((?:-\d+)+)?$/),t(o))?(G=o["$[]"](1).$to_i(),y=t(o["$[]"](2))?i("Arithmetic").$eval(o["$[]"](2),a(i("RoundType"),"CEIL")):0,h=t(o["$[]"](3))?i("Arithmetic").$eval(o["$[]"](3),a(i("RoundType"),"CEIL")):0,z=t(A=n.$critical())?A:0,g=[d(d(G,y),h),0].$max(),k=d(d(T(6,u.$positive_modifier_penalty(y)),u.$negative_modifier_bonus(h)),z).$clamp(2,10),l=(F=u.randomizer.$roll_barabara(g,k)).$sum(),f=t(n.$cmp_op()["$nil?"]())?i("Result").$new():t(l.$send(n.$cmp_op(),n.$target_number()))?i("Result").$success("\u6210\u529f"):i("Result").$failure("\u5931\u6557"),v=[[n,"("+g+"D"+k+n.$cmp_op()+n.$target_number()+")",l+"["+F.$join(",")+"]",l,f.$text()].$compact().$join(" \uff1e ")],D(f,"text=",H(v)),T(v.length,1),f):e},1),c($,"$positive_modifier_penalty",function(s){return t(w(s,10))?0:j(s,10).$to_i()},1),c($,"$negative_modifier_bonus",function(s){return t(w(s,-5))?1:0},1)})}}]);