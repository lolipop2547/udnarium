(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[517],{1329:(n0,$0,Y)=>{Y(9993),Opal.queue(function($){var W,O,r0,c,R,p,M,T,t0,K,A=[],t=$.nil,B=$.module,j=$.klass,w=$.const_set,J=$.send2,Q=$.find_super,v=$.def,l=$.truthy,z=$.rb_gt,C=$.rb_lt,o=$.rb_minus,q=$.eqeqeq,i=$.rb_plus,F=$.neqeq,G=$.eqeq,y=$.rb_ge,U=$.send;return W=A,O=K=[B(A[0],"BCDice")].concat(W),T=[B(K[0],"GameSystem")].concat(O),t0=$.$r(T),r0=T,R=[c=j(T[0],t0("Base"),"EarthDawn")].concat(r0),p=$.$r(R),(M=c.$$prototype).string=M.isFailed=t,w(R[0],"ID","EarthDawn"),w(R[0],"NAME","\u30a2\u30fc\u30b9\u30c9\u30fc\u30f3"),w(R[0],"SORT_KEY","\u3042\u3042\u3059\u3068\u304a\u3093"),w(R[0],"HELP_MESSAGE","\u30b9\u30c6\u30c3\u30d7\u30c0\u30a4\u30b9\u3000(xEn+k)\n\u30b9\u30c6\u30c3\u30d7x\u3001\u76ee\u6a19\u5024n(\u7701\u7565\u53ef\u80fd\uff09\u3001\u30ab\u30eb\u30de\u30c0\u30a4\u30b9k(D2-D20)\u3067\u30b9\u30c6\u30c3\u30d7\u30c0\u30a4\u30b9\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u632f\u308a\u8db3\u3057\u3082\u81ea\u52d5\u3002\n\u4f8b\uff099E\u300010E8\u300010E+D12\n"),c.$register_prefix("\\d+e"),v(c,"$initialize",function m(a){var s=this;return delete m.$$p,J(s,Q(s,"initialize",m,!1,!0),"initialize",[a],null),s.sort_add_dice=!0},1),v(c,"$eval_game_system_specific_command",function(a){return this.$ed_step(a)},1),v(c,"$ed_step",function(a){return this.$getStepResult(a)},1),v(c,"$getStepResult",function(a){var e=this,s=t,n=t,u=t,_=t,f=t,g=t,r=t,d=t,b=t,h=t,S=t,k=t,E=t,D=t,x=t,N=t,H=t,I=t,L=t,P=t;return!l(/(\d+)E(\d+)?(\+)?(\d+)?(d\d+)?/i["$=~"](a))||(s=0,e.isFailed=!0,n=p("Regexp").$last_match(1).$to_i(),u=0,_=!1,f=0,g=0,l(z(n,40))&&(n=40),l(p("Regexp").$last_match(2))&&(u=p("Regexp").$last_match(2).$to_i(),l(z(u,43))&&(u=42)),l(p("Regexp").$last_match(3))&&(_=p("Regexp").$last_match(3).$to_i()),l(p("Regexp").$last_match(4))&&(f=p("Regexp").$last_match(4).$to_i()),l(p("Regexp").$last_match(5))&&(g=p("Regexp").$last_match(5)),l(C(u,0)))?t:(d=(r=e.$getStepTable())["$[]"](0)["$[]"](o(n,1)),b=r["$[]"](1)["$[]"](o(n,1)),h=r["$[]"](2)["$[]"](o(n,1)),S=r["$[]"](3)["$[]"](o(n,1)),k=r["$[]"](4)["$[]"](o(n,1)),E=r["$[]"](5)["$[]"](o(n,1)),D=r["$[]"](6)["$[]"](o(n,1)),l(_)&&(q(/d20/i,x=g)?b=i(b,f):q(/d12/i,x)?h=i(h,f):q(/d10/i,x)?S=i(S,f):q(/d8/i,x)?k=i(k,f):q(/d6/i,x)?E=i(E,f):q(/d4/i,x)?D=i(D,f):d=i(d,f)),e.string="",e.$debug("d20step, d12step, d10step, d8step, d6step, d4step",b,h,S,k,E,D),s=i(s,e.$rollStep(20,b)),s=i(s,e.$rollStep(12,h)),s=i(s,e.$rollStep(10,S)),s=i(s,e.$rollStep(8,k)),s=i(s,e.$rollStep(6,E)),s=i(s,e.$rollStep(4,D)),l(z(d,0))&&(e.string=i(e.string,"+")),F(d,0)&&(e.string=i(e.string,d.$to_s()),s=i(s,d)),e.string=i(e.string," \uff1e "+s),N="\u30b9\u30c6\u30c3\u30d7"+n+" \uff1e "+e.string,G(u,0)||(e.string=i(e.string," \uff1e "),H=r["$[]"](7)["$[]"](o(u,1)),I=r["$[]"](8)["$[]"](o(u,1)),L=r["$[]"](9)["$[]"](o(u,1)),P=r["$[]"](11)["$[]"](o(u,1)),e.string=l(e.isFailed)?i(e.string,"\u81ea\u52d5\u5931\u6557"):l(y(s,H))?i(e.string,"\u6700\u826f\u6210\u529f"):l(y(s,I))?i(e.string,"\u512a\u6210\u529f"):l(y(s,L))?i(e.string,"\u826f\u6210\u529f"):l(y(s,u))?i(e.string,"\u6210\u529f"):l(C(s,P))?i(e.string,"\u5927\u5931\u6557"):i(e.string,"\u5931\u6557"),N="\u30b9\u30c6\u30c3\u30d7"+n+">="+u+" \uff1e "+e.string),N)},1),v(c,"$getStepTable",function(){return[[-2,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1],[0,0,0,0,0,1,0,0,0,1,1,2,1,0,0,0,1,0,0,0,1,1,2,1,1,1,1,2,1,1,1,2,3,2,1,1,1,2,1,1,0,0,1,0,0,0,1,0,0,0,1,1,2,1],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,0,0,1,1,2,1,1,1,2,2,1,1,1,1,2,1,1,1,0,0,1,0,0,1,0,0,0,1,0,1,0,0],[0,0,0,1,0,0,0,2,1,1,0,0,0,0,1,0,0,0,2,1,1,0,0,0,0,1,0,0,0,2,1,0,0,0,0,1,0,0,0,2,0,0,0,0,1,0,0,0,2,1,1,0,0,0],[1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[6,8,10,12,14,17,19,20,22,24,25,27,29,32,33,35,37,38,39,41,42,44,45,47,48,49,51,52,54,55,56,58,59,60,62,64,65,67,68,70,71,72],[4,6,8,10,11,13,15,16,18,19,21,22,24,26,27,29,30,32,33,34,35,37,38,40,41,42,43,45,46,47,48,49,51,52,53,55,56,58,59,60,61,62],[2,4,6,7,9,10,12,13,14,15,17,18,20,21,22,24,25,26,27,28,29,31,32,33,34,35,36,38,39,40,41,42,43,45,46,47,48,50,51,52,53,54],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],[0,1,1,1,1,2,2,3,4,5,5,6,6,7,8,8,9,10,11,12,13,13,14,15,16,17,18,18,18,20,21,22,23,23,24,25,26,26,27,28,29,30]]},0),v(c,"$rollStep",function(a,e){var s=this,n=t;return s.$debug("rollStep diceType, diceCount, @string",a,e,s.string),n=0,l(z(e,0))&&(l(s.string["$empty?"]())||(s.string=i(s.string,"+")),s.string=i(s.string,e+"d"+a+"["),s.$debug("rollStep @string",s.string),U(e,"times",[],function u(_){var g=null==u.$$s?this:u.$$s,r=t,d=t;for(null==g.randomizer&&(g.randomizer=t),null==g.string&&(g.string=t),null==_&&(_=t),r=g.randomizer.$roll_once(a),F(r,1)&&(g.isFailed=!1),d=r;G(r,a);)r=g.randomizer.$roll_once(a),d=i(d,r);return n=i(n,d),F(_,0)&&(g.string=i(g.string,",")),g.string=i(g.string,d.$to_s())},{$$arity:1,$$s:s}),s.string=i(s.string,"]")),n},2)})}}]);