(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9495],{3592:(U,V,A)=>{A(9993),Opal.queue(function(t){var j,K,J,c,k,a,S,N,w,q=[],e=t.nil,y=t.module,C=t.klass,p=t.const_set,G=t.send2,B=t.find_super,R=t.def,v=t.send,s=t.truthy,D=t.to_ary,P=t.neqeq,_=t.rb_plus,E=t.rb_lt,g=t.rb_ge,z=t.rb_le,M=t.eqeq;return j=q,K=w=[y(q[0],"BCDice")].concat(j),S=[y(w[0],"GameSystem")].concat(K),N=t.$r(S),J=S,k=[c=C(S[0],N("Base"),"RokumonSekai2")].concat(J),a=t.$r(k),c.$$prototype.randomizer=e,p(k[0],"ID","RokumonSekai2"),p(k[0],"NAME","\u516d\u9580\u4e16\u754cRPG \u30bb\u30ab\u30f3\u30c9\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3"),p(k[0],"SORT_KEY","\u308d\u304f\u3082\u3093\u305b\u304b\u3044RPG2"),p(k[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\naRSm<=t\n\u80fd\u529b\u5024a,\u4fee\u6b63\u5024m,\u76ee\u6a19\u5024t\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\nR\u30b3\u30de\u30f3\u30c9(3R6m<=t[a])\u306b\u8aad\u307f\u66ff\u3048\u307e\u3059\u3002\n\u6210\u529f\u5ea6\u3001\u8a55\u4fa1\u3001\u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u4f8b) 3RS+1<=9\u30003R6+1<=9[3]\n"),c.$register_prefix("\\d+RS","3R6"),R(c,"$initialize",function m(n){var o=this;return delete m.$$p,G(o,B(o,"initialize",m,!1,!0),"initialize",[n],null),o.sort_add_dice=!0},1),R(c,"$replace_text",function(n){return n=v(n,"gsub",[/(\d+)RS([+\-][+\-\d]+)<=(\d+)/i],function(){return"3R6"+a("Regexp").$last_match(2)+"<="+a("Regexp").$last_match(3)+"["+a("Regexp").$last_match(1)+"]"},0),v(n,"gsub",[/(\d+)RS<=(\d+)/i],function(){return"3R6<="+a("Regexp").$last_match(2)+"["+a("Regexp").$last_match(1)+"]"},0)},1),R(c,"$eval_game_system_specific_command",function(n){var r,o,b=this,u=e,l=e,h=e,f=e,i=e,$=e;return n=b.$replace_text(n),s(/3R6([+\-\d]*)<=(\d+)\[(\d+)\]/i["$=~"](n))?(u=a("Regexp").$last_match(1),l=a("Regexp").$last_match(2).$to_i(),h=a("Regexp").$last_match(3).$to_i(),f=0,s(u)&&(f=a("ArithmeticEvaluator").$eval(u)),o=b.$rokumon2_roll(f,l,h),$=(null==(r=D(o))[2]?e:r[2])+"["+(null==r[0]?e:r[0])+"] \uff1e "+(i=null==r[1]?e:r[1])+" \uff1e \u8a55\u4fa1"+b.$rokumon2_suc_rank(i),P(i,0)&&($=_($,"(+"+i+"d6)")),$="("+n+") \uff1e "+$):e},1),R(c,"$rokumon2_roll",function(n,r,o){var h,u=e,l=e,f=e,d=e,i=e;return u=0,h=(l=this.randomizer.$roll_barabara(_(3,n.$abs()),6).$sort()).$join(","),v(n.$abs(),"times",[],function($){return null==$&&($=e),s(E(n,0))?l.$shift():l.$pop()},1),f=0,d=0,i=0,v(l,"each",[],function($){return null==$&&($=e),s(g($,5))&&(f=_(f,1)),s(z($,2))&&(d=_(d,1)),s(z($,o))&&(u=_(u,1)),i=_(i,$)},1),s(E(i,r))?u=_(u,2):M(i,r)&&(u=_(u,1)),s(g(f,3))&&(u=0),s(g(d,3))&&(u=5),[h,u,i]},3),R(c,"$rokumon2_suc_rank",function(n){return["E","D","C","B","A","S"]["$[]"](n)},1)})}}]);