(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[3532],{8885:(ee,ne,V)=>{V(9993),Opal.modules["bcdice/dice_table/table"]=function(e){var c,q,H,m,K,z,k,A,T,C=[],b=e.nil,t=e.module,N=e.klass,D=e.hash2,P=e.defs,g=e.truthy,w=e.def,F=e.rb_minus;return c=C,q=T=[t(C[0],"BCDice")].concat(c),H=A=[t(T[0],"DiceTable")].concat(q),K=[m=N(A[0],null,"Table")].concat(H),z=e.$r(K),(k=m.$$prototype).times=k.sides=k.name=k.items=b,P(m,"$from_i18n",function(d,$){var a=b;return a=z("I18n").$t(d,D(["locale"],{locale:$})),this.$new(a["$[]"]("name"),a["$[]"]("type"),a["$[]"]("items"))},2),w(m,"$initialize",function(d,$,_){var a=this,p=b;return a.name=d,a.items=_.$freeze(),p=/(\d+)D(\d+)/i.$match($),g(p)||a.$raise(z("ArgumentError"),"Unexpected table type: "+$),a.times=p["$[]"](1).$to_i(),a.sides=p["$[]"](2).$to_i()},3),w(m,"$roll",function(d){var _,$=this;return _=d.$roll_sum($.times,$.sides),$.$choice(_)},1),w(m,"$choice",function(d){var _,$=this;return _=F(d,$.times),z("RollResult").$new($.name,d,$.items["$[]"](_))},1)},Opal.queue(function(e){var z,$,Z,u,r,n,o,v,h,a,p,x,b=[],t=e.nil,N=e.$$$,D=e.module,P=e.klass,g=e.const_set,w=e.send2,F=e.find_super,f=e.def,c=e.truthy,E=e.eqeq,T=e.neqeq,S=e.rb_ge,q=e.send,B=e.rb_le,A=e.rb_gt,M=e.hash2,j=e.rb_plus,H=e.to_a,m=e.rb_minus;return e.top.$require("bcdice/dice_table/table"),z=b,$=x=[D(b[0],"BCDice")].concat(z),a=[D(x[0],"GameSystem")].concat($),p=e.$r(a),Z=a,v=[o=P(a[0],p("Base"),"Nechronica")].concat(Z),h=e.$r(v),o.$$prototype.randomizer=t,g(v[0],"ID","Nechronica"),g(v[0],"NAME","\u30cd\u30af\u30ed\u30cb\u30ab"),g(v[0],"SORT_KEY","\u306d\u304f\u308d\u306b\u304b"),g(v[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000(nNC+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u4fee\u6b63\u5024m\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059(\u7701\u7565=1)\n\u3000\u30c0\u30a4\u30b9\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306e\u30d1\u30fc\u30c4\u7834\u640d\u6570\u3082\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u653b\u6483\u5224\u5b9a\u3000(nNA+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u4fee\u6b63\u5024m\u3067\u653b\u6483\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059(\u7701\u7565=1)\n\u3000\u547d\u4e2d\u90e8\u4f4d\u3068\u30c0\u30a4\u30b9\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306e\u30d1\u30fc\u30c4\u7834\u640d\u6570\u3082\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u8868\n\u30fb\u59c9\u59b9\u3078\u306e\u672a\u7df4\u8868 nm\n\u30fb\u4e2d\u7acb\u8005\u3078\u306e\u672a\u7df4\u8868 nmn\n\u30fb\u6575\u3078\u306e\u672a\u7df4\u8868 nme\n"),f(o,"$initialize",function u(i){var n=this;return delete u.$$p,w(n,F(n,"initialize",u,!1,!0),"initialize",[i],null),n.sort_add_dice=!0,n.sort_barabara_dice=!0,n.default_target_number=6},1),f(o,"$eval_game_system_specific_command",function(i){var n,r=this;return c(n=r.$roll_tables(i,N(r.$class(),"TABLES")))?n:r.$nechronica_check(i)},1),f(o,"$result_nd10",function(i,r,n,l,s){return T(n.$count(),1)||T(l,">=")||c(s["$nil?"]())||E(s,"?")?t:this.$result_nechronica([i],s)},5),o.$private(),f(o,"$result_nechronica",function(i,r){var n=this,l=t,s=t;return c(S(i.$max(),r))?c(S(i.$max(),11))?h("Result").$critical(n.$translate("Nechronica.critical")):h("Result").$success(n.$translate("success")):E(q(i,"count",[],function(y){return null==y&&(y=t),B(y,1)},1),0)?h("Result").$failure(n.$translate("failure")):c(A(i.$size(),1))?(l=n.$translate("Nechronica.break_all_parts"),s=n.$translate("Nechronica.fumble"),h("Result").$fumble(s+" \uff1e "+l)):h("Result").$fumble(n.$translate("Nechronica.fumble"))},2),f(o,"$r_backward_compatibility",function(i){var r=t;return r=i.$match(/^(\d)?R10([+\-\d]+)?(\[(\d+)\])?$/),c(r)?E(r["$[]"](4),"1")?r["$[]"](1)+"NA"+r["$[]"](2):r["$[]"](1)+"NC"+r["$[]"](2):i},1),f(o,"$nechronica_check",function(i){var r=this,n=t,l=t,s=t,R=t,y=t,L=t,U=t,J=t,G=t,I=t;return i=r.$r_backward_compatibility(i),n=N(h("Command"),"Parser").$new(/N[CA](10)?/,M(["round_type"],{round_type:r.$round_type()})).$enable_prefix_number().$parse(i),c(n)?(l=[1,n.$prefix_number().$to_i()].$max(),s=c(R=n.$modify_number())?R:0,y=r.randomizer.$roll_barabara(l,10).$sort(),U=(L=q(y,"map",[],function(Y){return null==Y&&(Y=t),j(Y,s)},1)).$max(),c(n.$command()["$start_with?"]("NA"))&&(J=r.$get_hit_location(U)),G=r.$result_nechronica(L,6),I=[["("+n+")","["+y.$join(",")+"]"+h("Format").$modifier(s),U+"["+L.$join(",")+"]",G.$text(),J].$compact().$join(" \uff1e ")],q(G,"text=",H(I)),m(I.length,1),G):t},1),f(o,"$get_hit_location",function(i){var l=t;return c(B(i,5))?t:(l=this.$translate("Nechronica.hit_location.table")["$[]"](m(i,6).$clamp(0,5)),c(A(i,10))?j(l,this.$translate("Nechronica.hit_location.additional_damage",M(["damage"],{damage:m(i,10)}))):l)},1),r=[u=e.get_singleton_class(o)].concat(v),n=e.$r(r),u.$private(),f(u,"$translate_tables",function(s){return M(["NM","NMN","NME"],{NM:N(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NM",s),NMN:N(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NMN",s),NME:N(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NME",s)})},1),g(v[0],"TABLES",o.$translate_tables("ja_jp")),o.$register_prefix("\\d?NC","\\d?NA","\\dR10",h("TABLES").$keys())})}}]);