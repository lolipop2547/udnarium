(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7155],{7945:(Q,W,H)=>{H(9993),Opal.queue(function(o){var p,B,P,l,c,R,v,K,I,T=[],e=o.nil,x=o.module,M=o.klass,m=o.const_set,g=o.eqeqeq,a=o.def,_=o.truthy,z=o.rb_le,h=o.rb_plus,D=o.rb_minus,U=o.rb_gt,S=o.rb_lt,G=o.send,V=o.to_ary;return p=T,B=I=[x(T[0],"BCDice")].concat(p),v=[x(I[0],"GameSystem")].concat(B),K=o.$r(v),P=v,c=[l=M(v[0],K("Base"),"HouraiGakuen")].concat(P),R=o.$r(c),l.$$prototype.randomizer=e,m(c[0],"ID","HouraiGakuen"),m(c[0],"NAME","\u84ec\u83b1\u5b66\u5712\u306e\u5192\u967a!!"),m(c[0],"SORT_KEY","\u307b\u3046\u3089\u3044\u304b\u304f\u3048\u3093\u306e\u307b\u3046\u3051\u3093"),m(c[0],"HELP_MESSAGE","\u30fb\u57fa\u672c\u30ed\u30fc\u30eb\uff1aROL(x+n)\n  ROLL(\u81ea\u5206\u306e\u80fd\u529b\u5024 + \u7c21\u5358\u5024 + \u5fdc\u77f3 or \u84ec\u83b1\u30d1\u30ef\u30fc)\u3068\u8a18\u8ff0\u3057\u307e\u3059\u30023D6\u3092\u30ed\u30fc\u30eb\u3057\u3001\u6210\u529f\u3057\u305f\u304b\u3069\u3046\u304b\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n  \u4f8b\uff09ROL(4+6)\n\u30fb\u5bfe\u4eba\u5224\u5b9a\uff1aMED(x,y)\n  \u81ea\u5206\u306e\u80fd\u529b\u5024 x \u3068 \u76f8\u624b\u306e\u80fd\u529b\u5024 y \u3067\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u6210\u529f\u3057\u305f\u304b\u3069\u3046\u304b\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n  \u4f8b\uff09MED(5,2)\n\u30fb\u5bfe\u6297\u5224\u5b9a\uff1aRES(x,y)\n  \u81ea\u5206\u306e\u80fd\u529b\u5024 x \u3068 \u76f8\u624b\u306e\u80fd\u529b\u5024 y \u3067\u76f8\u4e92\u306b\u30ed\u30fc\u30eb\u3057\u3001\u3069\u3061\u3089\u304c\u6210\u529f\u3057\u305f\u304b\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u4e21\u8005\u3068\u3082\u6210\u529f or \u5931\u6557\u306e\u5834\u5408\u306f\u5f15\u304d\u5206\u3051\u3068\u306a\u308a\u307e\u3059\u3002\n  \u4f8b\uff09RES(6,4)\n\u30fb\u9670\u967d\u30b3\u30de\u30f3\u30c9 INY\n  \u4f8b\uff09Hourai : \u967d\uff08\u5947\u6570\u306e\u65b9\u304c\u591a\u3044\uff09\n\u30fb\u4e94\u884c\u30b3\u30de\u30f3\u30c9\uff1aGOG\n  \u4f8b\uff09Hourai : \u4e94\u884c\u8868(3) \u2192 \u4e94\u884c\u3010\u571f\u3011\n\u30fb\u516b\u5fb3\u30b3\u30de\u30f3\u30c9\uff1aHTK\n  \u4f8b\uff09Hourai : \u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u7fa9\u3011(\u5947\u6570\u3001\u5947\u6570\u3001\u5076\u6570)\n"),l.$register_prefix("ROL","MED","RES","INY","HTK","GOG"),a(l,"$eval_game_system_specific_command",function(u){var n,t=this;return g(/^ROL/i,n=u)?t.$getRollResult(u):g(/^MED/i,n)?t.$getMedResult(u):g(/^RES/i,n)?t.$getResResult(u):g(/^INY/i,n)?t.$getInnyouResult(u):g(/^HTK/i,n)?t.$getHattokuResult(u):g(/^GOG$/i,n)?t.$getGogyouResult(u):e},1),m(c[0],"CRITICAL","\u5927\u6210\u529f"),m(c[0],"SUCCESS","\u6210\u529f"),m(c[0],"FAILURE","\u5931\u6557"),m(c[0],"FUMBLE","\u5927\u5931\u6557"),a(l,"$getRollResult",function(u){var n=e,r=e,$=e;return _(/rol([-\d]+)/i["$=~"](u))?(n=R("Regexp").$last_match(1).$to_i(),$=(r=this.randomizer.$roll_barabara(3,6)).$sum(),"(3d6<="+n+") \uff1e \u51fa\u76ee"+r.$join(",")+"\uff1d\u5408\u8a08"+$+" \uff1e "+this.$getCheckResult(r,$,n)):e},1),a(l,"$getCheckResult",function(u,t,n){return u=u.$sort(),_(this.$isFamble(u))?R("FUMBLE"):_(this.$isCritical(u))?R("CRITICAL"):_(z(t,n))?R("SUCCESS"):R("FAILURE")},3),a(l,"$isFamble",function(u){return u["$=="]([6,6,6])},1),a(l,"$isCritical",function(u){return u["$=="]([1,2,3])},1),a(l,"$getMedResult",function(u){var t=this,n=e,r=e,$=e,s=e,i=e;return _(/med\((\d+),(\d+)\)/i["$=~"](u))?(n=R("Regexp").$last_match(1).$to_i(),r=R("Regexp").$last_match(2).$to_i(),$=t.$getTargetFromValue(n,r),i=(s=t.randomizer.$roll_barabara(3,6)).$sum(),"(\u3042\u306a\u305f\u306e\u5024"+n+"\u3001\u76f8\u624b\u306e\u5024"+r+"\u30013d6<="+$+") \uff1e \u51fa\u76ee"+s.$join(",")+"\uff1d\u5408\u8a08"+i+" \uff1e "+t.$getCheckResult(s,i,$)):e},1),a(l,"$getTargetFromValue",function(u,t){return h(u,D(10,t))},2),a(l,"$getResResult",function(u){var t=this,n=e,r=e,$=e,s=e,i=e,d=e,y=e,b=e,k=e,F=e,C=e,E=e;return _(/res\((\d+),(\d+)\)/i["$=~"](u))?(n=R("Regexp").$last_match(1).$to_i(),r=R("Regexp").$last_match(2).$to_i(),$=t.$getTargetFromValue(n,r),s=t.$getTargetFromValue(r,n),d=(i=t.randomizer.$roll_barabara(3,6)).$sum(),y=i.$join(","),k=(b=t.randomizer.$roll_barabara(3,6)).$sum(),F=b.$join(","),"\u3042\u306a\u305f\u306e\u5024"+n+"\u3001\u76f8\u624b\u306e\u5024"+r+"\n(\u3042\u306a\u305f\u306e\u30ed\u30fc\u30eb 3d6<="+$+") \uff1e "+y+"="+d+" \uff1e "+(C=t.$getCheckResult(i,d,$))+"\n(\u76f8\u624b\u306e\u30ed\u30fc\u30eb 3d6<="+s+") \uff1e "+F+"="+k+" \uff1e "+(E=t.$getCheckResult(b,k,s))+"\n\uff1e"+t.$getResistCheckResult(C,E)):e},1),a(l,"$getResistCheckResult",function(u,t){var r,$;return r=this.$getResultRank(u),$=this.$getResultRank(t),_(U(r,$))?"\u3042\u306a\u305f\u304c\u52dd\u5229":_(S(r,$))?"\u76f8\u624b\u304c\u52dd\u5229":"\u5f15\u304d\u5206\u3051"},2),a(l,"$getResultRank",function(u){return[R("FUMBLE"),R("FAILURE"),R("SUCCESS"),R("CRITICAL")].$index(u)},1),a(l,"$getInnyouResult",function(u){var n=e,r=e;return n=0,r=0,G(3,"times",[],function $(){var s=null==$.$$s?this:$.$$s,i=e;return null==s.randomizer&&(s.randomizer=e),i=s.randomizer.$roll_once(6),_(i["$even?"]())?r=h(r,1):n=h(n,1)},{$$arity:0,$$s:this}),_(S(r,n))?"\u967d\uff08\u5947\u6570\u306e\u65b9\u304c\u591a\u3044\uff09":"\u9670\uff08\u5076\u6570\u306e\u65b9\u304c\u591a\u3044\uff09"},1),a(l,"$getHattokuResult",function(u){var r,$,n=e;return n=[],G(3,"times",[],function s(){return n["$<<"]((null==s.$$s?this:s.$$s).$getOddEven())},{$$arity:0,$$s:this}),r=n.$join("\u3001"),g("\u5947\u6570\u3001\u5947\u6570\u3001\u5947\u6570",$=r)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u4ec1\u3011("+r+")":g("\u5947\u6570\u3001\u5947\u6570\u3001\u5076\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u7fa9\u3011("+r+")":g("\u5947\u6570\u3001\u5076\u6570\u3001\u5947\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u793c\u3011("+r+")":g("\u5947\u6570\u3001\u5076\u6570\u3001\u5076\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u667a\u3011("+r+")":g("\u5076\u6570\u3001\u5947\u6570\u3001\u5947\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u5fe0\u3011("+r+")":g("\u5076\u6570\u3001\u5947\u6570\u3001\u5076\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u4fe1\u3011("+r+")":g("\u5076\u6570\u3001\u5076\u6570\u3001\u5947\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u5b5d\u3011("+r+")":g("\u5076\u6570\u3001\u5076\u6570\u3001\u5076\u6570",$)?"\u4ec1\u7fa9\u516b\u5fb3\u306f\u3001\u3010\u608c\u3011("+r+")":"\u7570\u5e38\u7d42\u4e86"},1),a(l,"$getOddEven",function(){var t=e;return t=this.randomizer.$roll_once(6),_(t["$even?"]())?"\u5076\u6570":"\u5947\u6570"},0),a(l,"$getGogyouResult",function(u){var t,n,s;return s=this.$getGogyouTable(),n=this.$get_table_by_1d6(s),"\u4e94\u884c\u8868("+(null==(t=V(n))[1]?e:t[1])+") \uff1e "+(null==t[0]?e:t[0])},1),a(l,"$getGogyouTable",function(){return["\u4e94\u884c\u3010\u6728\u3011","\u4e94\u884c\u3010\u706b\u3011","\u4e94\u884c\u3010\u571f\u3011","\u4e94\u884c\u3010\u91d1\u3011","\u4e94\u884c\u3010\u6c34\u3011","\u4e94\u884c\u306f\u3010\u4efb\u610f\u9078\u629e\u3011"]},0)})}}]);