(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[348],{8959:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var B,u,A,I,L,f,j=[],n=r.nil,t=r.$$$,e=r.module,k=r.class_variable_set,E=r.truthy,P=r.class_variable_get,l=r.def,H=r.send,V=r.to_a,v=r.rb_minus,w=r.send2,N=r.find_super,Z=r.hash2,Y=r.find_block_super,G=r.neqeq;return B=j,f=[L=e(j[0],"I18n")].concat(B),k(f[0],"@@fallbacks",n),u=r.get_singleton_class(L),A=[u].concat(f),I=r.$r(A),l(u,"$fallbacks",function(){var g=n;return k(A[1],"@@fallbacks",E(null!=A[1].$$cvars["@@fallbacks"]?"class variable":n)&&E(g=P(A[1],"@@fallbacks",!1))?g:t(t(I("I18n"),"Locale"),"Fallbacks").$new()),E(g=I("Thread").$current()["$[]"]("i18n_fallbacks"))?g:P(A[1],"@@fallbacks",!1)},0),l(u,"$fallbacks=",function(b){var g;return k(A[1],"@@fallbacks",E(b["$is_a?"](I("Array")))?t(t(I("I18n"),"Locale"),"Fallbacks").$new(b):b),g=["i18n_fallbacks",P(A[1],"@@fallbacks",!1)],H(I("Thread").$current(),"[]=",V(g)),g[v(g.length,1)]},1),function(u,C){var b,g,D,o,I=[e(u,"Backend")].concat(C);return b=I,D=[g=e(I[0],"Fallbacks")].concat(b),o=r.$r(D),l(g,"$translate",function m(d,a,_){try{var $=m.$$p||n,c=this,R=n,q=n;return delete m.$$p,null==_&&(_=o("EMPTY_HASH")),E(_.$fetch("fallback",!0))?E(_["$[]"]("fallback_in_progress"))?w(c,N(c,"translate",m,!1,!0),"translate",[d,a,_],$):(E(_["$[]"]("default"))&&(R=c["$extract_non_symbol_default!"](_)),q=_.$merge(Z(["fallback_in_progress"],{fallback_in_progress:!0})),H(o("I18n").$fallbacks()["$[]"](d),"each",[],function y(S){var U=null==y.$$s?this:y.$$s;null==S&&(S=n);try{return H(U,"catch",["exception"],function K(){var i=null==K.$$s?this:K.$$s,z=n;if(z=w(i,Y(i,"translate",K.$$def||y.$$def||m,!1,!1),"translate",[S,a,q],null),E(z["$nil?"]()))return n;G(d.$to_s(),S.$to_s())&&i.$on_fallback(d,S,a,_),r.ret(z)},{$$arity:0,$$s:U})}catch(K){if(!r.rescue(K,[t(o("I18n"),"InvalidLocale")]))throw K;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:c}),E(_["$key?"]("default"))&&E(_["$[]"]("default")["$nil?"]())?n:E(R)?w(c,N(c,"translate",m,!1,!0),"translate",[d,n,_.$merge(Z(["default"],{default:R}))],null):c.$throw("exception",t(o("I18n"),"MissingTranslation").$new(d,a,_))):w(c,N(c,"translate",m,!1,!0),"translate",[d,a,_],$)}catch(y){if(y===r.returner)return y.$v;throw y}},-3),l(g,"$extract_non_symbol_default!",function(d){var _,a=n,$=n;return a=[d["$[]"]("default")].$flatten(),_=H(a,"detect",[],function(R){return null==R&&(R=n),R["$is_a?"](o("Symbol"))["$!"]()},1),E(_)&&($=["default",a["$[]"](0,a.$index(_))],H(d,"[]=",V($)),v($.length,1)),_},1),l(g,"$exists?",function m(d,a,_){try{var $=m.$$p||n,c=this;return delete m.$$p,null==_&&(_=o("EMPTY_HASH")),E(_.$fetch("fallback",!0))?(H(o("I18n").$fallbacks()["$[]"](d),"each",[],function R(q){var y=null==R.$$s?this:R.$$s;null==q&&(q=n);try{if(!E(w(y,Y(y,"exists?",R.$$def||m,!1,!1),"exists?",[q,a],null)))return n;r.ret(!0)}catch(S){if(!r.rescue(S,[t(o("I18n"),"InvalidLocale")]))throw S;try{return n}finally{r.pop_exception()}}},{$$arity:1,$$s:c}),!1):w(c,N(c,"exists?",m,!1,!0),"exists?",[d,a,_],$)}catch(R){if(R===r.returner)return R.$v;throw R}},-3),g.$private(),l(g,"$on_fallback",function(d,a,_,$){return n},4)}(f[0],f)},Opal.modules["bcdice/randomizer"]=function(r){var L,h,b,g,D,o,u,C,j=[],n=r.nil,t=r.$$$,k=r.klass,E=r.const_set,P=r.def,l=r.truthy,H=r.rb_gt,V=r.rb_plus,v=r.rb_le,w=r.send,N=r.rb_minus,Z=r.eqeq,Y=r.rb_times,G=r.eqeqeq,ee=r.rb_ge;return L=j,u=[(0,r.module)(j[0],"BCDice")].concat(L),C=r.$r(u),h=u,g=[b=k(u[0],null,"Randomizer")].concat(h),D=r.$r(g),(o=b.$$prototype).rand_results=o.detailed_rand_results=n,E(g[0],"UPPER_LIMIT_DICE_TIMES",200),E(g[0],"UPPER_LIMIT_DICE_SIDES",1e3),E(g[0],"UPPER_LIMIT_RANDS",1e4),P(b,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),b.$attr_reader("rand_results"),b.$attr_reader("detailed_rand_results"),E(g[0],"DetailedRandResult",D("Struct").$new("kind","sides","value")),P(b,"$roll_barabara",function(d,a){var _=this;return l(H(V(_.rand_results.$size(),d),D("UPPER_LIMIT_RANDS")))&&_.$raise(D("TooManyRandsError")),l(v(d,0))||l(H(d,D("UPPER_LIMIT_DICE_TIMES")))?[]:w(D("Array"),"new",[d],function $(){return(null==$.$$s?this:$.$$s).$roll_once(a)},{$$arity:0,$$s:_})},2),P(b,"$roll_sum",function(d,a){return this.$roll_barabara(d,a).$sum()},2),P(b,"$roll_once",function(d){var _=n;return l(v(d,0))||l(H(d,D("UPPER_LIMIT_DICE_SIDES")))?0:(_=this.$rand_inner(d),this.$push_to_detail("normal",d,_),_)},1),P(b,"$roll_index",function(d){return N(this.$roll_once(d),1)},1),P(b,"$roll_tens_d10",function(){var _,a=n;return a=this.$rand_inner(10),Z(a,10)&&(a=0),_=Y(a,10),this.$push_to_detail("tens_d10",10,_),_},0),P(b,"$roll_d9",function(){var a;return a=N(this.$rand_inner(10),1),this.$push_to_detail("d9",10,a),a},0),P(b,"$roll_d66",function(d){var $,_=n;return _=w(D("Array"),"new",[2],function c(){return(null==c.$$s?this:c.$$s).$roll_once(6)},{$$arity:0,$$s:this}),G(t(D("D66SortType"),"ASC"),$=d)?_["$sort!"]():G(t(D("D66SortType"),"DESC"),$)&&_["$sort!"]()["$reverse!"](),V(Y(_["$[]"](0),10),_["$[]"](1))},1),b.$private(),P(b,"$rand_inner",function(d){var _,a=this;return l(ee(a.rand_results.$size(),D("UPPER_LIMIT_RANDS")))&&a.$raise(D("TooManyRandsError")),_=a.$random(d),a.rand_results["$<<"]([_,d]),_},1),P(b,"$random",function(d){return V(D("Kernel").$rand(d),1)},1),P(b,"$push_to_detail",function(d,a,_){var c;return c=D("DetailedRandResult").$new(d,a,_),this.detailed_rand_results.$push(c)},3),k(u[0],C("StandardError"),"TooManyRandsError"),n},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var l,w,ee,B,L,f,u,Z,V,j=[],n=r.nil,t=r.module,e=r.klass,k=r.def,E=r.truthy;return l=j,w=V=[t(j[0],"BCDice")].concat(l),ee=Z=[t(V[0],"DiceTable")].concat(w),L=[B=e(Z[0],null,"RollResult")].concat(ee),f=r.$r(L),(u=B.$$prototype).table_name=u.value=u.body=n,k(B,"$initialize",function(A,I,h){var b=this;return b.table_name=A,b.value=I,b.body=h},3),B.$attr_reader("table_name"),B.$attr_reader("value"),B.$attr_reader("body"),k(B,"$to_s",function(){var A=this;return A.table_name+"("+A.value+") \uff1e "+A.body},0),k(B,"$last_body",function(){var A=this;return E(A.body["$is_a?"](f("RollResult")))?A.body.$last_body():A.body},0),k(B,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var H,N,B,L,f,u,C,Y,v,j=[],n=r.nil,t=r.module,e=r.klass,k=r.truthy,E=r.def,P=r.rb_minus;return H=j,N=v=[t(j[0],"BCDice")].concat(H),B=Y=[t(v[0],"DiceTable")].concat(N),f=[L=e(Y[0],null,"ChainTable")].concat(B),u=r.$r(f),(C=L.$$prototype).times=C.sides=C.items=C.name=n,E(L,"$initialize",function(I,h,b){var g=this,D=n;return g.name=I,g.items=b.$freeze(),D=/(\d+)D(\d+)/i.$match(h),k(D)||g.$raise(u("ArgumentError"),"Unexpected table type: "+h),g.times=D["$[]"](1).$to_i(),g.sides=D["$[]"](2).$to_i()},3),E(L,"$roll",function(I){var b,g,h=this,D=n;return b=I.$roll_sum(h.times,h.sides),g=P(b,h.times),D=h.items["$[]"](g),k(D["$respond_to?"]("roll"))&&(D=D.$roll(I)),u("RollResult").$new(h.name,b,D)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var w,G,u,C,A,I,h,B,Z,j=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,E=r.defs,P=r.def,l=r.rb_plus,H=r.rb_times,V=r.rb_minus;return w=j,G=Z=[t(j[0],"BCDice")].concat(w),u=B=[t(Z[0],"DiceTable")].concat(G),A=[C=e(B[0],null,"D66GridTable")].concat(u),I=r.$r(A),(h=C.$$prototype).name=h.items=n,E(C,"$from_i18n",function(g,D){var m=n;return m=I("I18n").$t(g,k(["locale","raise"],{locale:D,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("items"))},2),P(C,"$initialize",function(g,D){return this.name=g,this.items=D.$freeze()},2),P(C,"$roll",function(g){var o,m,d,a,_;return o=g.$roll_once(6),m=g.$roll_once(6),d=l(H(o,10),m),a=V(o,1),_=V(m,1),I("RollResult").$new(this.name,d,this.items["$[]"](a)["$[]"](_))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var V,Z,f,u,C,A,G,ee,w,n=[],t=r.nil,e=r.module,k=r.klass,E=r.hash2,P=r.defs,l=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=w=[e(n[0],"BCDice")].concat(V),G=[e(w[0],"DiceTable")].concat(Z),ee=r.$r(G),f=G,C=[u=k(G[0],ee("D66GridTable"),"D66HalfGridTable")].concat(f),A=r.$r(C),P(u,"$from_i18n",function(h,b){var D=t;return D=A("I18n").$t(h,E(["locale","raise"],{locale:b,raise:!0})),this.$new(D["$[]"]("name"),D["$[]"]("items_1_2_3"),D["$[]"]("items_4_5_6"))},2),l(u,"$initialize",function(h,b,g){return this.name=h,this.items=[b,b,b,g,g,g].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var V,Z,f,u,C,A,G,ee,w,n=[],t=r.nil,e=r.module,k=r.klass,E=r.hash2,P=r.defs,l=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),V=n,Z=w=[e(n[0],"BCDice")].concat(V),G=[e(w[0],"DiceTable")].concat(Z),ee=r.$r(G),f=G,C=[u=k(G[0],ee("D66GridTable"),"D66OneThirdTable")].concat(f),A=r.$r(C),P(u,"$from_i18n",function(h,b){var D=t;return D=A("I18n").$t(h,E(["locale","raise"],{locale:b,raise:!0})),this.$new(D["$[]"]("name"),D["$[]"]("items_1_2"),D["$[]"]("items_3_4"),D["$[]"]("items_5_6"))},2),l(u,"$initialize",function(h,b,g,D){return this.name=h,this.items=[b,b,g,g,D,D].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var Z,B,A,I,h,b,g,f,G,j=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,E=r.hash2,P=r.defs,l=r.def,H=r.eqeqeq,V=r.rb_plus,v=r.rb_times,w=r.truthy;return Z=j,B=G=[e(j[0],"BCDice")].concat(Z),A=f=[e(G[0],"DiceTable")].concat(B),h=[I=k(f[0],null,"D66Table")].concat(A),b=r.$r(h),(g=I.$$prototype).sort_type=g.items=g.name=n,P(I,"$from_i18n",function(o,m){var _,a=n;return a=b("I18n").$t(o,E(["locale"],{locale:m})),_=b("D66SortType").$const_get(a["$[]"]("d66_sort_type")),this.$new(a["$[]"]("name"),_,a["$[]"]("items"))},2),l(I,"$initialize",function(o,m,d){var a=this;return a.name=o,a.sort_type=m,a.items=d.$freeze()},3),l(I,"$roll",function(o){var m=this,d=n,a=n,_=n,$=n;return d=o.$roll_barabara(2,6),H(t(b("D66SortType"),"ASC"),a=m.sort_type)?d["$sort!"]():H(t(b("D66SortType"),"DESC"),a)&&d["$sort!"]()["$reverse!"](),_=V(v(d["$[]"](0),10),d["$[]"](1)),$=w(a=m.items["$[]"](_))?a:m.items["$[]"](_.$to_s()),w($["$respond_to?"]("roll"))&&($=$.$roll(o)),b("RollResult").$new(m.name,_,$)},1),l(I,"$choice",function(o){return b("RollResult").$new(this.name,o,this.items["$[]"](o))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var ee,u,A,I,L,n=[],t=r.nil,e=r.module,k=r.klass,E=r.hash2,P=r.send,l=r.to_ary,H=r.rb_plus,V=r.rb_times,v=r.to_a,w=r.rb_minus,N=r.send2,Z=r.find_super,Y=r.def;return r.top.$require("bcdice/dice_table/d66_table"),ee=n,u=L=[e(n[0],"BCDice")].concat(ee),A=[e(L[0],"DiceTable")].concat(u),I=r.$r(A),Y(k(A[0],I("D66Table"),"D66LeftRangeTable"),"$initialize",function D(o,m,d){var $;return delete D.$$p,$=E([],{}),P(d,"each",[],function(R){var q,U;return null==R&&(R=t),q=l(R),U=null==q[1]?t:q[1],P(null==q[0]?t:q[0],"each",[],function(i){return null==i&&(i=t),P(U,"each_with_index",[],function(s,M){var F,Q;return null==s&&(s=t),null==M&&(M=t),F=H(V(i,10),H(M,1)),P($,"[]=",v(Q=[F,s])),Q[w(Q.length,1)]},2)},1)},1),N(this,Z(this,"initialize",D,!1,!0),"initialize",[o,m,$],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var v,Y,f,u,C,A,I,ee,N,j=[],n=r.nil,t=r.module,e=r.klass,k=r.def,E=r.truthy,P=r.rb_minus,l=r.rb_plus,H=r.rb_times;return v=j,Y=N=[t(j[0],"BCDice")].concat(v),f=ee=[t(N[0],"DiceTable")].concat(Y),C=[u=e(ee[0],null,"D66ParityTable")].concat(f),A=r.$r(C),(I=u.$$prototype).odd=I.even=I.name=n,k(u,"$initialize",function(b,g,D){var o=this;return o.name=b,o.odd=g.$freeze(),o.even=D.$freeze()},3),k(u,"$roll",function(b){var o,d,a,g=this,D=n;return D=b.$roll_once(6),o=b.$roll_once(6),d=(E(D["$odd?"]())?g.odd:g.even)["$[]"](P(o,1)),a=l(H(D,10),o),A("RollResult").$new(g.name,a,d)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var V,Z,L,f,u,C,A,G,w,j=[],n=r.nil,t=r.module,e=r.klass,k=r.def,E=r.rb_plus,P=r.rb_times,l=r.send;return V=j,Z=w=[t(j[0],"BCDice")].concat(V),L=G=[t(w[0],"DiceTable")].concat(Z),u=[f=e(G[0],null,"D66RangeTable")].concat(L),C=r.$r(u),(A=f.$$prototype).items=A.name=n,k(f,"$initialize",function(h,b){return this.name=h,this.items=b.$freeze()},2),k(f,"$roll",function(h){var g,D,o,m=n;return g=h.$roll_once(6),D=h.$roll_once(6),o=E(P(g,10),D),m=l(this.items,"find",[],function(a){return null==a&&(a=n),a["$[]"](0)["$include?"](o)},1),C("RollResult").$new(this.name,o,m["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var Y,L,I,h,b,g,D,u,ee,j=[],n=r.nil,t=r.module,e=r.klass,k=r.const_set,E=r.send,P=r.truthy,l=r.def,H=r.to_a,V=r.rb_minus,v=r.eqeqeq,w=r.rb_times,N=r.rb_plus;return Y=j,L=ee=[t(j[0],"BCDice")].concat(Y),I=u=[t(ee[0],"DiceTable")].concat(L),b=[h=e(u[0],null,"RangeTable")].concat(I),g=r.$r(b),(D=h.$$prototype).name=D.items=D.num_of_dice=D.num_of_sides=D.formatter=n,k(b[0],"RollResult",E(g("Struct"),"new",["sum","values","content","formatted"],function o(){return(null==o.$$s?this:o.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:h})),k(b[0],"Item",g("Struct").$new("range","content")),k(b[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),k(b[0],"DEFAULT_FORMATTER",E(h,"lambda",[],function(m,d){return null==m&&(m=n),null==d&&(d=n),m.$name()+"("+d.$sum()+") \uff1e "+d.$content()},2)),h.$attr_reader("name"),h.$attr_reader("num_of_dice"),h.$attr_reader("num_of_sides"),l(h,"$initialize",function o(m,d,a){var c,_=o.$$p||n,$=this,R=n;return delete o.$$p,$.name=m.$freeze(),$.formatter=P(c=_)?c:g("DEFAULT_FORMATTER"),R=g("DICE_ROLL_METHOD_RE").$match(d),P(R)||$.$raise(g("ArgumentError"),$.name+": invalid dice roll method: "+d),$.num_of_dice=R["$[]"](1).$to_i(),$.num_of_sides=R["$[]"](2).$to_i(),$.$store(a)},3),l(h,"$fetch",function(m){var a,d=this;return a=E(d.items,"find",[],function($){return null==$&&($=n),$.$range()["$include?"](m)},1),P(a)||d.$raise(g("RangeError"),d.name+": value is out of range: "+m),a},1),l(h,"$roll",function(m){var _,$,c,d=this,a=n;return _=(a=m.$roll_barabara(d.num_of_dice,d.num_of_sides)).$sum(),$=g("RollResult").$new(_,a,d.$fetch(_).$content()),c=[d.formatter["$[]"](d,$)],E($,"formatted=",H(c)),V(c.length,1),$},1),h.$private(),l(h,"$store",function(m){var a,_,d=this;return a=E(m,"map",[],function $(c,R){return null==c&&(c=n),null==R&&(R=n),[(null==$.$$s?this:$.$$s).$coerce_to_int_range(c),R]},{$$arity:2,$$s:d}),_=E(a,"sort_by",[],function(c,R){return null==c&&(c=n),null==R&&(R=n),c.$min()},2),d.$assert_min_sum_is_covered(_),d.$assert_max_sum_is_covered(_),d.$assert_no_gap_or_overlap_in_ranges(_),d.items=E(_,"map",[],function(c,R){return null==c&&(c=n),null==R&&(R=n),g("Item").$new(c,R.$freeze()).$freeze()},2).$freeze(),d},1),l(h,"$coerce_to_int_range",function(m){var a;return v(g("Integer"),a=m)?g("Range").$new(m,m):v(g("Range"),a)&&P(m.$begin()["$is_a?"](g("Integer")))&&P(m.$end()["$is_a?"](g("Integer")))?m:this.$raise(g("TypeError"),this.name+": "+m+" ("+m.$class()+") must be an Integer or a Range with Integers ")},1),l(h,"$assert_min_sum_is_covered",function(m){var a,d=this,_=n;return a=d.num_of_dice,_=m.$first()["$[]"](0),P(_["$include?"](a))||d.$raise(g("RangeError"),d.name+": min value ("+a+") is not covered: "+_),d},1),l(h,"$assert_max_sum_is_covered",function(m){var a,d=this,_=n;return a=w(d.num_of_dice,d.num_of_sides),_=m.$last()["$[]"](0),P(_["$include?"](a))||d.$raise(g("RangeError"),d.name+": max value ("+a+") is not covered: "+_),d},1),l(h,"$assert_no_gap_or_overlap_in_ranges",function(m){return E(m,"each_cons",[2],function a(_,$){var y,S,c=null==a.$$s?this:a.$$s,R=n,q=n;return null==c.name&&(c.name=n),null==_&&(_=n),null==$&&($=n),R=_["$[]"](0),q=$["$[]"](0),y=R.$max(),S=N(y,1),P(q["$include?"](y))&&c.$raise(g("RangeError"),c.name+": Range overlap: "+R+" and "+q),P(q["$include?"](S))?n:c.$raise(g("RangeError"),c.name+": Range gap: "+R+" and "+q)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var V,Z,L,I,h,b,g,u,G,w,j=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,E=r.send,P=r.def,l=r.rb_minus;return V=j,Z=w=[e(j[0],"BCDice")].concat(V),L=G=[e(w[0],"DiceTable")].concat(Z),I=u=[k(G[0],null,"SaiFicSkillTable")].concat(L),b=[h=k(u[0],null,"Category")].concat(I),g=r.$r(b),h.$$prototype.name=n,P(h,"$initialize",function(m,d,a,_){var $=this;return $.name=m,$.skills=E(d.$map(),"with_index",[2],function(R,q){return null==R&&(R=n),null==q&&(q=n),t(g("SaiFicSkillTable"),"Skill").$new(m,R,a,q,_)},2),$.dice=a},4),P(h,"$roll",function(m){return this.$skills()["$[]"](l(m.$roll_sum(2,6),2))},1),P(h,"$to_s",function(){return this.name},0),h.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var l,w,ee,C,A,L,Z,V,j=[],n=r.nil,t=r.module,e=r.klass,k=r.def,E=r.hash2;return l=j,w=V=[t(j[0],"BCDice")].concat(l),ee=Z=[t(V[0],"DiceTable")].concat(w),L=[e(Z[0],null,"SaiFicSkillTable")].concat(ee),(A=(C=e(L[0],null,"Skill")).$$prototype).s_format=A.category_dice=A.row_dice=A.category_name=A.name=n,k(C,"$initialize",function(h,b,g,D,o){var m=this;return m.category_name=h,m.name=b,m.category_dice=g,m.row_dice=D,m.s_format=o},5),k(C,"$to_s",function(){var h=this;return h.$format(h.s_format,E(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))},0),C.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var B,C,g,D,o,m,d,I,f,j=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,E=r.klass,P=r.hash2,l=r.send,V=r.defs,v=r.const_set,w=r.to_ary,N=r.def,Z=r.truthy,Y=r.rb_minus,G=r.rb_plus;return j.$require("bcdice/dice_table/sai_fic_skill_table/category"),j.$require("bcdice/dice_table/sai_fic_skill_table/skill"),B=n,C=f=[k(n[0],"BCDice")].concat(B),g=I=[k(f[0],"DiceTable")].concat(C),o=[D=E(I[0],null,"SaiFicSkillTable")].concat(g),m=r.$r(o),(d=D.$$prototype).rtt=d.rtt_format=d.rct=d.rct_format=d.rttn=d.rttn_format=d.categories=t,V(D,"$from_i18n",function(_,$,c){var R,q,y,i,K=t;if(null==c)c=P([],{});else if(!c.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(R=c.$$smap.rtt)&&(R=t),null==(q=c.$$smap.rct)&&(q=t),null==(y=c.$$smap.rttn)&&(y=t),i=(K=m("I18n").$t("RTT",P(["locale","raise","default"],{locale:$,raise:!1,default:P([],{})})).$merge(m("I18n").$t(_,P(["locale","raise"],{locale:$,raise:!0}))))["$[]"]("items"),K=l(K,"select",[],function(s,M){return null==s&&(s=t),null==M&&(M=t),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](s)},2),this.$new(i,r.to_hash(K).$merge(P(["rtt","rct","rttn"],{rtt:R,rct:q,rttn:y})))},-3),v(o[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),v(o[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),v(o[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),v(o[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),N(D,"$initialize",function(_,$){var c,R,q,y,S,U,K,i=this;if(null==$)$=P([],{});else if(!$.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(c=$.$$smap.rtt)&&(c=t),null==(R=$.$$smap.rct)&&(R=t),null==(q=$.$$smap.rttn)&&(q=t),null==(y=$.$$smap.rtt_format)&&(y=m("DEFAULT_RTT")),null==(S=$.$$smap.rct_format)&&(S=m("DEFAULT_RCT")),null==(U=$.$$smap.rttn_format)&&(U=m("DEFAULT_RTTN")),null==(K=$.$$smap.s_format)&&(K=m("DEFAULT_S")),i.categories=l(_.$map(),"with_index",[1],function(s,M){var F,re,X;return null==s&&(s=t),null==M&&(M=t),re=null==(F=w(s))[0]?t:F[0],X=null==F[1]?t:F[1],e(m("SaiFicSkillTable"),"Category").$new(re,X,M,K)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),i.rtt=c,i.rct=R,i.rttn=q.$to_a(),i.rtt_format=y,i.rct_format=S,i.rttn_format=U},-2),v(o[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),D.$attr_reader("categories"),N(D,"$roll_command",function(_,$){var R,c=this,q=t,y=t;return Z(["RTT",c.rtt]["$include?"](R=$))?c.$format_skill(c.rtt_format,c.$roll_skill(_)):Z(["RCT",c.rct]["$include?"](R))?(q=c.$roll_category(_),c.$format(c.rct_format,P(["category_dice","category_name"],{category_dice:q.$dice(),category_name:q.$name()}))):Z(y=m("RTTN").$index(R))||Z(y=c.rttn.$index(R))?c.$format_skill(c.rttn_format,c.categories["$[]"](y).$roll(_)):t},2),N(D,"$roll_category",function(_){return this.categories["$[]"](Y(_.$roll_once(6),1))},1),N(D,"$roll_skill",function(_){return this.$roll_category(_).$roll(_)},1),N(D,"$prefixes",function(){var _=this;return G(["RTT[1-6]?","RCT",_.rtt,_.rct],_.rttn).$compact()},0),D.$private(),N(D,"$format_skill",function(_,$){return this.$format(_,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:$.$category_dice(),row_dice:$.$row_dice(),category_name:$.$category_name(),skill_name:$.$name(),text:$.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var v,Y,f,u,C,A,I,ee,N,j=[],n=r.nil,t=r.module,e=r.klass,k=r.hash2,E=r.defs,P=r.truthy,l=r.def,H=r.rb_minus;return v=j,Y=N=[t(j[0],"BCDice")].concat(v),f=ee=[t(N[0],"DiceTable")].concat(Y),C=[u=e(ee[0],null,"Table")].concat(f),A=r.$r(C),(I=u.$$prototype).times=I.sides=I.name=I.items=n,E(u,"$from_i18n",function(b,g){var o=n;return o=A("I18n").$t(b,k(["locale"],{locale:g})),this.$new(o["$[]"]("name"),o["$[]"]("type"),o["$[]"]("items"))},2),l(u,"$initialize",function(b,g,D){var o=this,m=n;return o.name=b,o.items=D.$freeze(),m=/(\d+)D(\d+)/i.$match(g),P(m)||o.$raise(A("ArgumentError"),"Unexpected table type: "+g),o.times=m["$[]"](1).$to_i(),o.sides=m["$[]"](2).$to_i()},3),l(u,"$roll",function(b){var D,g=this;return D=b.$roll_sum(g.times,g.sides),g.$choice(D)},1),l(u,"$choice",function(b){var D,g=this;return D=H(b,g.times),A("RollResult").$new(g.name,b,g.items["$[]"](D))},1)},Opal.modules["bcdice/dice_table"]=function(r){var j=r.top;return j.$require("bcdice/dice_table/roll_result"),j.$require("bcdice/dice_table/chain_table"),j.$require("bcdice/dice_table/d66_grid_table"),j.$require("bcdice/dice_table/d66_half_grid_table"),j.$require("bcdice/dice_table/d66_one_third_table"),j.$require("bcdice/dice_table/d66_left_range_table"),j.$require("bcdice/dice_table/d66_parity_table"),j.$require("bcdice/dice_table/d66_range_table"),j.$require("bcdice/dice_table/d66_table"),j.$require("bcdice/dice_table/range_table"),j.$require("bcdice/dice_table/sai_fic_skill_table"),j.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var E,V,w,l,j=[],t=r.module,e=r.const_set;return E=j,V=l=[t(j[0],"BCDice")].concat(E),w=[t(l[0],"D66SortType")].concat(V),e(w[0],"NO_SORT","no_sort"),e(w[0],"ASC","asc"),e(w[0],"DESC","desc"),function(H,V){var w=[t(H,"RoundType")].concat(V);return e(w[0],"CEIL","ceil"),e(w[0],"FLOOR","floor"),e(w[0],"ROUND","round")}(l[0],l)},Opal.modules["bcdice/translate"]=function(r){var l,w,N,Z,Y,V,j=[],n=r.nil,t=r.module,e=r.hash2,E=r.def;return l=j,w=V=[t(j[0],"BCDice")].concat(l),Z=[N=t(V[0],"Translate")].concat(w),Y=r.$r(Z),E(N,"$translate",function(ee,B){var L,f=this;if(null==f.locale&&(f.locale=n),null==B)B=e([],{});else if(!B.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return L=r.kwrestargs(B,{}),Y("I18n").$translate(ee,e(["locale","raise"],{locale:f.locale,raise:!0}).$merge(r.to_hash(L)))},-2)},Opal.modules["bcdice/result"]=function(r){var V,Y,L,G,B,w,j=[],n=r.nil,e=r.klass,k=r.send,E=r.to_a,P=r.rb_minus,l=r.def;return V=j,Y=w=[(0,r.module)(j[0],"BCDice")].concat(V),[G=e(w[0],null,"Result")].concat(Y),(B=G.$$prototype).secret=B.success=B.failure=B.critical=B.fumble=n,l(L=r.get_singleton_class(G),"$success",function(C){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",E(b=[C])),P(b.length,1),k(h,"success=",E(b=[!0])),b[P(b.length,1)]},1)},1),l(L,"$failure",function(C){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",E(b=[C])),P(b.length,1),k(h,"failure=",E(b=[!0])),b[P(b.length,1)]},1)},1),l(L,"$critical",function(C){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",E(b=[C])),P(b.length,1),k(h,"critical=",E(b=[!0])),P(b.length,1),k(h,"success=",E(b=[!0])),b[P(b.length,1)]},1)},1),l(L,"$fumble",function(C){return k(this.$new(),"tap",[],function(h){var b=n;return null==h&&(h=n),k(h,"text=",E(b=[C])),P(b.length,1),k(h,"fumble=",E(b=[!0])),P(b.length,1),k(h,"failure=",E(b=[!0])),b[P(b.length,1)]},1)},1),l(L,"$nothing",function(){return"nothing"},0),l(G,"$initialize",function(f){var u=this;return null==f&&(f=n),u.text=f,u.rands=n,u.detailed_rands=n,u.secret=!1,u.success=!1,u.failure=!1,u.critical=!1,u.fumble=!1},-1),G.$attr_accessor("text","rands","detailed_rands"),G.$attr_writer("secret","success","failure","critical","fumble"),l(G,"$secret?",function(){return this.secret},0),l(G,"$success?",function(){return this.success},0),l(G,"$failure?",function(){return this.failure},0),l(G,"$critical?",function(){return this.critical},0),l(G,"$fumble?",function(){return this.fumble},0),l(G,"$condition=",function(f){return this.success=f,this.failure=f["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var g,o,m,n=[],t=r.$r(n),e=r.nil,k=r.$$$,E=r.module,P=r.klass,l=r.truthy,H=r.const_set,V=r.defs,v=r.gvars,w=r.rb_lt,N=r.send,Z=r.to_a,Y=r.rb_minus,G=r.def,ee=r.to_ary,B=r.neqeq,L=r.rb_plus,f=r.eqeq,u=r.rb_ge,C=r.rb_gt,A=r.eqeqeq,I=r.rb_le,h=r.rb_times;return g=n,o=[E(n[0],"Racc")].concat(g),m=r.$r(o),P(o[0],m("StandardError"),"ParseError"),l(k("::","ParseError","skip_raise")?"constant":e)||H(n[0],"ParseError",k(t("Racc"),"ParseError")),function(b,g){var $,c,R,q,y,m=[E(b,"Racc")].concat(g),d=r.$r(m);return l(d("Racc_No_Extensions","skip_raise")?"constant":e)||H(m[0],"Racc_No_Extensions",!1),$=m,R=[c=P(m[0],null,"Parser")].concat($),q=r.$r(R),(y=c.$$prototype).yydebug=y.racc_debug_out=y.racc_error_status=y.racc_t=y.racc_vstack=y.racc_val=y.racc_state=y.racc_tstack=e,H(R[0],"Racc_Runtime_Version","1.4.6"),H(R[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),H(R[0],"Racc_Runtime_Core_Version_R","1.4.6"),H(R[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),H(R[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),H(R[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),H(R[0],"Racc_Runtime_Core_Version",q("Racc_Runtime_Core_Version_R")),H(R[0],"Racc_Runtime_Core_Revision",q("Racc_Runtime_Core_Revision_R")),H(R[0],"Racc_Runtime_Type","ruby"),V(q("Parser"),"$racc_runtime_type",function(){return q("Racc_Runtime_Type")},0),G(c,"$_racc_setup",function(){var U,K,i=this,z=e,s=e,M=e;return null==v.stderr&&(v.stderr=e),l(k(i.$class(),"Racc_debug_parser"))||(i.yydebug=!1),l(null!=(U=i.yydebug)&&U!==e?"instance-variable":e)||(i.yydebug=!1),l(i.yydebug)&&(l(null!=(K=i.racc_debug_out)&&K!==e?"instance-variable":e)||(i.racc_debug_out=v.stderr),i.racc_debug_out=l(z=i.racc_debug_out)?z:v.stderr),s=k(i.$class(),"Racc_arg"),l(w(s.$size(),14))&&(N(s,"[]=",Z(M=[13,!0])),Y(M.length,1)),s},0),G(c,"$_racc_init_sysvars",function(){var U=this;return U.racc_state=[0],U.racc_tstack=[],U.racc_vstack=[],U.racc_t=e,U.racc_val=e,U.racc_read_next=!0,U.racc_user_yyerror=!1,U.racc_error_status=0},0),G(c,"$do_parse",function(){return this.$__send__(q("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),G(c,"$next_token",function(){return this.$raise(q("NotImplementedError"),this.$class()+"#next_token is not defined")},0),G(c,"$_racc_do_parse_rb",function(U,K){var i,s=this,M=e,F=e,Q=e,re=e,W=e,T=e,J=e,p=e;return i=ee(U),M=null==i[0]?e:i[0],F=null==i[1]?e:i[1],Q=null==i[2]?e:i[2],re=null==i[3]?e:i[3],W=null==i[10]?e:i[10],s.$_racc_init_sysvars(),T=J=p=e,N(s,"catch",["racc_end_parse"],function x(){var $e,te,O=null==x.$$s?this:x.$$s,ue=e;for(null==O.racc_state&&(O.racc_state=e),null==O.racc_read_next&&(O.racc_read_next=e),null==O.racc_t&&(O.racc_t=e),null==O.yydebug&&(O.yydebug=e),null==O.racc_val&&(O.racc_val=e);l(!0);)for(l(p=re["$[]"](O.racc_state["$[]"](-1)))?(l(O.racc_read_next)&&B(O.racc_t,0)&&(te=O.$next_token(),$e=ee(te),T=null==$e[0]?e:$e[0],O.racc_val=null==$e[1]?e:$e[1],O.racc_t=l(T)?l(ue=W["$[]"](T))?ue:1:0,l(O.yydebug)&&O.$racc_read_token(O.racc_t,T,O.racc_val),O.racc_read_next=!1),p=L(p,O.racc_t),l(u(p,0))&&l(J=M["$[]"](p))&&f(F["$[]"](p),O.racc_state["$[]"](-1))||(J=Q["$[]"](O.racc_state["$[]"](-1)))):J=Q["$[]"](O.racc_state["$[]"](-1));l(J=O.$_racc_evalact(J,U)););},{$$arity:0,$$s:s})},2),G(c,"$yyparse",function(U,K){return this.$__send__(q("Racc_YY_Parse_Method"),U,K,this.$_racc_setup(),!0)},2),G(c,"$_racc_yyparse_rb",function(U,K,i,z){var s,F=this,Q=e,re=e,X=e,W=e,J=e,p=e,x=e;return s=ee(i),Q=null==s[0]?e:s[0],re=null==s[1]?e:s[1],X=null==s[2]?e:s[2],W=null==s[3]?e:s[3],J=null==s[10]?e:s[10],F.$_racc_init_sysvars(),p=e,x=e,N(F,"catch",["racc_end_parse"],function ne(){var O=null==ne.$$s?this:ne.$$s;for(null==O.racc_state&&(O.racc_state=e);!l(x=W["$[]"](O.racc_state["$[]"](-1)));)for(;l(p=O.$_racc_evalact(X["$[]"](O.racc_state["$[]"](-1)),i)););return N(U,"__send__",[K],function ue(se,le){var ae=null==ue.$$s?this:ue.$$s,ie=e,_e=e;for(null==ae.racc_t&&(ae.racc_t=e),null==ae.racc_state&&(ae.racc_state=e),null==ae.racc_read_next&&(ae.racc_read_next=e),null==se&&(se=e),null==le&&(le=e),ae.racc_t=l(se)?l(ie=J["$[]"](se))?ie:1:0,ae.racc_val=le,ae.racc_read_next=!1,x=L(x,ae.racc_t),l(u(x,0))&&l(p=Q["$[]"](x))&&f(re["$[]"](x),ae.racc_state["$[]"](-1))||(p=X["$[]"](ae.racc_state["$[]"](-1)));l(p=ae.$_racc_evalact(p,i)););for(;l(l(ie=l(_e=(x=W["$[]"](ae.racc_state["$[]"](-1)))["$!"]())?_e:ae.racc_read_next["$!"]())?ie:ae.racc_t["$=="](0));)for(l(x)&&l(x=L(x,ae.racc_t))&&l(u(x,0))&&l(p=Q["$[]"](x))&&f(re["$[]"](x),ae.racc_state["$[]"](-1))||(p=X["$[]"](ae.racc_state["$[]"](-1)));l(p=ae.$_racc_evalact(p,i)););},{$$arity:2,$$s:O})},{$$arity:0,$$s:F})},4),G(c,"$_racc_evalact",function(U,K){var i,X,s=this,M=e,F=e,re=e,W=e,T=e,J=e,p=e;if(M=null==(i=ee(K))[0]?e:i[0],F=null==i[1]?e:i[1],re=null==i[3]?e:i[3],X=null==i[11]?e:i[11],W=null==i[12]?e:i[12],l(C(U,0))&&l(w(U,X)))l(C(s.racc_error_status,0))&&(f(s.racc_t,1)||(s.racc_error_status=Y(s.racc_error_status,1))),s.racc_vstack.$push(s.racc_val),s.racc_state.$push(U),s.racc_read_next=!0,l(s.yydebug)&&(s.racc_tstack.$push(s.racc_t),s.$racc_shift(s.racc_t,s.racc_tstack,s.racc_vstack));else if(l(w(U,0))&&l(C(U,W["$-@"]()))){if(T=N(s,"catch",["racc_jump"],function x(){var ne=null==x.$$s?this:x.$$s;return null==ne.racc_state&&(ne.racc_state=e),ne.racc_state.$push(ne.$_racc_do_reduce(K,U)),!1},{$$arity:0,$$s:s}),l(T)){if(A(1,J=T))return s.racc_user_yyerror=!0,W["$-@"]();if(A(2,J))return X;s.$raise("[Racc Bug] unknown jump code")}}else if(f(U,X))l(s.yydebug)&&s.$racc_accept(),s.$throw("racc_end_parse",s.racc_vstack["$[]"](0));else{if(f(U,W["$-@"]())){for(A(0,J=s.racc_error_status)?l(K["$[]"](21))||s.$on_error(s.racc_t,s.racc_val,s.racc_vstack):A(3,J)&&(f(s.racc_t,0)&&s.$throw("racc_end_parse",e),s.racc_read_next=!0),s.racc_user_yyerror=!1,s.racc_error_status=3;l(!0)&&!(l(p=re["$[]"](s.racc_state["$[]"](-1)))&&(p=L(p,1),l(u(p,0))&&l(U=M["$[]"](p))&&f(F["$[]"](p),s.racc_state["$[]"](-1))));)l(I(s.racc_state.$size(),1))&&s.$throw("racc_end_parse",e),s.racc_state.$pop(),s.racc_vstack.$pop(),l(s.yydebug)&&(s.racc_tstack.$pop(),s.$racc_e_pop(s.racc_state,s.racc_tstack,s.racc_vstack));return U}s.$raise("[Racc Bug] unknown action "+U.$inspect())}return l(s.yydebug)&&s.$racc_next_state(s.racc_state["$[]"](-1),s.racc_state),e},2),G(c,"$_racc_do_reduce",function(U,K){var i,W,J,O,ue,se,ae,s=this,F=e,Q=e,re=e,X=e,T=e,p=e,x=e,ne=e,$e=e,te=e,le=e,oe=e,ce=e,ie=e;return F=null==(i=ee(U))[4]?e:i[4],Q=null==i[5]?e:i[5],re=null==i[6]?e:i[6],X=null==i[7]?e:i[7],W=null==i[8]?e:i[8],T=null==i[9]?e:i[9],J=null==i[13]?e:i[13],p=s.racc_state,x=s.racc_vstack,ne=s.racc_tstack,$e=h(K,-3),te=T["$[]"]($e),O=T["$[]"](L($e,1)),ue=T["$[]"](L($e,2)),se=[],l(s.yydebug)&&(le=ne["$[]"](te["$-@"](),te)),oe=x["$[]"](te["$-@"](),te),l(s.yydebug)&&(ce=[te["$-@"](),te,se],N(ne,"[]=",Z(ce)),Y(ce.length,1)),ce=[te["$-@"](),te,se],N(x,"[]=",Z(ce)),Y(ce.length,1),ce=[te["$-@"](),te,se],N(p,"[]=",Z(ce)),Y(ce.length,1),l(J)?x.$push(s.$__send__(ue,oe,x,oe["$[]"](0))):x.$push(s.$__send__(ue,oe,x)),ne.$push(O),l(s.yydebug)&&s.$racc_reduce(le,O,ne,x),ae=Y(O,W),l($e=X["$[]"](ae))&&($e=L($e,p["$[]"](-1)),l(u($e,0))&&l(ie=F["$[]"]($e))&&f(Q["$[]"]($e),ae))?ie:re["$[]"](ae)},2),G(c,"$on_error",function(U,K,i){var s,z=this;return z.$raise(q("ParseError"),z.$sprintf("\nparse error on value %s (%s)",K.$inspect(),l(s=z.$token_to_str(U))?s:"?"))},3),G(c,"$yyerror",function(){return this.$throw("racc_jump",1)},0),G(c,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),G(c,"$yyerrok",function(){return this.racc_error_status=0},0),G(c,"$racc_read_token",function(U,K,i){var z=this;return z.racc_debug_out.$print("read    "),z.racc_debug_out.$print(K.$inspect(),"(",z.$racc_token2str(U),") "),z.racc_debug_out.$puts(i.$inspect()),z.racc_debug_out.$puts()},3),G(c,"$racc_shift",function(U,K,i){var z=this;return z.racc_debug_out.$puts("shift   "+z.$racc_token2str(U)),z.$racc_print_stacks(K,i),z.racc_debug_out.$puts()},3),G(c,"$racc_reduce",function(U,K,i,z){var s=this,M=e;return(M=s.racc_debug_out).$print("reduce "),l(U["$empty?"]())?M.$print(" <none>"):N(U,"each",[],function F(Q){return null==Q&&(Q=e),M.$print(" ",(null==F.$$s?this:F.$$s).$racc_token2str(Q))},{$$arity:1,$$s:s}),M.$puts(" --\x3e "+s.$racc_token2str(K)),s.$racc_print_stacks(i,z),s.racc_debug_out.$puts()},4),G(c,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),G(c,"$racc_e_pop",function(U,K,i){var z=this;return z.racc_debug_out.$puts("error recovering mode: pop token"),z.$racc_print_states(U),z.$racc_print_stacks(K,i),z.racc_debug_out.$puts()},3),G(c,"$racc_next_state",function(U,K){var i=this;return i.racc_debug_out.$puts("goto    "+U),i.$racc_print_states(K),i.racc_debug_out.$puts()},2),G(c,"$racc_print_stacks",function(U,K){var z=e;return(z=this.racc_debug_out).$print("        ["),N(U,"each_index",[],function s(M){return null==M&&(M=e),z.$print(" (",(null==s.$$s?this:s.$$s).$racc_token2str(U["$[]"](M))," ",K["$[]"](M).$inspect(),")")},{$$arity:1,$$s:this}),z.$puts(" ]")},2),G(c,"$racc_print_states",function(U){var i=e;return(i=this.racc_debug_out).$print("        ["),N(U,"each",[],function(s){return null==s&&(s=e),i.$print(" ",s)},1),i.$puts(" ]")},1),G(c,"$racc_token2str",function(U){var i;return l(i=k(this.$class(),"Racc_token_to_s_table")["$[]"](U))?i:this.$raise("[Racc Bug] can't convert token "+U+" to string")},1),G(c,"$token_to_str",function(U){return k(this.$class(),"Racc_token_to_s_table")["$[]"](U)},1)}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(r){var Y,L,A,o,m,h,b,u,ee,j=[],n=r.nil,t=r.$$$,e=r.module,k=r.klass,E=r.def,P=r.send2,l=r.find_super,H=r.eqeq,V=r.const_set,v=r.eqeqeq,w=r.rb_divide,N=r.alias;return Y=j,L=ee=[e(j[0],"BCDice")].concat(Y),A=u=[e(ee[0],"Arithmetic")].concat(L),h=[e(u[0],"Node")].concat(A),b=r.$r(h),(m=(o=k(h[0],null,"BinaryOp")).$$prototype).lhs=m.rhs=m.op=n,E(o,"$initialize",function(a,_,$){var c=this;return c.lhs=a,c.op=_,c.rhs=$},3),E(o,"$eval",function(a){var c,_=this,$=n;return $=_.lhs.$eval(a),c=_.rhs.$eval(a),$.$send(_.op,c)},1),E(o,"$output",function(){var a=this;return""+a.lhs.$output()+a.op+a.rhs.$output()},0),E(o,"$s_exp",function(){var a=this;return"("+a.$op_for_s_exp()+" "+a.lhs.$s_exp()+" "+a.rhs.$s_exp()+")"},0),E(o,"$op_for_s_exp",function(){return this.op},0),function(g,D,o){var m=k(g,D,"DivideBase"),d=[m].concat(o),a=r.$r(d),_=m.$$prototype;_.lhs=_.rhs=_.op=n,E(m,"$initialize",function $(c,R){return delete $.$$p,P(this,l(this,"initialize",$,!1,!0),"initialize",[c,"/",R],null)},2),E(m,"$eval",function(c){var q,y,R=this;return q=R.lhs.$eval(c),y=R.rhs.$eval(c),H(y,0)&&R.$raise(a("ZeroDivisionError")),R.$divide_and_round(q,y,c)},1),E(m,"$output",function $(){var c=$.$$p||n,R=this;return delete $.$$p,""+P(R,l(R,"output",$,!1,!0),"output",[],c)+R.$rounding_method()},0),m.$private(),E(m,"$rounding_method",function(){return t(this.$class(),"ROUNDING_METHOD")},0),E(m,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),E(m,"$divide_and_round",function(c,R,q){return this.$raise(a("NotImplementedError"))},3)}(h[0],b("BinaryOp"),h),function(g,D,o){var m=k(g,D,"DivideWithGameSystemDefault"),d=[m].concat(o),a=r.$r(d);V(d[0],"ROUNDING_METHOD",""),m.$private(),E(m,"$divide_and_round",function($,c,R){var q;return v(t(a("RoundType"),"CEIL"),q=R)?w($.$to_f(),c).$ceil():v(t(a("RoundType"),"ROUND"),q)?w($.$to_f(),c).$round():w($,c).$floor()},3)}(h[0],b("DivideBase"),h),function(g,D,o){var m=k(g,D,"DivideWithCeil"),d=[m].concat(o);V(d[0],"ROUNDING_METHOD","C"),m.$private(),E(m,"$divide_and_round",function(_,$,c){return w(_.$to_f(),$).$ceil()},3)}(h[0],b("DivideBase"),h),function(g,D,o){var m=k(g,D,"DivideWithRound"),d=[m].concat(o);V(d[0],"ROUNDING_METHOD","R"),m.$private(),E(m,"$divide_and_round",function(_,$,c){return w(_.$to_f(),$).$round()},3)}(h[0],b("DivideBase"),h),function(g,D,o){var m=k(g,D,"DivideWithFloor"),d=[m].concat(o);V(d[0],"ROUNDING_METHOD","F"),m.$private(),E(m,"$divide_and_round",function(_,$,c){return w(_,$).$to_i()},3)}(h[0],b("DivideBase"),h),function(g,D){var o=k(g,null,"Negative");o.$$prototype.body=n,E(o,"$initialize",function(a){return this.body=a},1),E(o,"$eval",function(a){return this.body.$eval(a)["$-@"]()},1),E(o,"$output",function(){return"-"+this.body.$output()},0),E(o,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(h[0]),function(g,D){var o=k(g,null,"Parenthesis");o.$$prototype.expr=n,E(o,"$initialize",function(a){return this.expr=a},1),E(o,"$eval",function(a){return this.expr.$eval(a)},1),E(o,"$output",function(){return"("+this.expr.$output()+")"},0),E(o,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(h[0]),function(g,D){var o=k(g,null,"Number");return o.$$prototype.value=n,E(o,"$initialize",function(a){return this.value=a},1),E(o,"$eval",function(a){return this.value},1),E(o,"$output",function(){return this.value.$to_s()},0),N(o,"s_exp","output")}(h[0])},Opal.modules.strscan=function(r){var Z,Y,G,ee,B,j=[],n=r.nil,e=r.def,k=r.truthy,E=r.eqeqeq,P=r.Opal,l=r.send,H=r.to_a,V=r.rb_minus,v=r.alias;return Z=j,G=[Y=(0,r.klass)(j[0],null,"StringScanner")].concat(Z),ee=r.$r(G),(B=Y.$$prototype).pos=B.string=B.working=B.matched=B.prev_pos=B.match=n,Y.$attr_reader("pos","matched"),e(Y,"$initialize",function(f){var u=this;return u.string=f,u.pos=0,u.matched=n,u.working=f,u.match=[]},1),Y.$attr_reader("string"),e(Y,"$beginning_of_line?",function(){var f=this;return 0===f.pos||"\n"===f.string.charAt(f.pos-1)},0),e(Y,"$scan",function(f){var u=this,C=(f=u.$anchor(f)).exec(u.working);return null==C?u.matched=n:"object"==typeof C?(u.prev_pos=u.pos,u.pos+=C[0].length,u.working=u.working.substring(C[0].length),u.matched=C[0],u.match=C,C[0]):"string"==typeof C?(u.pos+=C.length,u.working=u.working.substring(C.length),C):n},1),e(Y,"$scan_until",function(f){var u=this;f=u.$anchor(f);for(var I,C=u.pos,A=u.working;;){if(I=f.exec(A),C+=1,A=A.substr(1),null!=I)return u.matched=u.string.substr(u.pos,C-u.pos-1+I[0].length),u.match=I,u.prev_pos=C-1,u.pos=C,u.working=A.substr(I[0].length),u.matched;if(0===A.length)return u.match=[],u.matched=n}},1),e(Y,"$[]",function(f){var C;if(k(this.match["$empty?"]()))return n;E(ee("Symbol"),C=f)?f=f.$to_s():E(ee("String"),C)||(f=P["$coerce_to!"](f,ee("Integer"),"to_int"));var A=this.match;return f<0&&(f+=A.length),f<0||f>=A.length||null==A[f]?n:A[f]},1),e(Y,"$check",function(f){var u=this,C=(f=u.$anchor(f)).exec(u.working);return u.matched=null==C?n:C[0]},1),e(Y,"$check_until",function(f){var u=this,C=u.prev_pos,A=u.pos,I=u.$scan_until(f);return I!==n&&(u.matched=I.substr(-1),u.working=u.string.substr(A)),u.prev_pos=C,u.pos=A,I},1),e(Y,"$peek",function(f){return this.working.substring(0,f)},1),e(Y,"$eos?",function(){return 0===this.working.length},0),e(Y,"$exist?",function(f){var C=f.exec(this.working);return null==C?n:0==C.index?0:C.index+1},1),e(Y,"$skip",function(f){var u=this,C=(f=u.$anchor(f)).exec(u.working);if(null==C)return u.match=[],u.matched=n;var A=C[0],I=A.length;return u.matched=A,u.match=C,u.prev_pos=u.pos,u.pos+=I,u.working=u.working.substring(I),I},1),e(Y,"$skip_until",function(f){var C=this.$scan_until(f);return C===n?n:(this.matched=C.substr(-1),C.length)},1),e(Y,"$get_byte",function(){var f=this,u=n;return f.pos<f.string.length?(f.prev_pos=f.pos,f.pos+=1,u=f.matched=f.working.substring(0,1),f.working=f.working.substring(1)):f.matched=n,u},0),e(Y,"$match?",function(f){var u=this,C=(f=u.$anchor(f)).exec(u.working);return null==C?n:(u.prev_pos=u.pos,C[0].length)},1),e(Y,"$pos=",function(f){var u=this;return f<0&&(f+=u.string.$length()),u.pos=f,u.working=u.string.slice(f)},1),e(Y,"$matched_size",function(){return this.matched===n?n:this.matched.length},0),e(Y,"$post_match",function(){var f=this;return f.matched===n?n:f.string.substr(f.pos)},0),e(Y,"$pre_match",function(){var f=this;return f.matched===n?n:f.string.substr(0,f.prev_pos)},0),e(Y,"$reset",function(){var f=this;return f.working=f.string,f.matched=n,f.pos=0},0),e(Y,"$rest",function(){return this.working},0),e(Y,"$rest?",function(){return 0!==this.working.length},0),e(Y,"$rest_size",function(){return this.$rest().$size()},0),e(Y,"$terminate",function(){var u,f=this;return f.match=n,u=[f.string.$length()],l(f,"pos=",H(u)),u[V(u.length,1)]},0),e(Y,"$unscan",function(){var f=this;return f.pos=f.prev_pos,f.prev_pos=n,f.match=n,f},0),v(Y,"bol?","beginning_of_line?"),v(Y,"getch","get_byte"),Y.$private(),e(Y,"$anchor",function(f){var u=f.toString().match(/\/([^\/]+)$/);return u=u?u[1]:void 0,new RegExp("^(?:"+f.source+")",u)},1)},Opal.modules["bcdice/normalize"]=function(r){var l,w,V,j=[],n=r.nil,t=r.module,e=r.eqeqeq,k=r.def,E=r.eqeq;return l=j,V=[t(j[0],"BCDice")].concat(l),(w=t(V[0],"Normalize")).$module_function(),k(w,"$comparison_operator",function(Z){var Y;return e(/<=|=</,Y=Z)?"<=":e(/>=|=>/,Y)?">=":e(/<>|!=|=!/,Y)?"!=":e(/</,Y)?"<":e(/>/,Y)?">":e(/=/,Y)?"==":n},1),k(w,"$target_number",function(Z){return E(Z,"?")?Z:Z.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var w,G,u,C,A,I,h,B,Z,j=r.top,n=[],t=r.nil,e=r.module,k=r.klass,E=r.const_set,P=r.hash2,l=r.truthy,H=r.send,V=r.def;return j.$require("strscan"),j.$require("bcdice/normalize"),w=n,G=Z=[e(n[0],"BCDice")].concat(w),u=B=[e(Z[0],"Command")].concat(G),A=[C=k(B[0],null,"Lexer")].concat(u),I=r.$r(A),(h=C.$$prototype).scanner=h.notations=t,E(A[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),V(C,"$initialize",function(g,D){var o,m,a;return g=l(a=(m=(o=g)===t||null==o?t:H(o,"split",[" ",2]))===t||null==m?t:H(m,"first",[]))?a:"",this.scanner=I("StringScanner").$new(g),this.notations=H(D,"map",[],function($){return null==$&&($=t),l($["$is_a?"](I("String")))?I("Regexp").$new($):$},1)},2),V(C,"$next_token",function(){try{var g=this,D=t,o=t,d=t,a=t;return l(g.scanner["$eos?"]())?[!1,"$"]:(H(g.notations,"each",[],function _($){var R,c=null==_.$$s?this:_.$$s;if(null==c.scanner&&(c.scanner=t),null==$&&($=t),R=c.scanner.$scan($),!l(R))return t;r.ret(["NOTATION",R])},{$$arity:1,$$s:g}),l(D=g.scanner.$scan(/\d+/))?["NUMBER",D.$to_i()]:l(o=g.scanner.$scan(/[<>!=]+/))?(o=I("Normalize").$comparison_operator(o),[l(o)?"CMP_OP":"ILLEGAL",o]):(d=g.scanner.$getch().$upcase(),[l(a=I("SYMBOLS")["$[]"](d))?a:d.$to_sym(),d]))}catch(_){if(_===r.returner)return _.$v;throw _}},0),V(C,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var H,N,B,L,f,u,C,Y,v,j=[],n=r.nil,t=r.module,e=r.klass,k=r.def,E=r.truthy,P=r.eqeqeq;return H=j,N=v=[t(j[0],"BCDice")].concat(H),B=Y=[t(v[0],"Command")].concat(N),f=[L=e(Y[0],null,"Parsed")].concat(B),u=r.$r(f),(C=L.$$prototype).question_target=C.critical=C.fumble=C.dollar=C.modify_number=C.target_number=C.prefix_number=C.command=C.suffix_number=C.cmp_op=n,L.$attr_accessor("command"),L.$attr_accessor("prefix_number"),L.$attr_accessor("suffix_number"),L.$attr_accessor("critical"),L.$attr_accessor("fumble"),L.$attr_accessor("dollar"),L.$attr_accessor("modify_number"),L.$attr_accessor("cmp_op"),L.$attr_accessor("target_number"),L.$attr_writer("question_target"),k(L,"$initialize",function(){var I=this;return I.prefix_number=n,I.suffix_number=n,I.critical=n,I.fumble=n,I.dollar=n,I.cmp_op=n,I.target_number=n,I.question_target=!1},0),k(L,"$question_target?",function(){return this.question_target},0),k(L,"$to_s",function(I){var d,h=this,b=n,g=n,D=n,o=n,m=n;return null==I&&(I="after_command"),b=E(h.critical)?"@"+h.critical:n,g=E(h.fumble)?"#"+h.fumble:n,D=E(h.dollar)?"$"+h.dollar:n,o=u("Format").$modifier(h.modify_number),m=E(h.question_target)?"?":h.target_number,P("after_command",d=I)?[h.prefix_number,h.command,h.suffix_number,b,g,D,o,h.cmp_op,m].$join():P("after_modify_number",d)?[h.prefix_number,h.command,h.suffix_number,o,b,g,D,h.cmp_op,m].$join():P("after_target_number",d)?[h.prefix_number,h.command,h.suffix_number,o,h.cmp_op,m,b,g,D].$join():n},-1)},Opal.modules["bcdice/command/parser"]=function(r){var u,h,d,c,R,q,y,S,U,K,i,z,F,a,_,$,X,g,D,A,j=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,E=r.klass,P=r.module,l=r.hash2,H=r.send2,V=r.find_super,v=r.def,w=r.send,N=r.to_a,Z=r.rb_minus,Y=r.eqeq,G=r.hash,ee=r.const_set,B=r.truthy,L=r.to_ary;return j.$require("racc/parser.rb"),j.$require("bcdice/arithmetic/node"),j.$require("bcdice/command/lexer"),j.$require("bcdice/command/parsed"),E(k(t("BCDice"),"Command"),k(t("Racc"),"Parser"),"Parser"),u=n,h=A=[P(n[0],"BCDice")].concat(u),g=[P(A[0],"Command")].concat(h),D=r.$r(g),d=g,_=[a=E(g[0],k(D("Racc"),"Parser"),"Parser")].concat(d),$=r.$r(_),(X=a.$$prototype).notations=X.lexer=X.modifier=X.suffix_number=X.prefix_number=X.need_suffix_number=X.need_prefix_number=X.critical=X.fumble=X.dollar=X.allowed_cmp_op=X.question_target=e,v(a,"$initialize",function W(T,J){var p,x,ne,$e,O=this;if(delete W.$$p,p=r.slice.call(arguments),null==(x=r.extract_kwargs(p)))x=l([],{});else if(!x.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(ne=p,!r.hasOwnProperty.call(x.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return $e=x.$$smap.round_type,H(O,V(O,"initialize",W,!1,!0),"initialize",[],null),O.notations=ne,O.round_type=$e,O.prefix_number=!1,O.suffix_number=!1,O.need_prefix_number=!1,O.need_suffix_number=!1,O.modifier=!0,O.critical=!1,O.fumble=!1,O.dollar=!1,O.allowed_cmp_op=[e,">=",">","<=","<","==","!="],O.question_target=!1},-2),v(a,"$disable_modifier",function(){return this.modifier=!1,this},0),v(a,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),v(a,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),v(a,"$has_prefix_number",function(){var T=this;return T.prefix_number=!0,T.need_prefix_number=!0,T},0),v(a,"$has_suffix_number",function(){var T=this;return T.suffix_number=!0,T.need_suffix_number=!0,T},0),v(a,"$enable_critical",function(){return this.critical=!0,this},0),v(a,"$enable_fumble",function(){return this.fumble=!0,this},0),v(a,"$enable_dollar",function(){return this.dollar=!0,this},0),v(a,"$restrict_cmp_op_to",function(T){var J,x=this;return J=r.slice.call(arguments),x.allowed_cmp_op=J,x},-1),v(a,"$enable_question_target",function(){return this.question_target=!0,this},0),v(a,"$parse",function(T){var J=this;try{return J.lexer=$("Lexer").$new(T,J.notations),J.$do_parse()}catch(p){if(!r.rescue(p,[$("ParseError"),$("ZeroDivisionError")]))throw p;try{return e}finally{r.pop_exception()}}},1),a.$private(),v(a,"$parsed",function(T,J,p,x){return w($("Parsed").$new(),"tap",[],function $e(te){var O,ue,se,le,oe,ce,ae=null==$e.$$s?this:$e.$$s,ie=e;return null==ae.round_type&&(ae.round_type=e),null==te&&(te=e),ie=[T["$[]"]("command")],w(te,"command=",N(ie)),Z(ie.length,1),ie=[(O=T["$[]"]("prefix"),O===e||null==O?e:w(O,"eval",[ae.round_type]))],w(te,"prefix_number=",N(ie)),Z(ie.length,1),ie=[(ue=T["$[]"]("suffix"),ue===e||null==ue?e:w(ue,"eval",[ae.round_type]))],w(te,"suffix_number=",N(ie)),Z(ie.length,1),ie=[(se=J["$[]"]("critical"),se===e||null==se?e:w(se,"eval",[ae.round_type]))],w(te,"critical=",N(ie)),Z(ie.length,1),ie=[(le=J["$[]"]("fumble"),le===e||null==le?e:w(le,"eval",[ae.round_type]))],w(te,"fumble=",N(ie)),Z(ie.length,1),ie=[(oe=J["$[]"]("dollar"),oe===e||null==oe?e:w(oe,"eval",[ae.round_type]))],w(te,"dollar=",N(ie)),Z(ie.length,1),ie=[p.$eval(ae.round_type)],w(te,"modify_number=",N(ie)),Z(ie.length,1),ie=[x["$[]"]("cmp_op")],w(te,"cmp_op=",N(ie)),Z(ie.length,1),Y(x["$[]"]("target"),"?")?(w(te,"question_target=",N(ie=[!0])),Z(ie.length,1),w(te,"target_number=",N(ie=[0])),ie[Z(ie.length,1)]):(w(te,"question_target=",N(ie=[!1])),Z(ie.length,1),ie=[(ce=x["$[]"]("target"),ce===e||null==ce?e:w(ce,"eval",[ae.round_type]))],w(te,"target_number=",N(ie)),ie[Z(ie.length,1)])},{$$arity:1,$$s:this})},4),v(a,"$next_token",function(){return this.lexer.$next_token()},0),c=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],R=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],q=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],y=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],S=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],U=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],K=[e,6,13,3,9,-1,27,-15,-10,-1,-38],i=[e,e,e,e,e,e,19,16,15,e,e],z=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],F=G(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),ee(_[0],"Racc_arg",[c,R,y,q,S,U,i,K,19,z,F,58,35,!0]),ee(_[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),ee(_[0],"Racc_debug_parser",!1),v(a,"$_reduce_1",function(T,J,p){var x;return B(this.modifier)||this.$raise($("ParseError")),x=L(T),this.$parsed(null==x[0]?e:x[0],null==x[1]?e:x[1],null==x[2]?e:x[2],null==x[3]?e:x[3])},3),v(a,"$_reduce_2",function(T,J,p){var x;return B(this.modifier)||this.$raise($("ParseError")),x=L(T),this.$parsed(null==x[0]?e:x[0],null==x[2]?e:x[2],null==x[1]?e:x[1],null==x[3]?e:x[3])},3),v(a,"$_reduce_3",function(T,J,p){var x,ue;return ue=null==(x=L(T))[2]?e:x[2],this.$parsed(null==x[0]?e:x[0],null==x[1]?e:x[1],k(k($("Arithmetic"),"Node"),"Number").$new(0),ue)},3),v(a,"$_reduce_4",function(T,J,p){var x=this;return B(x.prefix_number)&&B(x.suffix_number)||x.$raise($("ParseError")),l(["command","prefix","suffix"],{command:T["$[]"](1),prefix:T["$[]"](0),suffix:T["$[]"](2)})},3),v(a,"$_reduce_5",function(T,J,p){var x=this;return B(x.prefix_number)||x.$raise($("ParseError")),B(x.need_suffix_number)&&x.$raise($("ParseError")),l(["command","prefix"],{command:T["$[]"](1),prefix:T["$[]"](0)})},3),v(a,"$_reduce_6",function(T,J,p){var x=this;return B(x.suffix_number)||x.$raise($("ParseError")),B(x.need_prefix_number)&&x.$raise($("ParseError")),l(["command","suffix"],{command:T["$[]"](0),suffix:T["$[]"](1)})},3),v(a,"$_reduce_7",function(T,J,p){var x=this;return(B(x.need_prefix_number)||B(x.need_suffix_number))&&x.$raise($("ParseError")),l(["command"],{command:T["$[]"](0)})},3),v(a,"$_reduce_8",function(T,J,p){return l([],{})},3),v(a,"$_reduce_9",function(T,J,p){var x,ue,se,te=e;return te=null==(x=L(T))[0]?e:x[0],ue=null==x[2]?e:x[2],B(this.critical)&&B(te["$[]"]("critical")["$nil?"]())||this.$raise($("ParseError")),w(te,"[]=",N(se=["critical",ue])),Z(se.length,1),te},3),v(a,"$_reduce_10",function(T,J,p){var x,ue,se,te=e;return te=null==(x=L(T))[0]?e:x[0],ue=null==x[2]?e:x[2],B(this.fumble)&&B(te["$[]"]("fumble")["$nil?"]())||this.$raise($("ParseError")),w(te,"[]=",N(se=["fumble",ue])),Z(se.length,1),te},3),v(a,"$_reduce_11",function(T,J,p){var x,ue,se,te=e;return te=null==(x=L(T))[0]?e:x[0],ue=null==x[2]?e:x[2],B(this.dollar)&&B(te["$[]"]("dollar")["$nil?"]())||this.$raise($("ParseError")),w(te,"[]=",N(se=["dollar",ue])),Z(se.length,1),te},3),v(a,"$_reduce_12",function(T,J,p){return T["$[]"](1)},3),v(a,"$_reduce_13",function(T,J,p){return k(k($("Arithmetic"),"Node"),"Negative").$new(T["$[]"](1))},3),v(a,"$_reduce_14",function(T,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(T["$[]"](0),"+",T["$[]"](2))},3),v(a,"$_reduce_15",function(T,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(T["$[]"](0),"-",T["$[]"](2))},3),v(a,"$_reduce_16",function(T,J,p){return B(this.allowed_cmp_op["$include?"](e))||this.$raise($("ParseError")),l([],{})},3),v(a,"$_reduce_17",function(T,J,p){var x,te,O;return O=null==(x=L(T))[1]?e:x[1],B(this.allowed_cmp_op["$include?"](te=null==x[0]?e:x[0]))||this.$raise($("ParseError")),l(["cmp_op","target"],{cmp_op:te,target:O})},3),v(a,"$_reduce_18",function(T,J,p){var ne,x=this;return ne=T["$[]"](0),B(x.question_target)||x.$raise($("ParseError")),B(x.allowed_cmp_op["$include?"](ne))||x.$raise($("ParseError")),l(["cmp_op","target"],{cmp_op:ne,target:"?"})},3),v(a,"$_reduce_19",function(T,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(T["$[]"](0),"+",T["$[]"](2))},3),v(a,"$_reduce_20",function(T,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(T["$[]"](0),"-",T["$[]"](2))},3),v(a,"$_reduce_22",function(T,J,p){return k(k($("Arithmetic"),"Node"),"BinaryOp").$new(T["$[]"](0),"*",T["$[]"](2))},3),v(a,"$_reduce_23",function(T,J,p){return T["$[]"](3).$new(T["$[]"](0),T["$[]"](2))},3),v(a,"$_reduce_25",function(T,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),v(a,"$_reduce_26",function(T,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),v(a,"$_reduce_27",function(T,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithCeil")},3),v(a,"$_reduce_28",function(T,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithRound")},3),v(a,"$_reduce_29",function(T,J,p){return k(k($("Arithmetic"),"Node"),"DivideWithFloor")},3),v(a,"$_reduce_30",function(T,J,p){return T["$[]"](1)},3),v(a,"$_reduce_31",function(T,J,p){return k(k($("Arithmetic"),"Node"),"Negative").$new(T["$[]"](1))},3),v(a,"$_reduce_33",function(T,J,p){return T["$[]"](1)},3),v(a,"$_reduce_34",function(T,J,p){return k(k($("Arithmetic"),"Node"),"Number").$new(T["$[]"](0))},3),v(a,"$_reduce_none",function(T,J,p){return T["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var H,N,ee,B,L,f,Y,v,j=[],n=r.nil,t=r.module,e=r.send,k=r.eqeqeq,E=r.truthy,P=r.def;return H=j,N=v=[t(j[0],"BCDice")].concat(H),ee=Y=[t(v[0],"Deprecated")].concat(N),L=[B=t(Y[0],"Checker")].concat(ee),f=r.$r(L),B.$private(),P(B,"$check_result_legacy",function(C,A,I,h){var o,b=this,g=n,D=n,m=n,d=n;return g=e(A,"map",[],"sides".$to_proc()),o=(D=e(A,"map",[],"value".$to_proc())).$sum(),m=k([100],d=g)?b.$check_1D100(C,o,I,h):k([20],d)?b.$check_1D20(C,o,I,h):k([6,6],d)?b.$check_2D6(C,o,D,I,h):n,(E(m["$nil?"]())||E(m["$empty?"]()))&&(m=k([10],d=g.$uniq())?b.$check_nD10(C,o,D,I,h):k([6],d)?b.$check_nD6(C,o,D,I,h):n,E(m["$nil?"]())||E(m["$empty?"]()))?n:f("Result").$new(m.$delete_prefix(" \uff1e "))},4),P(B,"$check_1D100",function(C,A,I,h){return n},4),P(B,"$check_1D20",function(C,A,I,h){return n},4),P(B,"$check_nD10",function(C,A,I,h,b){return n},5),P(B,"$check_2D6",function(C,A,I,h,b){return n},5),P(B,"$check_nD6",function(C,A,I,h,b){return n},5)},Opal.modules["bcdice/base"]=function(r){var A,D,_,c,R,o,m,d,a,h,j=r.top,n=[],t=r.$r(n),e=r.nil,k=r.$$$,E=r.module,P=r.klass,l=r.truthy,H=r.def,V=r.regexp,v=r.rb_plus,w=r.send,N=r.to_a,Z=r.rb_minus,Y=r.eqeqeq,G=r.eqeq,ee=r.range,B=r.rb_divide,L=r.rb_times,f=r.rb_ge,u=e;return j.$require("i18n"),j.$require("i18n/backend/fallbacks"),j.$require("bcdice/randomizer"),j.$require("bcdice/dice_table"),j.$require("bcdice/enum"),j.$require("bcdice/translate"),j.$require("bcdice/result"),j.$require("bcdice/command/parser"),j.$require("bcdice/deprecated/checker"),A=n,D=h=[E(n[0],"BCDice")].concat(A),m=[o=P(h[0],null,"Base")].concat(D),d=r.$r(m),(a=o.$$prototype).sort_add_dice=a.sort_barabara_dice=a.enabled_d9=a.raw_input=a.randomizer=a.enabled_upcase_input=a.debug=e,c=[_=r.get_singleton_class(o)].concat(m),R=r.$r(c),_.$attr_reader("prefixes"),H(_,"$register_prefix",function(y){var U,K=this,i=e;return null==K.prefixes&&(K.prefixes=e),U=r.slice.call(arguments),K.prefixes=l(i=K.prefixes)?i:[],K.prefixes.$concat(U.$flatten())},-1),H(_,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),H(_,"$prefixes_pattern",function(){var y=this,S=e;return null==y.prefixes_pattern&&(y.prefixes_pattern=e),null==y.prefixes&&(y.prefixes=e),y.prefixes_pattern=l(S=y.prefixes_pattern)?S:e,l(y.prefixes_pattern)?y.prefixes_pattern:(y.prefixes=l(S=y.prefixes)?S:[],y.prefixes.$freeze(),y.prefixes_pattern=(l(y.prefixes["$empty?"]())?/(?!)/:V(["^(S)?(",y.prefixes.$join("|"),")"],"i")).$freeze())},0),H(_,"$command_pattern",function(){var y=this,S=e,U=e;return null==y.command_pattern&&(y.command_pattern=e),null==y.prefixes&&(y.prefixes=e),y.command_pattern=l(S=y.command_pattern)?S:e,l(y.command_pattern)?y.command_pattern:(y.prefixes=l(S=y.prefixes)?S:[],y.prefixes.$freeze(),U=v(w(k(R("CommonCommand"),"COMMANDS"),"map",[],function(i){return null==i&&(i=e),k(i,"PREFIX_PATTERN").$source()},1),y.prefixes),y.command_pattern=V(["^S?(",U.$join("|"),")"],"i").$freeze())},0),H(_,"$eval",function(y){return this.$new(y).$eval()},1),o.$include(d("Translate")),o.$include(k(d("Deprecated"),"Checker")),H(o,"$initialize",function($){var c=this;return c.raw_input=$,c.sort_add_dice=!1,c.sort_barabara_dice=!1,c.d66_sort_type=k(d("D66SortType"),"NO_SORT"),c.enabled_d9=!1,c.round_type=k(d("RoundType"),"FLOOR"),c.sides_implicit_d=6,c.upper_dice_reroll_threshold=e,c.reroll_dice_reroll_threshold=e,c.default_cmp_op=e,c.default_target_number=e,c.enabled_upcase_input=!0,c.locale="ja_jp",c.randomizer=k(d("BCDice"),"Randomizer").$new(),c.debug=!1},1),o.$attr_accessor("randomizer"),o.$attr_reader("d66_sort_type"),o.$attr_reader("round_type"),o.$attr_reader("sides_implicit_d"),o.$attr_reader("upper_dice_reroll_threshold"),o.$attr_reader("reroll_dice_reroll_threshold"),o.$attr_reader("default_cmp_op"),o.$attr_reader("default_target_number"),H(o,"$sort_add_dice?",function(){return this.sort_add_dice},0),H(o,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),H(o,"$enabled_d9?",function(){return this.enabled_d9},0),H(o,"$enable_debug",function(){return this.debug=!0},0),H(o,"$eval",function(){var c,R,q,$=this,y=e;return c=k(d("BCDice"),"Preprocessor").$process($.raw_input,$),R=l(q=$.$dice_command(c))?q:$.$eval_common_command($.raw_input),l(R)?(y=[$.randomizer.$rand_results()],w(R,"rands=",N(y)),Z(y.length,1),y=[$.randomizer.$detailed_rand_results()],w(R,"detailed_rands=",N(y)),Z(y.length,1),R):e},0),H(o,"$change_text",function($){return $},1),H(o,"$check_result",function($,c,R,q){var y=this,S=e,U=e,K=e,i=e,z=e;return S=y.$check_result_legacy($,c,R,q),l(S)?S:(U=w(c,"map",[],"sides".$to_proc()),i=(K=w(c,"map",[],"value".$to_proc())).$sum(),S=Y([100],z=U)?y.$result_1d100($,i,R,q):Y([20],z)?y.$result_1d20($,i,R,q):Y([6,6],z)?y.$result_2d6($,i,K,R,q):e,G(S,d("Result").$nothing())?e:l(S)?S:(S=Y([10],z=U.$uniq())?y.$result_nd10($,i,K,R,q):Y([6],z)?y.$result_nd6($,i,K,R,q):e,G(S,d("Result").$nothing())?e:l(S)?S:y.$result_ndx($,R,q)))},4),H(o,"$grich_text",function($,c,R){return e},3),o.$private(),H(o,"$eval_common_command",function($){try{return $=this.$change_text($),w(k(d("CommonCommand"),"COMMANDS"),"each",[],function R(q){var S,y=null==R.$$s?this:R.$$s;if(null==y.randomizer&&(y.randomizer=e),null==q&&(q=e),S=q.$eval($,y,y.randomizer),!l(S))return e;r.ret(S)},{$$arity:1,$$s:this}),e}catch(R){if(R===r.returner)return R.$v;throw R}},1),H(o,"$dice_command",function($){var c=this,R=e,q=e,y=e,S=e,U=e;return l(c.enabled_upcase_input)&&($=$.$upcase()),R=c.$class().$prefixes_pattern().$match($),l(R)?(q=R["$[]"](1)["$nil?"]()["$!"](),l(q)&&($=$["$[]"](ee(1,-1,!1))),y=c.$eval_game_system_specific_command($),l(y["$is_a?"](d("Result")))?(S=[l(U=y["$secret?"]())?U:q],w(y,"secret=",N(S)),Z(S.length,1),y):l(y["$nil?"]())||l(y["$empty?"]())||G(y,"1")?e:w(d("Result").$new(),"tap",[],function(i){return null==i&&(i=e),S=[y.$to_s()],w(i,"text=",N(S)),Z(S.length,1),w(i,"secret=",N(S=[q])),S[Z(S.length,1)]},1)):e},1),H(o,"$eval_game_system_specific_command",function($){return e},1),H(o,"$result_ndx",function($,c,R){return l(R["$is_a?"](d("String")))?e:l($.$send(c,R))?d("Result").$success(this.$translate("success")):d("Result").$failure(this.$translate("failure"))},3),H(o,"$result_1d100",function($,c,R,q){return e},4),H(o,"$result_1d20",function($,c,R,q){return e},4),H(o,"$result_nd10",function($,c,R,q,y){return e},5),H(o,"$result_2d6",function($,c,R,q,y){return e},5),H(o,"$result_nd6",function($,c,R,q,y){return e},5),H(o,"$get_table_by_2d6",function($){return this.$get_table_by_nD6($,2)},1),H(o,"$get_table_by_1d6",function($){return this.$get_table_by_nD6($,1)},1),H(o,"$get_table_by_nD6",function($,c){return this.$get_table_by_nDx($,c,6)},2),H(o,"$get_table_by_nDx",function($,c,R){var y,S=e;return y=this.randomizer.$roll_sum(c,R),S=this.$get_table_value($["$[]"](Z(y,c))),l(S["$nil?"]())?["1",0]:[S,y]},3),H(o,"$get_table_by_1d3",function($){var q,y,c=this,S=e;return c.$debug("get_table_by_1d3"),q=c.randomizer.$roll_sum(1,6),c.$debug("num",q),y=B(Z(q,1),2).$to_i(),c.$debug("index",y),S=$["$[]"](y),l(S["$nil?"]())?["1",0]:[S,q]},1),H(o,"$get_table_by_d66_swap",function($){var R;return R=this.randomizer.$roll_d66(k(d("D66SortType"),"ASC")),[this.$get_table_by_number(R,$),R]},1),H(o,"$get_table_by_d66",function($){var R,q,y,U,S=e;return R=this.randomizer.$roll_once(6),q=this.randomizer.$roll_once(6),y=v(L(Z(R,1),6),Z(q,1)),S=$["$[]"](y),U=""+R+q,l(S["$nil?"]())?["1",U]:[S,U]},1),H(o,"$get_table_by_number",function($,c,R){try{return null==R&&(R="1"),w(c,"each",[],function y(S){var K,U=null==y.$$s?this:y.$$s;if(null==S&&(S=e),K=S["$[]"](0),!l(f(K,$)))return e;r.ret(U.$get_table_value(S["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(R)}catch(y){if(y===r.returner)return y.$v;throw y}},-3),H(o,"$get_table_value",function($){return l($["$is_a?"](d("Proc")))?$.$call():$},1),H(o,"$roll_tables",function($,c){var q=e;return q=c["$[]"]($),l(q)?q.$roll(this.randomizer).$to_s():e},2),H(o,"$debug",function($,c){var q,y=this,S=e,U=e;return q=r.slice.call(arguments,1),l(y.debug)?(S=l($["$is_a?"](d("String")))?$:$.$inspect(),l(q["$empty?"]())?y.$warn(S):(U=w(q,"map",[],function(i){return null==i&&(i=e),l(i["$is_a?"](d("String")))?'"'+i+'"':i.$inspect()},1),y.$warn(S+": "+U.$join(", ")))):e},-2),k(k(t("I18n"),"Backend"),"Simple").$include(k(k(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),u=["ja_jp"],w(t("I18n"),"default_locale=",N(u)),Z(u.length,1),u=[["ja_jp"]],w(t("I18n").$fallbacks(),"defaults=",N(u)),u[Z(u.length,1)]},Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var H,N,G,B,L,Z,Y,v,j=[],n=r.nil,t=r.$$$,e=r.module,k=r.hash2,E=r.truthy,P=r.def;return H=j,N=v=[e(j[0],"BCDice")].concat(H),Y=[Z=e(v[0],"ArithmeticEvaluator")].concat(N),B=[G=r.get_singleton_class(Z)].concat(Y),L=r.$r(B),P(G,"$eval",function(u,C){var A,I=n;if(null==C)C=k([],{});else if(!C.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(A=C.$$smap.round_type)&&(A=t(L("RoundType"),"FLOOR")),E(u)&&E(I=L("Arithmetic").$eval(u,A))?I:0},-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(r){var b,m,$,c,R,z,s,q,y,S,U,a,_,D,j=r.top,n=[],t=r.nil,e=r.$$$,k=r.module,E=r.klass,P=r.const_set,l=r.send2,H=r.find_super,V=r.def,v=r.truthy,w=r.hash2,N=r.rb_plus,Z=r.send,Y=r.to_a,G=r.rb_minus,ee=r.rb_ge,B=r.eqeqeq,L=r.rb_divide,f=r.rb_times,u=r.eqeq,C=r.neqeq,A=r.rb_le,I=r.rb_lt;return j.$require("bcdice/base"),j.$require("bcdice/arithmetic_evaluator"),b=n,m=D=[k(n[0],"BCDice")].concat(b),a=[k(D[0],"GameSystem")].concat(m),_=r.$r(a),$=a[0],c=_("Base"),R=a,y=[q=E($,c,"LogHorizon")].concat(R),S=r.$r(y),(U=q.$$prototype).randomizer=U.locale=t,P(y[0],"ID","LogHorizon"),P(y[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),P(y[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),P(y[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),q.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),V(q,"$initialize",function K(i){var s=this;return delete K.$$p,l(s,H(s,"initialize",K,!1,!0),"initialize",[i],null),s.d66_sort_type=e(S("D66SortType"),"NO_SORT")},1),V(q,"$eval_game_system_specific_command",function(i){var s,M,F,Q,re,X,W,T,J,p,x,z=this;return v(s=v(M=v(F=v(Q=v(re=v(X=v(W=v(T=v(J=v(p=v(x=z.$getCheckRollDiceCommandResult(i))?x:z.$roll_consumption(i))?p:z.$roll_consumption_table(i))?J:z.$roll_treasure(i))?T:z.$roll_treasure_table(i))?W:z.$roll_treasure_table_b2(i))?X:z.$getInventionAttributeTextDiceCommandResult(i))?re:z.$getTroubleInAkibaStreetDiceCommandResult(i))?Q:z.$getAbandonedChildDiceCommandResult(i))?F:z.$getMusicalInstrumentTypeDiceCommandResult(i))?M:z.$roll_eastal_exploration_table(i))?s:z.$roll_tables(i,e(z.$class(),"TABLES"))},1),q.$private(),V(q,"$getCheckRollDiceCommandResult",function(i){var z=this,M=t,F=t,Q=t,re=t,X=t,W=t,J=t;return M=e(S("Command"),"Parser").$new(/\d+LH/,w(["round_type"],{round_type:z.$round_type()})).$restrict_cmp_op_to(t,">=").$parse(i),v(M)?(F=M.$command().$to_i(),re=(Q=z.randomizer.$roll_barabara(F,6)).$sum(),X=N(re,M.$modify_number()),W=z.$result_text(F,Q,X,M),J=[["("+M+")",re+"["+Q.$join(",")+"]"+S("Format").$modifier(M.$modify_number()),X,W.$text()].$compact().$join(" \uff1e ")],Z(W,"text=",Y(J)),G(J.length,1),W):t},1),V(q,"$result_text",function(i,z,s,M){var F=this;return v(ee(z.$count(6),2))?S("Result").$critical(F.$translate("LogHorizon.LH.critical")):v(ee(z.$count(1),i))?S("Result").$fumble(F.$translate("LogHorizon.LH.fumble")):v(M.$cmp_op()["$nil?"]())?S("Result").$new():v(ee(s,M.$target_number()))?S("Result").$success(F.$translate("success")):S("Result").$failure(F.$translate("failure"))},4),V(q,"$getValue",function(i,z){return v(i["$nil?"]())||v(i["$empty?"]())?z:S("ArithmeticEvaluator").$eval(i)},2),V(q,"$roll_consumption",function(i){var s=t,M=t,F=t,Q=t,re=t;return s=/^CT\d*([+\-\d]+)?$/.$match(i),v(s)?(M=S("ArithmeticEvaluator").$eval(s["$[]"](1)),F=S("Format").$modifier(M),Q=this.randomizer.$roll_once(6),v(F["$empty?"]())||(re=N(Q.$to_s(),F)),["(1D6"+F+")",re,N(Q,M)].$compact().$join(" \uff1e ")):t},1),V(q,"$roll_consumption_table",function(i){var s=t,M=t,F=t,Q=t;return s=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),v(s)?(M=this.$construct_consumption_table(s["$[]"](1)),F=s["$[]"](2).$to_i(),Q=S("ArithmeticEvaluator").$eval(s["$[]"](3)),v(s["$[]"](4))&&M.$fix_dice_value(s["$[]"](4).$to_i()),M.$roll(F,Q,this.randomizer)):t},1),V(q,"$construct_consumption_table",function(i){var M,z=this,s=t;return s=B("P",M=i)?z.$translate("LogHorizon.CT.PCT"):B("E",M)?z.$translate("LogHorizon.CT.ECT"):B("G",M)?z.$translate("LogHorizon.CT.GCT"):B("C",M)?z.$translate("LogHorizon.CT.CCT"):B("ES",M)?z.$translate("LogHorizon.CT.ESCT"):B("CS",M)?z.$translate("LogHorizon.CT.CSCT"):t,S("ConsumptionTable").$new(s["$[]"]("name"),s["$[]"]("items"))},1),(s=(z=E(y[0],null,"ConsumptionTable")).$$prototype).tables=s.dice_value=s.name=t,V(z,"$initialize",function(F,Q){return this.name=F,this.tables=Q,this.dice_value=t},2),V(z,"$fix_dice_value",function(F){return this.dice_value=F},1),V(z,"$roll",function(F,Q,re){var W,J,x,X=this,T=t,p=t;return W=L(G(F,1),5).$clamp(0,G(X.tables.$size(),1)),T=X.tables["$[]"](W),X.dice_value=v(J=X.dice_value)?J:re.$roll_once(6),p=N(X.dice_value,Q),x=T["$[]"](p.$clamp(0,7)),X.name+"("+p+"["+X.dice_value+"]) \uff1e "+x},3),V(q,"$roll_treasure",function(i){var s=t,M=t,F=t,Q=t,re=t,X=t;return s=/^TRS(\d+)?([+\-\d]+)?$/.$match(i),v(s)?(M=s["$[]"](1).$to_i(),F=S("ArithmeticEvaluator").$eval(s["$[]"](2)),re=(Q=this.randomizer.$roll_barabara(2,6)).$sum(),X=N(N(re,f(M,5)),F),"(2D6+"+M+"*5"+S("Format").$modifier(F)+") \uff1e "+re+"["+Q.$join(",")+"]"+S("Format").$modifier(N(f(M,5),F))+" \uff1e "+X):t},1),V(q,"$roll_treasure_table",function(i){var z=this,s=t,M=t,F=t,Q=t,re=t;return s=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),v(s)?(M=s["$[]"](1),F=z.$construct_treasure_table(M),Q=s["$[]"](2).$to_i(),re=S("ArithmeticEvaluator").$eval(s["$[]"](3)),u(Q,0)&&u(re,0)?z.$translate("LogHorizon.TRS.need_cr",w(["command"],{command:i})):(v(s["$[]"](4))&&F.$fix_dice_value(7),F.$roll(Q,re,z.randomizer))):t},1),V(q,"$construct_treasure_table",function(i){return u(i,"HTRS")?S("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):S("TreasureTable").$from_i18n("LogHorizon.TRS."+i,this.locale)},1),V(q,"$roll_treasure_table_b2",function(i){var z=this,s=t,M=t,F=t,Q=t,re=t;return s=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(i),v(s)?(M=s["$[]"](1),F=S("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+M,z.locale),Q=s["$[]"](2).$to_i(),re=S("ArithmeticEvaluator").$eval(s["$[]"](3)),u(Q,0)&&u(re,0)?z.$translate("LogHorizon.TRS.need_cr",w(["command"],{command:i})):(v(s["$[]"](4))&&F.$fix_dice_value(7),F.$roll(Q,re,z.randomizer))):t},1),function(K,i,z){var re,W,T,s=E(K,null,"TreasureTable"),M=[s].concat(z),F=r.$r(M),Q=s.$$prototype;Q.dice_list=Q.name=Q.items=t,s.$include(F("Translate")),W=[re=r.get_singleton_class(s)].concat(M),T=r.$r(W),V(re,"$from_i18n",function(p,x){var $e=t;return $e=T("I18n").$translate(p,w(["raise","locale"],{raise:!0,locale:x})),this.$new($e["$[]"]("name"),$e["$[]"]("items"),x)},2),V(s,"$initialize",function(X,W,T){var J=this;return J.name=X,J.items=W,J.locale=T,J.dice_list=t},3),V(s,"$fix_dice_value",function(X){return this.dice_list=[X]},1),V(s,"$roll",function(X,W,T){var J,p=this,x=t,ne=t,$e=t,te=t;return u(X,0)&&u(W,0)?t:(x=u(X,0)&&C(W,0)?W:(p.dice_list=v(ne=p.dice_list)?ne:T.$roll_barabara(2,6),N(N(p.dice_list.$sum(),f(5,X)),W)),$e=p.$pick_item(x),v(p.dice_list)&&(te="["+((J=p.dice_list)===t||null==J?t:Z(J,"join",[","]))+"]"),p.name+"("+x+te+") \uff1e "+$e)},3),s.$private(),V(s,"$pick_item",function(X){var W=this;return v(A(X,6))?W.$translate("LogHorizon.TRS.below_lower_limit",w(["value"],{value:6})):v(A(X,62))?W.items["$[]"](X.$to_s()):v(A(X,72))?W.items["$[]"](G(X,10).$to_s())+"&80G":v(A(X,82))?W.items["$[]"](G(X,20).$to_s())+"&160G":v(A(X,87))?W.items["$[]"](G(X,30).$to_s())+"&260G":W.$translate("LogHorizon.TRS.exceed_upper_limit",w(["value"],{value:88}))},1)}(y[0],0,y),function(K,i){var z=E(K,i,"HeroineTreasureTable");z.$$prototype.items=t,V(z,"$pick_item",function(F){var Q=this;return v(A(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",w(["value"],{value:6})):v(A(F,53))?Q.items["$[]"](F.$to_s()):Q.$translate("LogHorizon.TRS.exceed_upper_limit",w(["value"],{value:54}))},1)}(y[0],S("TreasureTable")),function(K,i){var z=E(K,i,"ExpansionTreasureTable");z.$$prototype.items=t,V(z,"$pick_item",function(F){var Q=this;return v(A(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",w(["value"],{value:6})):v(A(F,162))?Q.items["$[]"](F.$to_s()):v(A(F,172))?Q.items["$[]"](G(F,10).$to_s())+"&200G":v(A(F,182))?Q.items["$[]"](G(F,20).$to_s())+"&400G":v(A(F,187))?Q.items["$[]"](G(F,30).$to_s())+"&600G":Q.$translate("LogHorizon.TRS.exceed_upper_limit",w(["value"],{value:188}))},1)}(y[0],S("TreasureTable")),V(q,"$getInventionAttributeTextDiceCommandResult",function(i){var s=t,M=t,F=t,Q=t,re=t;return v(i["$=~"](/IAT([ABMDLT]*)/))?(s=this.$translate("LogHorizon.IAT.name"),M=v(S("Regexp").$last_match(1))&&C(S("Regexp").$last_match(1),"")?S("Regexp").$last_match(1):"MDLT",F=M.$length()["$=="](1),Q=[],re=[],Z(M.$split(/(?:)/),"each",[],function X(W){var x,T=null==X.$$s?this:X.$$s,J=t,p=t,ne=t;return null==T.randomizer&&(T.randomizer=t),null==W&&(W=t),J=T.randomizer.$roll_once(6),re["$<<"](J.$to_s()),ne=(p=B("A",x=W)||B("M",x)?T.$translate("LogHorizon.IAT.A"):B("B",x)||B("D",x)?T.$translate("LogHorizon.IAT.B"):B("L",x)?T.$translate("LogHorizon.IAT.L"):B("T",x)?T.$translate("LogHorizon.IAT.T"):t)["$[]"]("items")["$[]"](G(J,1)),v(F)&&(ne=p["$[]"]("name")+"\uff1a"+ne),Q.$push(ne)},{$$arity:1,$$s:this}),s+"(["+re.$join(",")+"]) \uff1e "+Q.$join(" ")):t},1),V(q,"$getTroubleInAkibaStreetDiceCommandResult",function(i){return u(i,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):t},1),V(q,"$getAbandonedChildDiceCommandResult",function(i){return u(i,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):t},1),V(q,"$roll_random_table",function(i){var s=t,M=t,F=t,Q=t;return s=this.$translate(i),M=s["$[]"]("tables"),F=this.randomizer.$roll_barabara(M.$size(),6),Q=Z(F.$map(),"with_index",[],function(X,W){return null==X&&(X=t),null==W&&(W=t),M["$[]"](W)["$[]"](G(X,1))},2),s["$[]"]("name")+"(["+F.$join(",")+"]) \uff1e "+Q.$join(" ")},1),V(q,"$getMusicalInstrumentTypeDiceCommandResult",function(i){var z=this,s=t,M=t,F=t,Q=t,re=t,X=t,W=t;return!v(i["$=~"](/MII(\d?)/))||(s=(v(M=S("Regexp").$last_match(1))?S("Regexp").$last_match(1)["$!="](""):M)["$!"](),F=v(s)?z.randomizer.$roll_once(6):S("Regexp").$last_match(1).$to_i(),v(I(F,1))||I(6,F))?t:(Q=z.$translate("LogHorizon.MII.name"),re=z.$translate("LogHorizon.MII.type_list")["$[]"](G(F,1)),X=z.randomizer.$roll_once(6),W=z.$translate("LogHorizon.MII.items")["$[]"](G(F,1))["$[]"](G(X,1)),N(N(Q.$to_s(),v(s)?"("+F+")":"")," \uff1e "+re+"("+X+") \uff1e "+W))},1),V(q,"$roll_eastal_exploration_table",function(i){var z,s=this,M=t,F=t,Q=t,re=t,X=t,W=t,T=t,J=t,x=t;return M=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(i),!v(M)||v(M["$[]"](1)["$nil?"]())&&v(M["$[]"](2)["$nil?"]())&&v(M["$[]"](3)["$nil?"]())?t:(F=M["$[]"](1).$to_i(),Q=S("ArithmeticEvaluator").$eval(M["$[]"](2)),re=(z=M["$[]"](3))===t||null==z?t:Z(z,"to_i",[]),X=v(re)?[re]:u(F,0)?[]:s.randomizer.$roll_barabara(2,6),v(X["$empty?"]())||(W="["+X.$join(",")+"]"),T=N(N(X.$sum(),f(F,5)),Q).$clamp(7,162),J=s.$translate("LogHorizon.ESTL.name"),x=s.$translate("LogHorizon.ESTL.items")["$[]"](T.$to_s()).$chomp(),J+"("+T+W+")\n"+x)},1),function(K,i){var z=[K].concat(i),s=r.$r(z);K.$private(),V(K,"$translate_tables",function(F){return w(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",F),KOYU:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",F),MGR1:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",F),MGR2:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",F),MGR3:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",F),HLOC:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",F),PCNM:e(s("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",F)})},1)}(r.get_singleton_class(q),y),P(y[0],"TABLES",q.$translate_tables("ja_jp")),q.$register_prefix(S("TABLES").$keys())},Opal.queue(function(r){var v,Y,u,C,A,ee,B,N,n=[],e=r.module,k=r.klass,E=r.const_set,P=r.send2,l=r.find_super,H=r.def;return r.top.$require("bcdice/game_system/LogHorizon"),v=n,Y=N=[e(n[0],"BCDice")].concat(v),ee=[e(N[0],"GameSystem")].concat(Y),B=r.$r(ee),u=ee,E((A=[C=k(ee[0],B("LogHorizon"),"LogHorizon_Korean")].concat(u))[0],"ID","LogHorizon:Korean"),E(A[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),E(A[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),E(A[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),C.$register_prefix_from_super_class(),H(C,"$initialize",function I(h){var g=this;return delete I.$$p,P(g,l(g,"initialize",I,!1,!0),"initialize",[h],null),g.locale="ko_kr"},1),E(A[0],"TABLES",C.$translate_tables("ko_kr"))})}}]);