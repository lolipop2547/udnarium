(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[293],{2909:(re,ie,L)=>{L(9993),Opal.queue(function(i){var Q,W,ne,k,z,D,S,Z,H,B=[],e=i.nil,F=i.module,N=i.klass,T=i.const_set,P=i.send2,Y=i.find_super,C=i.def,n=i.truthy,x=i.rb_times,b=i.rb_gt,c=i.rb_plus,G=i.rb_lt,q=i.rb_le,p=i.send,M=i.eqeq,w=i.rb_minus,E=i.rb_ge;return Q=B,W=H=[F(B[0],"BCDice")].concat(Q),S=[F(H[0],"GameSystem")].concat(W),Z=i.$r(S),ne=S,z=[k=N(S[0],Z("Base"),"Raisondetre")].concat(ne),D=i.$r(z),k.$$prototype.randomizer=e,T(z[0],"ID","Raisondetre"),T(z[0],"NAME","\u53db\u9006\u30ec\u30be\u30f3\u30c7\u30fc\u30c8\u30eb"),T(z[0],"SORT_KEY","\u306f\u3093\u304d\u3084\u304f\u308c\u305d\u3093\u3066\u3068\u304a\u308b"),T(z[0],"HELP_MESSAGE","\u5224\u5b9a\uff1a[\u5224\u5b9a\u5024]RD[\u6280\u80fd][@\u76ee\u6a19\u5024]\n\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\uff1a[\u30c0\u30a4\u30b9\u6570]DD[\u88c5\u7532]\n\n[]\u5185\u306e\u30b3\u30de\u30f3\u30c9\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u300c\u5224\u5b9a\u5024\u300d\u3067\u5224\u5b9a\u306b\u4f7f\u7528\u3059\u308b\u30c0\u30a4\u30b9\u6570\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u300c1\u300d\u30020\u4ee5\u4e0b\u3082\u6307\u5b9a\u53ef\u3002\n\u300c\u6280\u80fd\u300d\u3067\u6709\u52b9\u306a\u30c0\u30a4\u30b9\u6570\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u300c1\u300d\u3002\n\u9054\u6210\u5024\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3092\u542b\u3081\u3066\u3001\u300c\u6700\u3082\u9ad8\u304f\u306a\u308b\u300d\u3088\u3046\u306b\u8a08\u7b97\u3057\u307e\u3059\u3002\n\u300c@\u76ee\u6a19\u5024\u300d\u6307\u5b9a\u3067\u3001\u5224\u5b9a\u306e\u6210\u5426\u3092\u8ffd\u52a0\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\u306f[\u88c5\u7532]\u6307\u5b9a\u3067\u3001\u6709\u52b9\u306a\u30c0\u30a4\u30b9\u6570\u30680\u306e\u51fa\u76ee\u306e\u6570\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n[\u88c5\u7532]\u7701\u7565\u6642\u306f\u3001\u30c0\u30a4\u30b9\u7d50\u679c\u306e\u307f\u8868\u793a\u3057\u307e\u3059\u3002\uff08\u8907\u6570\u306e\u5bfe\u8c61\u3078\u306e\u653b\u6483\u6642\u7528\uff09\n\n\u3010\u66f8\u5f0f\u4f8b\u3011\n\u30fbRD \u2192 1D\u3067\u9054\u6210\u5024\u3092\u8868\u793a\u3002\n\u30fb2RD1@8 \u2192 2D\uff081\u500b\u9078\u629e\uff09\u3067\u76ee\u6a19\u50248\u306e\u5224\u5b9a\u3002\n\u30fb-3RD \u2192 1D\u3067\u30c0\u30a4\u30b9\u30da\u30ca\u30eb\u30c6\u30a3-4\u306e\u5224\u5b9a\u3002\n\u30fb4DD2 \u2192 4D\u3067\u88c5\u75322\u306e\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\u3002\n"),C(k,"$initialize",function v(a){var u=this;return delete v.$$p,P(u,Y(u,"initialize",v,!1,!0),"initialize",[a],null),u.sort_add_dice=!0},1),k.$register_prefix("(-)?(\\d+)?RD","(-)?(\\d+)?DD"),C(k,"$eval_game_system_specific_command",function(a){var u=e,$=e,o=e,f=e,r=e;return n(a["$=~"](/(-)?(\d+)?RD(\d+)?(@(\d+))?$/i))?(u=(n($=D("Regexp").$last_match(2))?$:1).$to_i(),n(D("Regexp").$last_match(1)["$nil?"]())||(u=x(u,-1)),o=(n($=D("Regexp").$last_match(3))?$:1).$to_i(),f=(n($=D("Regexp").$last_match(5))?$:0).$to_i(),this.$checkRoll(u,o,f)):n(a["$=~"](/(-)?(\d+)?DD([1-9])?([+\-]\d+)?$/i))?(u=(n($=D("Regexp").$last_match(2))?$:1).$to_i(),n(D("Regexp").$last_match(1)["$nil?"]())||(u=x(u,-1)),r=(n($=D("Regexp").$last_match(3))?$:0).$to_i(),n(b(r,0))&&(r=c(r,(n($=D("Regexp").$last_match(4))?$:0).$to_i()),n(G(r,1))&&(r=1),n(b(r,9))&&(r=9)),this.$checkDamage(u,r)):e},1),C(k,"$checkRoll",function(a,m,u){var g,j,l,o=e,f=e,r=e,A=e,h=e,d=e,y=e,R=e,s=e,I=e,t=e;return n(q(a,0))?(o=c(1,x(a,-1)),f=1):(o=0,f=a),g=(r=this.randomizer.$roll_barabara(f,10).$sort()).$join(","),p(r,"map!",[],function(_){return null==_&&(_=e),M(_,10)?0:_},1),p(r,"map!",[],function(_){return null==_&&(_=e),w(_,o)},1),j=r.$sort().$join(","),A=p(r,"select",[],function(_){return null==_&&(_=e),q(_,1)},1),l=E(A.$size(),f),h=0,d=0,n(l)||(y=r.$count(0),R=x(y,10),(s=r.$reverse()).$delete(0),I=(s=s.$slice(i.Range.$new(0,w(m,1),!1))).$join(","),h=s.$inject("+"),d=c(h,R)),t=f+"D10",n(b(o,0))&&(t=c(t,"-"+o)),t=c(t," \uff1e ["+g+"] \uff1e ["+j+"] \uff1e "),n(l)?t=c(t,"\u9054\u6210\u5024\uff1a0 (Funble)"):(t=c(t,h+"["+I+"]"),n(b(R,0))&&(t=c(t,"+"+R)),t=c(t,"=\u9054\u6210\u5024\uff1a"+d),n(b(R,0))&&(t=c(t," ("+y+"Critical)"))),n(b(u,0))&&(t=c(t,">="+u+" "),n(E(d,u))&&(t=c(t,"\u3010\u6210\u529f\u3011")),n(G(d,u))&&(t=c(t,"\u3010\u5931\u6557\u3011"))),t},3),C(k,"$checkDamage",function(a,m){var r,j,A,$=e,o=e,f=e,g=e,l=e,h=e,d=e,y=e;return n(q(a,0))?($=c(1,x(a,-1)),o=1):($=0,o=a),r=(f=this.randomizer.$roll_barabara(o,10).$sort()).$join(","),j=(g=p(f,"map",[],function(s){return null==s&&(s=e),M(s,10)?0:s},1).$sort()).$count(0),p(g,"map!",[],function(s){return null==s&&(s=e),w(s,$)},1),A=g.$join(","),l=o+"D10",n(b($,0))&&(l=c(l,"-"+$)),l=c(l," \uff1e ["+r+"] \uff1e ["+A+"]"),n(b(m,0))&&(h=[],d=0,p(g,"each",[],function(s){return null==s&&(s=e),n(E(s,m))?(h.$push(s),d=c(d,1)):h.$push("\xd7")},1),y=h.$join(","),l=c(l," \uff1e ["+y+"]>="+m+" \u6709\u52b9\u6570\uff1a"+d)),c(l,"\u30000="+j+"\u500b")},2)})}}]);