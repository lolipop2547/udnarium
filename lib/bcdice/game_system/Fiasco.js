(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6739],{6587:(P,R,F)=>{F(9993),Opal.queue(function(n){var A,M,L,e,$,u,f,x,k,H,q,B=[],r=n.nil,W=n.module,g=n.klass,h=n.const_set,_=n.truthy,c=n.def,m=n.send,y=n.rb_plus,p=n.to_a,v=n.rb_minus,z=n.hash2,S=n.eqeqeq,w=n.eqeq,E=n.rb_gt;return A=B,M=q=[W(B[0],"BCDice")].concat(A),k=[W(q[0],"GameSystem")].concat(M),H=n.$r(k),L=k,f=[u=g(k[0],H("Base"),"Fiasco")].concat(L),x=n.$r(f),u.$$prototype.randomizer=r,h(f[0],"ID","Fiasco"),h(f[0],"NAME","\u30d5\u30a3\u30a2\u30b9\u30b3"),h(f[0],"SORT_KEY","\u3075\u3044\u3042\u3059\u3053"),h(f[0],"HELP_MESSAGE","  \u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(FSx, WxBx)\n    \u76f8\u95a2\u56f3\u30fb\u8ee2\u843d\u8981\u7d20\u7528(FSx)\uff1a\u76f8\u95a2\u56f3\u3084\u8ee2\u843d\u8981\u7d20\u306e\u305f\u3081\u306bx\u500b\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u76ee\u3054\u3068\u306b\u5206\u985e\u3059\u308b\n    \u9ed2\u767d\u5dee\u5206\u5224\u5b9a\u7528(WxBx)  \uff1a\u8ee2\u843d\u3001\u6b8b\u97ff\u306e\u305f\u3081\u306b\u767d\u30c0\u30a4\u30b9(W\u6307\u5b9a)\u3068\u9ed2\u30c0\u30a4\u30b9(B\u6307\u5b9a)\u3067\u5dee\u5206\u3092\u6c42\u3081\u308b\n      \u203b W\u3068B\u306f\u7247\u65b9\u6307\u5b9a(Bx, Wx)\u3001\u5165\u66ff\u6307\u5b9a(WxBx,BxWx)\u53ef\u80fd\n"),u.$register_prefix("FS","W","B"),c(u,"$eval_game_system_specific_command",function(o){var $,l,e=this;return _($=_(l=e.$roll_fs(o))?l:e.$roll_white_black(o))?$:e.$roll_white_black_single(o)},1),u.$private(),c(u,"$roll_fs",function(o){var $=r,l=r,i=r,t=r;return $=/^FS(\d+)$/.$match(o),_($)?(l=$["$[]"](1).$to_i(),i=this.randomizer.$roll_barabara(l,6),t=[r,0,0,0,0,0,0],m(i,"each",[],function(s){var b;return null==s&&(s=r),b=[s,y(t["$[]"](s),1)],m(t,"[]=",p(b)),b[v(b.length,1)]},1),m(t,"map!",[],function a(s){return null==s&&(s=r),(null==a.$$s?this:a.$$s).$translate("Fiasco.fs.count",z(["count"],{count:s}))},{$$arity:1,$$s:this}),"1 => "+t["$[]"](1)+", 2 => "+t["$[]"](2)+", 3 => "+t["$[]"](3)+", 4 => "+t["$[]"](4)+", 5 => "+t["$[]"](5)+", 6 => "+t["$[]"](6)):r},1),c(u,"$roll_white_black_single",function(o){var $=r,l=r;return $=/^([WB])(\d+)$/.$match(o),_($)?(l=x("Side").$new(this.$color($["$[]"](1)),$["$[]"](2).$to_i())).$roll(this.randomizer)+" \uff1e "+l.$color()+l.$total():r},1),c(u,"$roll_white_black",function(o){var e=this,$=r,l=r,i=r,a=r;return $=/^([WB])(\d+)([WB])(\d+)$/.$match(o),_($)?S(/^W\d+W\d+$/,l=o)?o+"\uff1a"+e.$translate("Fiasco.wb.duplicate_error.white"):S(/^B\d+B\d+$/,l)?o+"\uff1a"+e.$translate("Fiasco.wb.duplicate_error.black"):(i=x("Side").$new(e.$color($["$[]"](1)),$["$[]"](2).$to_i())).$roll(e.randomizer)+" "+(a=x("Side").$new(e.$color($["$[]"](3)),$["$[]"](4).$to_i())).$roll(e.randomizer)+" \uff1e "+i.$diff(a):r},1),c(u,"$color",function(o){return w(o,"W")?this.$translate("Fiasco.white"):this.$translate("Fiasco.black")},1),($=(e=g(f[0],null,"Side")).$$prototype).count=$.dice_list=$.color=$.total=r,c(e,"$initialize",function(i,t){return this.color=i,this.count=t},2),c(e,"$roll",function(i){var t=this;return t.dice_list=w(t.count,0)?[0]:i.$roll_barabara(t.count,6),t.total=t.dice_list.$sum(),""+t.color+t.total+"["+t.dice_list.$join(",")+"]"},1),c(e,"$diff",function(i){var t=this;return w(t.total,i.$total())?"0":_(E(t.total,i.$total()))?""+t.color+v(t.total,i.$total()):""+i.$color()+v(i.$total(),t.total)},1),e.$attr_reader("color","total")})}}]);