(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4116],{4361:(ee,ne,V)=>{V(9993),Opal.modules["bcdice/dice_table/table"]=function(e){var a,p,G,_,A,d,g,y,E,C=[],m=e.nil,t=e.module,N=e.klass,R=e.hash2,v=e.defs,k=e.truthy,T=e.def,K=e.rb_minus;return a=C,p=E=[t(C[0],"BCDice")].concat(a),G=y=[t(E[0],"DiceTable")].concat(p),A=[_=N(y[0],null,"Table")].concat(G),d=e.$r(A),(g=_.$$prototype).times=g.sides=g.name=g.items=m,v(_,"$from_i18n",function(b,$){var s=m;return s=d("I18n").$t(b,R(["locale"],{locale:$})),this.$new(s["$[]"]("name"),s["$[]"]("type"),s["$[]"]("items"))},2),T(_,"$initialize",function(b,$,h){var s=this,j=m;return s.name=b,s.items=h.$freeze(),j=/(\d+)D(\d+)/i.$match($),k(j)||s.$raise(d("ArgumentError"),"Unexpected table type: "+$),s.times=j["$[]"](1).$to_i(),s.sides=j["$[]"](2).$to_i()},3),T(_,"$roll",function(b){var h,$=this;return h=b.$roll_sum($.times,$.sides),$.$choice(h)},1),T(_,"$choice",function(b){var h,$=this;return h=K(b,$.times),d("RollResult").$new($.name,b,$.items["$[]"](h))},1)},Opal.modules["bcdice/game_system/Nechronica"]=function(e){var d,$,Z,u,r,n,o,w,z,s,j,x,m=[],t=e.nil,N=e.$$$,R=e.module,v=e.klass,k=e.const_set,T=e.send2,K=e.find_super,l=e.def,a=e.truthy,M=e.eqeq,E=e.neqeq,D=e.rb_ge,p=e.send,B=e.rb_le,y=e.rb_gt,q=e.hash2,L=e.rb_plus,G=e.to_a,_=e.rb_minus;return e.top.$require("bcdice/dice_table/table"),d=m,$=x=[R(m[0],"BCDice")].concat(d),s=[R(x[0],"GameSystem")].concat($),j=e.$r(s),Z=s,w=[o=v(s[0],j("Base"),"Nechronica")].concat(Z),z=e.$r(w),o.$$prototype.randomizer=t,k(w[0],"ID","Nechronica"),k(w[0],"NAME","\u30cd\u30af\u30ed\u30cb\u30ab"),k(w[0],"SORT_KEY","\u306d\u304f\u308d\u306b\u304b"),k(w[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000(nNC+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u4fee\u6b63\u5024m\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059(\u7701\u7565=1)\n\u3000\u30c0\u30a4\u30b9\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306e\u30d1\u30fc\u30c4\u7834\u640d\u6570\u3082\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u653b\u6483\u5224\u5b9a\u3000(nNA+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u4fee\u6b63\u5024m\u3067\u653b\u6483\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059(\u7701\u7565=1)\n\u3000\u547d\u4e2d\u90e8\u4f4d\u3068\u30c0\u30a4\u30b9\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306e\u30d1\u30fc\u30c4\u7834\u640d\u6570\u3082\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u8868\n\u30fb\u59c9\u59b9\u3078\u306e\u672a\u7df4\u8868 nm\n\u30fb\u4e2d\u7acb\u8005\u3078\u306e\u672a\u7df4\u8868 nmn\n\u30fb\u6575\u3078\u306e\u672a\u7df4\u8868 nme\n"),l(o,"$initialize",function u(i){var n=this;return delete u.$$p,T(n,K(n,"initialize",u,!1,!0),"initialize",[i],null),n.sort_add_dice=!0,n.sort_barabara_dice=!0,n.default_target_number=6},1),l(o,"$eval_game_system_specific_command",function(i){var n,r=this;return a(n=r.$roll_tables(i,N(r.$class(),"TABLES")))?n:r.$nechronica_check(i)},1),l(o,"$result_nd10",function(i,r,n,f,c){return E(n.$count(),1)||E(f,">=")||a(c["$nil?"]())||M(c,"?")?t:this.$result_nechronica([i],c)},5),o.$private(),l(o,"$result_nechronica",function(i,r){var n=this,f=t,c=t;return a(D(i.$max(),r))?a(D(i.$max(),11))?z("Result").$critical(n.$translate("Nechronica.critical")):z("Result").$success(n.$translate("success")):M(p(i,"count",[],function(S){return null==S&&(S=t),B(S,1)},1),0)?z("Result").$failure(n.$translate("failure")):a(y(i.$size(),1))?(f=n.$translate("Nechronica.break_all_parts"),c=n.$translate("Nechronica.fumble"),z("Result").$fumble(c+" \uff1e "+f)):z("Result").$fumble(n.$translate("Nechronica.fumble"))},2),l(o,"$r_backward_compatibility",function(i){var r=t;return r=i.$match(/^(\d)?R10([+\-\d]+)?(\[(\d+)\])?$/),a(r)?M(r["$[]"](4),"1")?r["$[]"](1)+"NA"+r["$[]"](2):r["$[]"](1)+"NC"+r["$[]"](2):i},1),l(o,"$nechronica_check",function(i){var r=this,n=t,f=t,c=t,I=t,S=t,P=t,F=t,J=t,H=t,Y=t;return i=r.$r_backward_compatibility(i),n=N(z("Command"),"Parser").$new(/N[CA](10)?/,q(["round_type"],{round_type:r.$round_type()})).$enable_prefix_number().$parse(i),a(n)?(f=[1,n.$prefix_number().$to_i()].$max(),c=a(I=n.$modify_number())?I:0,S=r.randomizer.$roll_barabara(f,10).$sort(),F=(P=p(S,"map",[],function(U){return null==U&&(U=t),L(U,c)},1)).$max(),a(n.$command()["$start_with?"]("NA"))&&(J=r.$get_hit_location(F)),H=r.$result_nechronica(P,6),Y=[["("+n+")","["+S.$join(",")+"]"+z("Format").$modifier(c),F+"["+P.$join(",")+"]",H.$text(),J].$compact().$join(" \uff1e ")],p(H,"text=",G(Y)),_(Y.length,1),H):t},1),l(o,"$get_hit_location",function(i){var f=t;return a(B(i,5))?t:(f=this.$translate("Nechronica.hit_location.table")["$[]"](_(i,6).$clamp(0,5)),a(y(i,10))?L(f,this.$translate("Nechronica.hit_location.additional_damage",q(["damage"],{damage:_(i,10)}))):f)},1),r=[u=e.get_singleton_class(o)].concat(w),n=e.$r(r),u.$private(),l(u,"$translate_tables",function(c){return q(["NM","NMN","NME"],{NM:N(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NM",c),NMN:N(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NMN",c),NME:N(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NME",c)})},1),k(w[0],"TABLES",o.$translate_tables("ja_jp")),o.$register_prefix("\\d?NC","\\d?NA","\\dR10",z("TABLES").$keys())},Opal.queue(function(e){var a,p,_,A,d,y,q,E,m=[],N=e.module,R=e.klass,v=e.const_set,k=e.send2,T=e.find_super,K=e.def;return e.top.$require("bcdice/game_system/Nechronica"),a=m,p=E=[N(m[0],"BCDice")].concat(a),y=[N(E[0],"GameSystem")].concat(p),q=e.$r(y),_=y,v((d=[A=R(y[0],q("Nechronica"),"Nechronica_Korean")].concat(_))[0],"ID","Nechronica:Korean"),v(d[0],"NAME","\ub124\ud06c\ub85c\ub2c8\uce74"),v(d[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub124\ud06c\ub85c\ub2c8\uce74"),v(d[0],"HELP_MESSAGE","\u30fb\ud310\uc815\u3000(nNC+m)\n\u3000\uc8fc\uc0ac\uc704 \uc218n\u3001\uc218\uc815\uce58m\uc73c\ub85c \ud310\uc815\uad74\ub9bc\uc744 \ud589\ud569\ub2c8\ub2e4.\n\u3000\uc8fc\uc0ac\uc704 \uc218\uac00 2\uac1c \uc774\uc0c1\uc77c \ub54c\uc5d0 \ud30c\uce20\ud30c\uc190 \uc218\ub3c4 \ud45c\uc2dc\ud569\ub2c8\ub2e4.\n\u30fb\uacf5\uaca9\ud310\uc815\u3000(nNA+m)\n\u3000\uc8fc\uc0ac\uc704 \uc218n\u3001\uc218\uc815\uce58m\uc73c\ub85c \uacf5\uaca9\ud310\uc815\uad74\ub9bc\uc744 \ud589\ud569\ub2c8\ub2e4.\n\u3000\uba85\uc911\ubd80\uc704\uc640 \uc8fc\uc0ac\uc704 \uc218\uac00 2\uac1c \uc774\uc0c1\uc77c \ub54c\uc5d0 \ud30c\uce20\ud30c\uc190 \uc218\ub3c4 \ud45c\uc2dc\ud569\ub2c8\ub2e4.\n\n\u8868\n\u30fb\u59c9\u59b9\u3078\u306e\u672a\u7df4\u8868 nm\n\u30fb\u4e2d\u7acb\u8005\u3078\u306e\u672a\u7df4\u8868 nmn\n\u30fb\u6575\u3078\u306e\u672a\u7df4\u8868 nme\n"),A.$register_prefix_from_super_class(),K(A,"$initialize",function g(x){var $=this;return delete g.$$p,k($,T($,"initialize",g,!1,!0),"initialize",[x],null),$.locale="ko_kr"},1),v(d[0],"TABLES",A.$translate_tables("ko_kr"))})}}]);