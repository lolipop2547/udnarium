(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1582],{5752:(oe,me,ne)=>{ne(9993),Opal.modules["bcdice/arithmetic_evaluator"]=function(t){var q,B,y,D,l,T,s,$,o=[],b=t.nil,i=t.$$$,r=t.module,f=t.hash2,A=t.truthy,m=t.def;return q=o,B=$=[r(o[0],"BCDice")].concat(q),s=[T=r($[0],"ArithmeticEvaluator")].concat(B),D=[y=t.get_singleton_class(T)].concat(s),l=t.$r(D),m(y,"$eval",function(L,N){var E,P=b;if(null==N)N=f([],{});else if(!N.$$is_hash)throw t.ArgumentError.$new("expected kwargs");return null==(E=N.$$smap.round_type)&&(E=i(l("RoundType"),"FLOOR")),A(L)&&A(P=l("Arithmetic").$eval(L,E))?P:0},-2)},Opal.modules["bcdice/format"]=function(t){var c,T,s,y,d,_,o=[],b=t.nil,i=t.module,r=t.eqeqeq,f=t.def,A=t.truthy,m=t.eqeq,S=t.rb_gt;return c=o,T=_=[i(o[0],"BCDice")].concat(c),y=[s=i(_[0],"Format")].concat(T),d=t.$r(y),s.$module_function(),f(s,"$comparison_operator",function(l){var G;return r("==",G=l)?"=":r("!=",G)?"<>":r(d("Symbol"),G)?l.$to_s():b},1),f(s,"$modifier",function(l){return A(l["$nil?"]())?b:m(l,0)?"":A(S(l,0))?"+"+l:l.$to_s()},1)},Opal.modules["bcdice/normalize"]=function(t){var S,_,c,o=[],b=t.nil,i=t.module,r=t.eqeqeq,f=t.def,A=t.eqeq;return S=o,c=[i(o[0],"BCDice")].concat(S),(_=i(c[0],"Normalize")).$module_function(),f(_,"$comparison_operator",function(T){var s;return r(/<=|=</,s=T)?"<=":r(/>=|=>/,s)?">=":r(/<>|!=|=!/,s)?"!=":r(/</,s)?"<":r(/>/,s)?">":r(/=/,s)?"==":b},1),f(_,"$target_number",function(T){return A(T,"?")?T:T.$to_i()},1)},Opal.queue(function(t){var L,ie,se,g,C,e,V,R,v,p,Te,E,o=t.top,b=[],i=t.nil,r=t.$$$,f=t.module,A=t.klass,m=t.const_set,S=t.send2,q=t.find_super,c=t.def,$=t.truthy,_=t.eqeq,B=t.rb_gt,T=t.send,s=t.rb_plus,y=t.rb_ge,d=t.rb_minus,D=t.to_a,l=t.hash2;return o.$require("bcdice/arithmetic_evaluator"),o.$require("bcdice/format"),o.$require("bcdice/normalize"),L=b,ie=E=[f(b[0],"BCDice")].concat(L),p=[f(E[0],"GameSystem")].concat(ie),Te=t.$r(p),se=p,R=[V=A(p[0],Te("Base"),"Amadeus")].concat(se),v=t.$r(R),V.$$prototype.randomizer=i,m(R[0],"ID","Amadeus"),m(R[0],"NAME","\u30a2\u30de\u30c7\u30a6\u30b9"),m(R[0],"SORT_KEY","\u3042\u307e\u3066\u3046\u3059"),m(R[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a(Rx\xb1y@z>=t)\n\u3000\u80fd\u529b\u5024\u306e\u30c0\u30a4\u30b9\u3054\u3068\u306b\u6210\u529f\u30fb\u5931\u6557\u306e\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1a\u80fd\u529b\u30e9\u30f3\u30af(S,A\uff5eD)\u3000y\uff1a\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\uff09\n\u3000z\uff1a\u30b9\u30da\u30b7\u30e3\u30eb\u6700\u4f4e\u5024\uff08\u7701\u7565\uff1a6\uff09\u3000t\uff1a\u76ee\u6a19\u5024\uff08\u7701\u7565\uff1a4\uff09\n\u3000\u3000\u4f8b\uff09 RA\u3000RB-1\u3000RC>=5\u3000RD+2\u3000RS-1@5>=6\n\u3000\u51fa\u529b\u66f8\u5f0f\u306f\n\u3000\u3000(\u9054\u6210\u5024)_(\u5224\u5b9a\u7d50\u679c)[(\u51fa\u76ee)(\u5bfe\u5fdc\u3059\u308b\u30a4\u30f3\u30ac)]\n\u3000C,D\u30e9\u30f3\u30af\u3067\u306f\u5bfe\u5fdc\u3059\u308b\u30a4\u30f3\u30ac\u306f\u51fa\u529b\u3055\u308c\u307e\u305b\u3093\u3002\n\u3000\u3000\u51fa\u529b\u4f8b)\u30002_\u30d5\u30a1\u30f3\u30d6\u30eb\uff01[1\u9ed2] / 3_\u5931\u6557[3\u9752]\n\u30fb\u5404\u7a2e\u8868\n\u3000\u5883\u9047\u8868 ECT\uff0f\u95a2\u4fc2\u8868 RT\uff0f\u89aa\u5fc3\u8868 PRT\uff0f\u6226\u5834\u8868 BST\uff0f\u4f11\u61a9\u8868 BT\uff0f\n\u3000\u30d5\u30a1\u30f3\u30d6\u30eb\u8868 FT\uff0f\u81f4\u547d\u50b7\u8868 FWT\uff0f\u6226\u679c\u8868 BRT\uff0f\u30e9\u30f3\u30c0\u30e0\u30a2\u30a4\u30c6\u30e0\u8868 RIT\uff0f\n\u3000\u640d\u50b7\u8868 WT\uff0f\u60aa\u5922\u8868 NMT\uff0f\u76ee\u6a19\u8868 TGT\uff0f\u5236\u7d04\u8868 CST\uff0f\n\u3000\u30e9\u30f3\u30c0\u30e0\u30ae\u30d5\u30c8\u8868 RGT\uff0f\u6c7a\u6226\u6226\u679c\u8868 FBT\uff0f\n\u3000\u5e97\u5185\u96f0\u56f2\u6c17\u8868 SAT\uff0f\u7279\u6b8a\u30e1\u30cb\u30e5\u30fc\u8868 SMT\n\u30fb\u8a66\u7df4\u8868\uff08\uff5eVT\uff09\n\u3000\u30ae\u30ea\u30b7\u30e3\u795e\u7fa4 GCVT\uff0f\u30e4\u30de\u30c8\u795e\u7fa4 YCVT\uff0f\u30a8\u30b8\u30d7\u30c8\u795e\u7fa4 ECVT\uff0f\n\u3000\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u7fa4 CCVT\uff0f\u5317\u6b27\u795e\u7fa4 NCVT\uff0f\u4e2d\u83ef\u795e\u7fa4 CHVT\uff0f\n  \u30e9\u30b9\u30c8\u30af\u30ed\u30cb\u30af\u30eb\u795e\u7fa4 LCVT\uff0f\u30b1\u30eb\u30c8\u795e\u7fa4 KCVT\uff0f\u30c0\u30f3\u30b8\u30e7\u30f3 DGVT\uff0f\u65e5\u5e38 DAVT\n\u30fb\u6311\u6226\u30c6\u30fc\u30de\u8868\uff08\uff5eCT\uff09\n\u3000\u6b66\u52c7 PRCT\uff0f\u6280\u8853 TCCT\uff0f\u982d\u8133 INCT\uff0f\u970a\u529b PSCT\uff0f\u611b LVCT\uff0f\u65e5\u5e38 DACT\n"),c(V,"$initialize",function g(h){var e=this;return delete g.$$p,S(e,q(e,"initialize",g,!1,!0),"initialize",[h],null),e.sort_add_dice=!0,e.enabled_d66=!0,e.d66_sort_type=r(v("D66SortType"),"ASC")},1),c(V,"$eval_game_system_specific_command",function(h){var e,C=this;return $(e=C.$roll_amadeus(h))?e:C.$roll_tables(h,r(C.$class(),"TABLES"))},1),V.$private(),c(V,"$roll_amadeus",function(h){var C=this,e=i,z=i,n=i,W=i,x=i,I=i,Y=i,U=i,J=i,F=i,Q=i,X=i,Z=i,O=i,M=i,H=i,K=i,ee=i,re=i;return e=/^R([A-DS])([+\-\d]*)(@(\d))?((>=?)([+\-\d]*))?(@(\d))?$/i.$match(h),$(e)?(z=e["$[]"](1),n=v("ArithmeticEvaluator").$eval(e["$[]"](2)),W=$(e["$[]"](6))?v("Normalize").$comparison_operator(e["$[]"](6)):">=",x=$(e["$[]"](7))?v("ArithmeticEvaluator").$eval(e["$[]"](7)):4,I=($(Y=$(U=e["$[]"](4))?U:e["$[]"](9))?Y:6).$to_i(),J=v("CHECK_DICE_COUNT")["$[]"](z),Q=(F=C.randomizer.$roll_barabara(J,6)).$join(","),X=_(I,6)?"":"@"+I,_(z,"D")&&(F=[F.$min()]),Z=B(F.$size(),1),O=C.$translate("Amadeus.inga_table"),M=!1,H=!1,K=!1,ee=T(F,"map",[],function w(u){var j,a=null==w.$$s?this:w.$$s,k=i;return null==u&&(u=i),k=s(u,n),j=_(u,1)?(K=!0,a.$translate("Amadeus.fumble")):$(y(u,I))?(H=!0,M=!0,a.$translate("Amadeus.special")):$(k.$send(W,x))?(M=!0,a.$translate("success")):a.$translate("failure"),$(Z)?k+"_"+j+"["+u+O["$[]"](d(u,1))+"]":k+"_"+j+"["+u+"]"},{$$arity:1,$$s:C}),re=["(R"+z+v("Format").$modifier(n)+X+W+x+")","["+Q+"]"+v("Format").$modifier(n),ee.$join(" / ")],T(v("Result").$new(),"tap",[],function(u){var a=i;return null==u&&(u=i),a=[re.$join(" \uff1e ")],T(u,"text=",D(a)),d(a.length,1),$(M)?(T(u,"success=",D(a=[!0])),d(a.length,1),T(u,"critical=",D(a=[H])),a[d(a.length,1)]):(T(u,"failure=",D(a=[!0])),d(a.length,1),T(u,"fumble=",D(a=[K])),a[d(a.length,1)])},1)):i},1),m(R[0],"CHECK_DICE_COUNT",l(["S","A","B","C","D"],{S:4,A:3,B:2,C:1,D:2}).$freeze()),C=[g=t.get_singleton_class(V)].concat(R),e=t.$r(C),g.$private(),c(g,"$translate_tables",function(n){return l(["ECT","BST","RT","PRT","FT","BT","FWT","BRT","RIT","WT","NMT","TGT","CST","GCVT","YCVT","ECVT","CCVT","NCVT","DGVT","DAVT","PRCT","TCCT","INCT","PSCT","LVCT","DACT","RGT","FBT","CHVT","LCVT","KCVT","SAT","SMT"],{ECT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.ECT",n),BST:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.BST",n),RT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.RT",n),PRT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.PRT",n),FT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.FT",n),BT:r(e("DiceTable"),"D66Table").$from_i18n("Amadeus.table.BT",n),FWT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.FWT",n),BRT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.BRT",n),RIT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.RIT",n),WT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.WT",n),NMT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.NMT",n),TGT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.TGT",n),CST:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.CST",n),GCVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.GCVT",n),YCVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.YCVT",n),ECVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.ECVT",n),CCVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.CCVT",n),NCVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.NCVT",n),DGVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.DGVT",n),DAVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.DAVT",n),PRCT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.PRCT",n),TCCT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.TCCT",n),INCT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.INCT",n),PSCT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.PSCT",n),LVCT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.LVCT",n),DACT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.DACT",n),RGT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.RGT",n),FBT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.FBT",n),CHVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.CHVT",n),LCVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.LCVT",n),KCVT:r(e("DiceTable"),"Table").$from_i18n("Amadeus.table.KCVT",n),SAT:r(e("DiceTable"),"D66Table").$from_i18n("Amadeus.table.SAT",n),SMT:r(e("DiceTable"),"D66Table").$from_i18n("Amadeus.table.SMT",n)})},1),m(R[0],"TABLES",V.$translate_tables("ja_jp")),V.$register_prefix("R[A-DS]",v("TABLES").$keys())})}}]);